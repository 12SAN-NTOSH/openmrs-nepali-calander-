"use strict";(globalThis.webpackChunk_openmrs_esm_login_app=globalThis.webpackChunk_openmrs_esm_login_app||[]).push([[93],{5193:(e,n,r)=>{r.d(n,{Z:()=>l});var o=r(9233),a=r.n(o),t=r(361),s=r.n(t)()(a());s.push([e.id,".-esm-login__change-password-modal__submitButton___M2e6N .cds--inline-loading{min-height:1rem}.-esm-login__change-password-modal__submitButton___M2e6N .cds--inline-loading__text{font-size:unset}","",{version:3,sources:["webpack://./src/change-password/change-password-modal.scss"],names:[],mappings:"AACE,8EACE,eAAA,CAGF,oFACE,eAAA",sourcesContent:[".submitButton {\r\n  :global(.cds--inline-loading) {\r\n    min-height: 1rem;\r\n  }\r\n\r\n  :global(.cds--inline-loading__text) {\r\n    font-size: unset;\r\n  }\r\n}\r\n"],sourceRoot:""}]),s.locals={submitButton:"-esm-login__change-password-modal__submitButton___M2e6N"};const l=s},93:(e,n,r)=>{r.r(n),r.d(n,{default:()=>T});var o=r(5776),a=r.n(o),t=r(2680),s=r(2093),l=r(9389),i=r(5834),d=r(4313),u=r(4610),c=r(5352),m=r(487),w=r.n(m),g=r(631),p=r.n(g),f=r(2052),h=r.n(f),v=r(4010),b=r.n(v),_=r(1469),C=r.n(_),P=r(9329),y=r.n(P),E=r(5193),A={};A.styleTagTransform=y(),A.setAttributes=b(),A.insert=h().bind(null,"head"),A.domAPI=p(),A.insertStyleElement=C(),w()(E.Z,A);const S=E.Z&&E.Z.locals?E.Z.locals:void 0;function k(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}const T=function(e){var n,r,m=e.close,w=(0,t.useTranslation)().t,g=(n=(0,o.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,a,t=[],s=!0,l=!1;try{for(r=r.call(e);!(s=(o=r.next()).done)&&(t.push(o.value),!n||t.length!==n);s=!0);}catch(e){l=!0,a=e}finally{try{s||null==r.return||r.return()}finally{if(l)throw a}}return t}}(n,r)||function(e,n){if(e){if("string"==typeof e)return k(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=g[0],f=g[1],h=s.z.string({required_error:w("oldPasswordRequired","Old password is required")}),v=s.z.string({required_error:w("newPasswordRequired","New password is required")}),b=s.z.string({required_error:w("passwordConfirmationRequired","Password confirmation is required")}),_=s.z.object({oldPassword:h,newPassword:v,passwordConfirmation:b}).refine((function(e){return e.newPassword===e.passwordConfirmation}),{message:w("passwordsDoNotMatch","Passwords do not match"),path:["passwordConfirmation"]}),C=(0,i.cI)({resolver:(0,l.F)(_)}),P=C.handleSubmit,y=C.control,E=C.formState.errors,A=(0,o.useCallback)((function(e){f(!0);var n=e.oldPassword,r=e.newPassword;(0,c.o)(n,r).then((function(){m(),(0,u.showSnackbar)({title:w("passwordChangedSuccessfully","Password changed successfully"),kind:"success"})})).catch((function(e){(0,u.showSnackbar)({kind:"error",subtitle:null==e?void 0:e.message,title:w("errorChangingPassword","Error changing password")})})).finally((function(){f(!1)}))}),[]);return a().createElement(d.Form,{onSubmit:P(A,(function(){return f(!1)}))},a().createElement(d.ModalHeader,{closeModal:m,title:w("changePassword","Change password")}),a().createElement(d.ModalBody,null,a().createElement(d.Stack,{gap:5,className:S.languageOptionsContainer},a().createElement(i.Qr,{name:"oldPassword",control:y,render:function(e){var n,r=e.field,o=r.onChange,t=r.value;return a().createElement(d.PasswordInput,{id:"oldPassword",invalid:!!(null==E?void 0:E.oldPassword),invalidText:null==E||null===(n=E.oldPassword)||void 0===n?void 0:n.message,labelText:w("oldPassword","Old password"),onChange:o,value:t})}}),a().createElement(i.Qr,{name:"newPassword",control:y,render:function(e){var n,r=e.field,o=r.onChange,t=r.value;return a().createElement(d.PasswordInput,{id:"newPassword",invalid:!!(null==E?void 0:E.newPassword),invalidText:null==E||null===(n=E.newPassword)||void 0===n?void 0:n.message,labelText:w("newPassword","New password"),onChange:o,value:t})}}),a().createElement(i.Qr,{name:"passwordConfirmation",control:y,render:function(e){var n,r=e.field,o=r.onChange,t=r.value;return a().createElement(d.PasswordInput,{id:"passwordConfirmation",invalid:!!(null==E?void 0:E.passwordConfirmation),invalidText:null==E||null===(n=E.passwordConfirmation)||void 0===n?void 0:n.message,labelText:w("confirmPassword","Confirm new password"),onChange:o,value:t})}}))),a().createElement(d.ModalFooter,null,a().createElement(d.Button,{kind:"secondary",onClick:m},w("cancel","Cancel")),a().createElement(d.Button,{className:S.submitButton,disabled:p,type:"submit"},p?a().createElement(d.InlineLoading,{description:w("changingLanguage","Changing password")+"..."}):a().createElement("span",null,w("change","Change")))))}}}]);