System.register(["@openmrs/esm-state"],(function(e,t){var n={};return{setters:[function(e){n.createGlobalStore=e.createGlobalStore,n.getGlobalStore=e.getGlobalStore}],execute:function(){e((()=>{"use strict";var e={685:e=>{e.exports=n}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{function e(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function t(t){return function n(r){return 0===arguments.length||e(r)?n:t.apply(this,arguments)}}function n(n){return function r(o,a){switch(arguments.length){case 0:return r;case 1:return e(o)?r:t((function(e){return n(o,e)}));default:return e(o)&&e(a)?r:e(o)?t((function(e){return n(e,a)})):e(a)?t((function(e){return n(o,e)})):n(o,a)}}}function a(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function i(e,t,n){for(var r=0,o=n.length;r<o;){if(e(t,n[r]))return!0;r+=1}return!1}function c(e,t){return Object.prototype.hasOwnProperty.call(t,e)}r.r(o),r.d(o,{Type:()=>L,clearConfigErrors:()=>We,configExtensionStore:()=>K,configInternalStore:()=>X,defineConfigSchema:()=>pe,defineExtensionConfigSchema:()=>me,getConfig:()=>Oe,getConfigStore:()=>Q,getExtensionConfig:()=>ne,getExtensionConfigFromStore:()=>re,getExtensionSlotConfig:()=>Y,getExtensionSlotConfigFromStore:()=>ee,getExtensionSlotsConfigStore:()=>V,getExtensionsConfigStore:()=>te,getTranslationOverrides:()=>je,implementerToolsConfigStore:()=>oe,inRange:()=>Ze,isUrl:()=>He,isUrlWithTemplateParameters:()=>Xe,oneOf:()=>Ke,processConfig:()=>we,provide:()=>Se,registerModuleWithConfigSystem:()=>be,registerTranslationNamespace:()=>he,temporaryConfigStore:()=>H,validator:()=>R,validators:()=>Qe});const u="function"==typeof Object.is?Object.is:function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};var s=Object.prototype.toString,l=function(){return"[object Arguments]"===s.call(arguments)?function(e){return"[object Arguments]"===s.call(e)}:function(e){return c("callee",e)}}();const f=l;var y=!{toString:null}.propertyIsEnumerable("toString"),d=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],v=function(){return arguments.propertyIsEnumerable("length")}(),g=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1};const p="function"!=typeof Object.keys||v?t((function(e){if(Object(e)!==e)return[];var t,n,r=[],o=v&&f(e);for(t in e)!c(t,e)||o&&"length"===t||(r[r.length]=t);if(y)for(n=d.length-1;n>=0;)c(t=d[n],e)&&!g(r,t)&&(r[r.length]=t),n-=1;return r})):t((function(e){return Object(e)!==e?[]:Object.keys(e)})),b=t((function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}));function h(e,t,n,r){var o=a(e);function c(e,t){return m(e,t,n.slice(),r.slice())}return!i((function(e,t){return!i(c,t,e)}),a(t),o)}function m(e,t,n,r){if(u(e,t))return!0;var o,a,i=b(e);if(i!==b(t))return!1;if(null==e||null==t)return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(i){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===(o=e.constructor,null==(a=String(o).match(/^function (\w*)/))?"":a[1]))return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!u(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!u(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1}for(var s=n.length-1;s>=0;){if(n[s]===e)return r[s]===t;s-=1}switch(i){case"Map":return e.size===t.size&&h(e.entries(),t.entries(),n.concat([e]),r.concat([t]));case"Set":return e.size===t.size&&h(e.values(),t.values(),n.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var l=p(e);if(l.length!==p(t).length)return!1;var f=n.concat([e]),y=r.concat([t]);for(s=l.length-1;s>=0;){var d=l[s];if(!c(d,t)||!m(t[d],e[d],f,y))return!1;s-=1}return!0}const S=n((function(e,t){return m(e,t,[],[])}));function O(r){return function o(a,i,c){switch(arguments.length){case 0:return o;case 1:return e(a)?o:n((function(e,t){return r(a,e,t)}));case 2:return e(a)&&e(i)?o:e(a)?n((function(e,t){return r(e,i,t)})):e(i)?n((function(e,t){return r(a,e,t)})):t((function(e){return r(a,i,e)}));default:return e(a)&&e(i)&&e(c)?o:e(a)&&e(i)?n((function(e,t){return r(e,t,c)})):e(a)&&e(c)?n((function(e,t){return r(e,i,t)})):e(i)&&e(c)?n((function(e,t){return r(a,e,t)})):e(a)?t((function(e){return r(e,i,c)})):e(i)?t((function(e){return r(a,e,c)})):e(c)?t((function(e){return r(a,i,e)})):r(a,i,c)}}}function j(e){return"[object Object]"===Object.prototype.toString.call(e)}const w=O((function(e,t,n){var r,o={};for(r in t)c(r,t)&&(o[r]=c(r,n)?e(r,t[r],n[r]):t[r]);for(r in n)c(r,n)&&!c(r,o)&&(o[r]=n[r]);return o})),x=O((function e(t,n,r){return w((function(n,r,o){return j(r)&&j(o)?e(t,r,o):t(n,r,o)}),n,r)})),A=n((function(e,t){return x((function(e,t,n){return n}),e,t)})),_=n((function(e,t){for(var n={},r={},o=0,a=e.length;o<a;)r[e[o]]=1,o+=1;for(var i in t)r.hasOwnProperty(i)||(n[i]=t[i]);return n}));function k(e,t,n,r){var o,a=function(o){for(var a=t.length,i=0;i<a;){if(e===t[i])return n[i];i+=1}for(var c in t[i+1]=e,n[i+1]=o,e)o[c]=r?k(e[c],t,n,!0):e[c];return o};switch(b(e)){case"Object":return a({});case"Array":return a([]);case"Date":return new Date(e.valueOf());case"RegExp":return o=e,new RegExp(o.source,(o.global?"g":"")+(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.sticky?"y":"")+(o.unicode?"u":""));default:return e}}const P=t((function(e){return null!=e&&"function"==typeof e.clone?e.clone():k(e,[],[],!0)})),I=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)},C=t((function(e){return!!I(e)||!!e&&"object"==typeof e&&!function(e){return"[object String]"===Object.prototype.toString.call(e)}(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1))}));var E=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}(),T=n((function(e,t){return function(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,o){return t.apply(this,arguments)};case 5:return function(e,n,r,o,a){return t.apply(this,arguments)};case 6:return function(e,n,r,o,a,i){return t.apply(this,arguments)};case 7:return function(e,n,r,o,a,i,c){return t.apply(this,arguments)};case 8:return function(e,n,r,o,a,i,c,u){return t.apply(this,arguments)};case 9:return function(e,n,r,o,a,i,c,u,s){return t.apply(this,arguments)};case 10:return function(e,n,r,o,a,i,c,u,s,l){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}(e.length,(function(){return e.apply(t,arguments)}))}));const U=T;function D(e,t,n){for(var r=n.next();!r.done;){if((t=e["@@transducer/step"](t,r.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=n.next()}return e["@@transducer/result"](t)}function N(e,t,n,r){return e["@@transducer/result"](n[r](U(e["@@transducer/step"],e),t))}var q="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function M(e,t,n){if("function"==typeof e&&(e=function(e){return new E(e)}(e)),C(n))return function(e,t,n){for(var r=0,o=n.length;r<o;){if((t=e["@@transducer/step"](t,n[r]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}(e,t,n);if("function"==typeof n["fantasy-land/reduce"])return N(e,t,n,"fantasy-land/reduce");if(null!=n[q])return D(e,t,n[q]());if("function"==typeof n.next)return D(e,t,n);if("function"==typeof n.reduce)return N(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}const G=O(M);var L;function R(e,t){return function(n){if(!e(n))return"function"==typeof t?t(n):t}}!function(e){e.Array="Array",e.Boolean="Boolean",e.ConceptUuid="ConceptUuid",e.Number="Number",e.Object="Object",e.String="String",e.UUID="UUID",e.PersonAttributeTypeUuid="PersonAttributeTypeUuid",e.PatientIdentifierTypeUuid="PatientIdentifierTypeUuid"}(L||(L={}));var B=R((function(e){return Array.isArray(e)}),"must be an array"),$=R((function(e){return"boolean"==typeof e}),"must be a boolean"),z=R((function(e){return"number"==typeof e}),"must be a number"),W=R((function(e){return"string"==typeof e}),"must be a string"),F=R((function(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}),"must be an object (not an array or null)"),J=R((function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)||/^[0-9a-f]{36}$/i.test(e)}),"must be a valid UUID or a 36-character hexadecimal string"),Z=r(685),X=(0,Z.createGlobalStore)("config-internal",{providedConfigs:[],schemas:{},moduleLoaded:{}}),H=(0,Z.createGlobalStore)("temporary-config",{config:function(){try{return JSON.parse(localStorage.getItem("openmrs:temporaryConfig")||"{}")}catch(e){return{}}}()});H.subscribe((function(e){var t;t=e.config,localStorage.setItem("openmrs:temporaryConfig",JSON.stringify(t))}));var K=(0,Z.createGlobalStore)("config-store-of-extension-state",{mountedExtensions:[]});function Q(e){return(0,Z.getGlobalStore)("config-module-".concat(e),{config:null,loaded:!1,translationOverridesLoaded:!1})}function V(){return(0,Z.getGlobalStore)("config-extension-slots",{slots:{}})}function Y(e){return ee(V().getState(),e)}function ee(e,t){var n=e.slots[t];return null!=n?n:{loaded:!1,config:{}}}function te(){return(0,Z.getGlobalStore)("config-extensions",{configs:{}})}function ne(e,t){var n=Object.assign({},re(te().getState(),e,t));return n.config=_(["Display conditions","Translation overrides"],n.config),n}function re(e,t,n){var r,o=null===(r=e.configs[t])||void 0===r?void 0:r[n];return null!=o?o:{loaded:!1,config:null}}var oe=(0,Z.createGlobalStore)("config-implementer-tools",{config:{}});function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ie(e,t,n[t])}))}return e}function ue(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,t)||fe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}function ye(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=Object.keys(e.schemas)[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value,u=Q(c);if(e.moduleLoaded[c]){var s=Ce(c,e,t);u.setState({translationOverridesLoaded:!0,loaded:!0,config:s})}else{var l=Ee(c,e,t);u.setState({translationOverridesLoaded:!0,loaded:!1,config:l})}}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}}function de(e,t){var n,r,o=(n=Ue(Pe(e,t)),function(e){var t=!0,n=!1,r=void 0;try{for(var o,a=Object.entries(e)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=se(o.value,2),c=i[0],u=i[1],s=!0,l=!1,f=void 0;try{for(var y,d=Object.entries(u)[Symbol.iterator]();!(s=(y=d.next()).done);s=!0){var v=se(y.value,2),g=v[0];ke(v[1],c,g)}}catch(e){l=!0,f=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw f}}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}(r=Object.keys(n).reduce((function(e,t){var r,o;return(null===(r=n[t])||void 0===r?void 0:r.extensionSlots)&&(e[t]=null===(o=n[t])||void 0===o?void 0:o.extensionSlots),e}),{})),Object.keys(r).reduce((function(e,t){return ce({},e,r[t])}),{})),a=Object.fromEntries(Object.entries(o).map((function(e){var t=se(e,2);return[t[0],{loaded:!0,config:t[1]}]}))),i=V(),c=i.getState(),u={slots:ce({},c.slots,a)};S(c,u)||i.setState(u)}function ve(e,t){var n=function(e,t){var n=Ae(P(e.schemas)),r=le(e.providedConfigs.map((function(e){return[e.config,e.source]}))).concat([[t.config,"temporary config"]]),o=!0,a=!1,i=void 0;try{for(var c,u=r[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=se(c.value,2);n=Ue([n,_e(s[0],s[1])])}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}return n}(e,t);oe.setState({config:n})}function ge(e,t,n){var r={},o=!0,a=!1,i=void 0;try{for(var c,u=t.mountedExtensions[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value,l=xe(s.slotModuleName,s.extensionModuleName,s.slotName,s.extensionId,e,n);r[s.slotName]=ue(ce({},r[s.slotName]),ie({},s.extensionId,{config:l,loaded:!0}))}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}te().setState({configs:r})}function pe(e,t){Ie(e,t);var n=A(t,Je);X.setState((function(t){return ue(ce({},t),{schemas:ue(ce({},t.schemas),ie({},e,n)),moduleLoaded:ue(ce({},t.moduleLoaded),ie({},e,!0))})}))}function be(e){var t=X.getState();X.setState({schemas:ue(ce({},t.schemas),ie({},e,Je))})}function he(e){var t=X.getState();X.setState({schemas:ue(ce({},t.schemas),ie({},e,Fe))})}function me(e,t){Ie(e,t);var n=A(t,Je),r=X.getState();r.schemas[e]&&console.error("Config schema for extension ".concat(e," already exists. If there are multiple extensions with this same name, one will probably crash.")),X.setState({schemas:ue(ce({},r.schemas),ie({},e,n))})}function Se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"provided";X.setState((function(n){return ue(ce({},n),{providedConfigs:le(n.providedConfigs).concat([{source:t,config:e}])})}))}function Oe(e){return new Promise((function(t){var n=function(e){if(e.loaded&&e.config){var n=_(["Display conditions","Translation overrides"],e.config);t(n),o&&o()}},r=Q(e);n(r.getState());var o=r.subscribe(n)}))}function je(e){return new Promise((function(t){var n=function(e){if(e.translationOverridesLoaded&&e.config){var n,r=null!==(n=e.config["Translation overrides"])&&void 0!==n?n:{};t(r),o&&o()}},r=Q(e);n(r.getState());var o=r.subscribe(n)}))}function we(e,t,n){De(e,t,n);var r=Le(e,t);return qe(e,r,n),r}function xe(e,t,n,r,o,a){var i,c,u,s,l=function(e){return se(e.split("#"),1)[0]}(r),f=o.schemas[l],y=f?l:t,d=Pe(o,a),v=Te(e,d),g=null!==(s=null==v||null===(i=v.extensionSlots)||void 0===i||null===(c=i[n])||void 0===c||null===(u=c.configure)||void 0===u?void 0:u[r])&&void 0!==s?s:{},p=Ue([Te(y,d),g]),b=null!=f?f:o.schemas[t];De(b,p,y);var h=Le(b,p);return qe(b,h,y),delete h.extensionSlots,h}function Ae(e){return e.hasOwnProperty("_default")?ue(ce({},e),{_value:e._default,_source:"default"}):Be(e)?Object.keys(e).reduce((function(t,n){return t[n]=Ae(e[n]),t}),{}):{}}function _e(e,t){return Be(e)?Object.keys(e).reduce((function(n,r){return n[r]=_e(e[r],t),n}),{}):{_value:e,_source:t}}function ke(e,t,n){var r="".concat(t,".extensionSlots.").concat(n),o="Extension slot config '".concat(r,"'"),a=Object.keys(e).filter((function(e){return!["add","remove","order","configure"].includes(e)}));a.length&&ze(r,o+"' contains invalid keys '".concat(a.join("', '"),"'")),e.add&&(Array.isArray(e.add)&&e.add.every((function(e){return"string"==typeof e}))||ze(r,o+".add' is invalid. Must be an array of strings (extension IDs)")),e.remove&&(Array.isArray(e.remove)&&e.remove.every((function(e){return"string"==typeof e}))||ze(r,o+".remove' is invalid. Must be an array of strings (extension IDs)")),e.order&&(Array.isArray(e.order)&&e.order.every((function(e){return"string"==typeof e}))||ze(r,o+".order' is invalid. Must be an array of strings (extension IDs)")),e.configure&&(Be(e.configure)||ze(r,o+".configure' is invalid. Must be an object with extension IDs for keys"))}function Pe(e,t){return le(e.providedConfigs.map((function(e){return e.config}))).concat([t.config])}function Ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="Please verify that you are running the latest version and, if so, alert the maintainer.",o=!0,a=!1,i=void 0;try{for(var c,u=function(){var o=c.value,a=n+(n&&".")+o,i=t[o];if("Display conditions"===a&&console.error("".concat(e,' declares a configuration option called "Display conditions"; the "Display conditions" option is a reserved name. ').concat(r)),"Translation overrides"===a&&console.error("".concat(e,' declares a configuration option called "Translation overrides"; the "Translation overrides" option is a reserved name. ').concat(r)),!Be(i))return console.error("".concat(e," has bad config schema definition for key '").concat(a,"'. ").concat(r)),"continue";i.hasOwnProperty("_default")||Ie(e,i,a);var u=i._elements;if(Re(u)&&Ie(e,u,a+"._elements"),i._validators){var s=!0,l=!1,f=void 0;try{for(var y,d=i._validators[Symbol.iterator]();!(s=(y=d.next()).done);s=!0){var v=y.value;"function"!=typeof v&&console.error("".concat(e," has invalid validator for key '").concat(a,"' ").concat(r,".")+"\n\nIf you're the maintainer: validators must be functions that return either "+"undefined or an error string. Received ".concat(v,"."))}}catch(e){l=!0,f=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw f}}}var g=i._type;g&&!Object.values(L).includes(g)&&console.error("".concat(e," has invalid type for key '").concat(a,"' ").concat(r,".")+"\n\nIf you're the maintainer: the allowed types are ".concat(Object.values(L).join(", "),". ")+"Received '".concat(g,"'")),Object.keys(i).every((function(e){return["_description","_validators","_elements","_type"].includes(e)}))&&!n.includes("._elements")&&console.error("".concat(e," has bad config schema definition for key '").concat(a,"'. ").concat(r,".")+"\n\nIf you're the maintainer: all config elements must have a default. "+"Received ".concat(JSON.stringify(i))),u&&g&&![L.Array,L.Object].includes(g)&&console.error("".concat(e," has bad config schema definition for key '").concat(a,"'. ").concat(r,".")+"\n\nIf you're the maintainer: the 'elements' key only works with '_type' equal to 'Array' or 'Object'. "+"Received ".concat(JSON.stringify(g)))},s=Object.keys(t).filter((function(e){return!e.startsWith("_")}))[Symbol.iterator]();!(o=(c=s.next()).done);o=!0)u()}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}}function Ce(e,t,n){var r=t.schemas[e],o=Te(e,Pe(t,n));De(r,o,e);var a=Le(r,o);return qe(r,a,e),delete a.extensionSlots,a}function Ee(e,t,n){var r=Te(e,Pe(t,n)),o=Le(Je,r);return qe(Je,o,e),delete o.extensionSlots,o}function Te(e,t){return Ue(t.map((function(t){return t[e]})).filter((function(e){return!!e})))}function Ue(e){return G(A)({},e)}function De(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=!0,o=!1,a=void 0;try{for(var i,c=Object.keys(t)[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var u=i.value,s=t[u],l=n+"."+u,f=e[u];e.hasOwnProperty(u)?Ne(f,s,l):"extensionSlots"===u&&""!==n||ze(l,"Unknown config key '".concat(l,"' provided. Ignoring."))}}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}}function Ne(e,t,n){Me(n,e._type,t),Be(t)?e._type===L.Object?function(e,t,n){if(e._elements){var r=!0,o=!1,a=void 0;try{for(var i,c=Object.keys(t)[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var u=i.value,s=t[u];De(e._elements,s,"".concat(n,".").concat(u))}}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}}}(e,t,n):e.hasOwnProperty("_default")||e.hasOwnProperty("_type")||De(e,t,n):e._type===L.Array&&function(e,t,n){if(Me(n,L.Array,t)){if(Re(e._elements))for(var r=0;r<t.length;r++)Ne(e._elements,t[r],"".concat(n,"[").concat(r,"]"));for(var o=0;o<t.length;o++){var a;Me("".concat(n,"[").concat(o,"]"),null===(a=e._elements)||void 0===a?void 0:a._type,t[o])}}}(e,t,n)}function qe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(e)if(t!==e._default&&Ge(n,e._validators,t),Be(t)){var r=!0,o=!1,a=void 0;try{for(var i,c=Object.keys(t)[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var u=i.value,s=t[u],l=n+"."+u,f=e[u];e._type===L.Object&&e._elements?qe(e._elements,s,l):qe(f,s,l)}}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}}else if(Array.isArray(t)&&e._elements)for(var y=0;y<t.length;y++)qe(e._elements,t[y],"".concat(n,"[").concat(y,"]"))}function Me(e,t,n){return!t||Ge(e,[{Array:B,Boolean:$,ConceptUuid:J,Number:z,Object:F,String:W,UUID:J,PersonAttributeTypeUuid:J,PatientIdentifierTypeUuid:J}[t]],n)}function Ge(e,t,n){var r=!0;if(t)try{var o=!0,a=!1,i=void 0;try{for(var c,u=t[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=(0,c.value)(n);"string"==typeof s&&(ze(e,"object"==typeof n?"Invalid configuration for ".concat(e,": ").concat(s):"Invalid configuration value ".concat(n," for ").concat(e,": ").concat(s)),r=!1)}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}}catch(t){console.error('Skipping invalid validator at "'.concat(e,'". Encountered error\n\t').concat(t))}return r}ye(X.getState(),H.getState()),X.subscribe((function(e){return ye(e,H.getState())})),H.subscribe((function(e){return ye(X.getState(),e)})),ve(X.getState(),H.getState()),X.subscribe((function(e){return ve(e,H.getState())})),H.subscribe((function(e){return ve(X.getState(),e)})),de(X.getState(),H.getState()),X.subscribe((function(e){return de(e,H.getState())})),H.subscribe((function(e){return de(X.getState(),e)})),ge(X.getState(),K.getState(),H.getState()),X.subscribe((function(e){ge(e,K.getState(),H.getState())})),K.subscribe((function(e){ge(X.getState(),e,H.getState())})),H.subscribe((function(e){ge(X.getState(),K.getState(),e)}));var Le=function(e,t){var n=P(t);if(!e)return n;var r=!0,o=!1,a=void 0;try{for(var i,c=function(){var t=i.value,r=n[t],o=e[t];if(o&&(o.hasOwnProperty("_type")||o.hasOwnProperty("_default"))){n.hasOwnProperty(t)||(n[t]=o._default);var a=o._elements;if(r&&Re(a))if(o._type===L.Array&&Array.isArray(r)){var c=r.map((function(e){return Le(a,e)}));n[t]=c}else if(o._type===L.Object){var u=!0,s=!1,l=void 0;try{for(var f,y=Object.keys(r)[Symbol.iterator]();!(u=(f=y.next()).done);u=!0){var d=f.value;r[d]=Le(a,r[d])}}catch(e){s=!0,l=e}finally{try{u||null==y.return||y.return()}finally{if(s)throw l}}}}else if(Be(o)){var v=null!=r?r:{};Be(v)&&(n[t]=Le(o,v))}},u=Object.keys(e)[Symbol.iterator]();!(r=(i=u.next()).done);r=!0)c()}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n};function Re(e){return!!e&&Object.keys(e).filter((function(e){return!["_default","_validators"].includes(e)})).length>0}function Be(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}var $e=new Set;function ze(e,t){var n="".concat(e,":::").concat(t);$e.has(n)||(console.error(t),$e.add(n))}function We(e){e?$e.forEach((function(t){t.startsWith(e)&&$e.delete(t)})):$e.clear()}var Fe={"Translation overrides":{_description:"Per-language overrides for frontend translations should be keyed by language code and each language dictionary contains the translation key and the display value",_type:L.Object,_default:{},_validators:[R((function(e){return Object.keys(e).every((function(e){return/^[a-z]{2,3}(-[A-Z]{2,3})?$/.test(e)}))}),(function(e){var t=Object.keys(e).filter((function(e){return!/^[a-z]{2,3}(-[A-Z]{2,3})?$/.test(e)}));return"The 'Translation overrides' object should have language codes for keys. Language codes must be in the form of a two-to-three letter language code optionally followed by a hyphen and a two-to-three letter country code. The following keys do not conform: ".concat(t.join(", "),".")}))]}},Je=ce({"Display conditions":{privileges:{_description:"The privilege(s) the user must have to use this extension",_type:L.Array,_default:[]}}},Fe),Ze=function(e,t){return R((function(n){return e<=n&&n<=t}),"must be between ".concat(e," and ").concat(t))},Xe=function(e){var t=e.concat(["openmrsBase","openmrsSpaBase"]);return R((function(e){if(!e||"string"!=typeof e)return!1;for(var n=/\${(.*?)}/g,r=n.exec(e);r;){if(!t.includes(r[1]))return!1;r=n.exec(e)}return!0}),"Should be a URL or path. The allowed template parameters are "+t.map((function(e){return"${"+e+"}"})).join(", "))},He=Xe([]),Ke=function(e){return R((function(t){return e.includes(t)}),"Must be one of the following: '".concat(e.join("', '"),"'."))},Qe={inRange:Ze,isUrl:He,isUrlWithTemplateParameters:Xe,oneOf:Ke}})(),o})())}}}));
//# sourceMappingURL=openmrs-esm-module-config.js.map