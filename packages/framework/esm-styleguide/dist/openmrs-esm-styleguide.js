/*! For license information please see openmrs-esm-styleguide.js.LICENSE.txt */
System.register(["@openmrs/esm-error-handling","@openmrs/esm-extensions","@openmrs/esm-navigation","@openmrs/esm-react-utils","@openmrs/esm-state","@openmrs/esm-translations","dayjs","i18next","react","react-dom","rxjs"],(function(e,t){var n={},r={},o={},i={},a={},s={},u={},c={},l={},f={},h={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(f,"__esModule",{value:!0}),{setters:[function(){},function(e){r.getExtensionInternalStore=e.getExtensionInternalStore,r.getExtensionStore=e.getExtensionStore},function(){},function(){},function(e){a.createGlobalStore=e.createGlobalStore,a.getGlobalStore=e.getGlobalStore},function(){},function(e){u.default=e.default},function(e){c.default=e.default},function(e){Object.keys(e).forEach((function(t){l[t]=e[t]}))},function(e){Object.keys(e).forEach((function(t){f[t]=e[t]}))},function(e){h.BehaviorSubject=e.BehaviorSubject,h.Subject=e.Subject}],execute:function(){e((()=>{var e={976:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e,t=[],n=0;n<arguments.length;n++){var i=arguments[n];if(i){var a=void 0===i?"undefined":(e=i)&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e;if("string"===a||"number"===a)t.push(i);else if(Array.isArray(i)){if(i.length){var s=o.apply(null,i);s&&t.push(s)}}else if("object"===a){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){t.push(i.toString());continue}for(var u in i)r.call(i,u)&&i[u]&&t.push(u)}}}return t.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},701:function(e){e.exports=function(){"use strict";return function(e,t,n){t.prototype.isToday=function(){var e="YYYY-MM-DD",t=n();return this.format(e)===t.format(e)}}}()},353:(e,t,n)=>{!function(t){"use strict";var r=function(e){return function(t,n){return"object"==typeof t&&(n=t,t=null),null==t&&(t=(new Date).toString()),n||(n={}),e.call(this,t,n)}},o=n(42),i=e.exports={generate:r((function(e,t){return new o(e,t)}))};t&&(t.fn.geopattern=r((function(e,n){return this.each((function(){var r=t(this).attr("data-title-sha");r&&(n=t.extend({hash:r},n));var o=i.generate(e,n);t(this).css("background-image",o.toDataUrl())}))})))}("undefined"!=typeof jQuery?jQuery:null)},851:e=>{"use strict";e.exports={hex2rgb:function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},rgb2hex:function(e){return"#"+["r","g","b"].map((function(t){return("0"+e[t].toString(16)).slice(-2)})).join("")},rgb2hsl:function(e){var t=e.r,n=e.g,r=e.b;t/=255,n/=255,r/=255;var o,i,a=Math.max(t,n,r),s=Math.min(t,n,r),u=(a+s)/2;if(a===s)o=i=0;else{var c=a-s;switch(i=u>.5?c/(2-a-s):c/(a+s),a){case t:o=(n-r)/c+(n<r?6:0);break;case n:o=(r-t)/c+2;break;case r:o=(t-n)/c+4}o/=6}return{h:o,s:i,l:u}},hsl2rgb:function(e){var t,n,r,o=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},i=e.h,a=e.s,s=e.l;if(0===a)t=n=r=s;else{var u=s<.5?s*(1+a):s+a-s*a,c=2*s-u;t=o(c,u,i+1/3),n=o(c,u,i),r=o(c,u,i-1/3)}return{r:Math.round(255*t),g:Math.round(255*n),b:Math.round(255*r)}},rgb2rgbString:function(e){return"rgb("+[e.r,e.g,e.b].join(",")+")"}}},42:(e,t,n)=>{"use strict";var r=n(495),o=n(851),i=n(451),a=n(138),s={baseColor:"#933c3c"},u=["octogons","overlappingCircles","plusSigns","xes","sineWaves","hexagons","overlappingRings","plaid","triangles","squares","concentricCircles","diamonds","tessellation","nestedSquares","mosaicSquares","chevrons"],c="#222",l="#ddd",f="#000",h=.02,d=.02,p=.15;function v(e,t,n){return parseInt(e.substr(t,n||1),16)}function y(e,t,n,r,o){return(parseFloat(e)-t)*(o-r)/(n-t)+r}function m(e){return e%2==0?l:c}function g(e){return y(e,0,15,d,p)}var b=e.exports=function(e,t){return this.opts=r({},s,t),this.hash=t.hash||i(e),this.svg=new a,this.generateBackground(),this.generatePattern(),this};function w(e){return[[e,0,e,3*e],[0,e,3*e,e]]}function _(e){return[0,0,e,e,0,e,0,0].join(",")}function S(e,t,n,r,o){var i=_(r),a=g(o[0]),s=m(o[0]),u={stroke:f,"stroke-opacity":h,"fill-opacity":a,fill:s};e.polyline(i,u).transform({translate:[t+r,n],scale:[-1,1]}),e.polyline(i,u).transform({translate:[t+r,n+2*r],scale:[1,-1]}),a=g(o[1]),s=m(o[1]),u={stroke:f,"stroke-opacity":h,"fill-opacity":a,fill:s},e.polyline(i,u).transform({translate:[t+r,n+2*r],scale:[-1,-1]}),e.polyline(i,u).transform({translate:[t+r,n],scale:[1,1]})}function O(e,t,n,r,o){var i=g(o),a=m(o),s=_(r),u={stroke:f,"stroke-opacity":h,"fill-opacity":i,fill:a};e.polyline(s,u).transform({translate:[t,n+r],scale:[1,-1]}),e.polyline(s,u).transform({translate:[t+2*r,n+r],scale:[-1,-1]}),e.polyline(s,u).transform({translate:[t,n+r],scale:[1,1]}),e.polyline(s,u).transform({translate:[t+2*r,n+r],scale:[-1,1]})}b.prototype.toSvg=function(){return this.svg.toString()},b.prototype.toString=function(){return this.toSvg()},b.prototype.toBase64=function(){var e=this.toSvg();return"undefined"!=typeof window&&"function"==typeof window.btoa?window.btoa(e):new Buffer(e).toString("base64")},b.prototype.toDataUri=function(){return"data:image/svg+xml;base64,"+this.toBase64()},b.prototype.toDataUrl=function(){return'url("'+this.toDataUri()+'")'},b.prototype.generateBackground=function(){var e,t,n,r;this.opts.color?n=o.hex2rgb(this.opts.color):(t=y(v(this.hash,14,3),0,4095,0,359),r=v(this.hash,17),(e=o.rgb2hsl(o.hex2rgb(this.opts.baseColor))).h=(360*e.h-t+360)%360/360,e.s=r%2==0?Math.min(1,(100*e.s+r)/100):Math.max(0,(100*e.s-r)/100),n=o.hsl2rgb(e)),this.color=o.rgb2hex(n),this.svg.rect(0,0,"100%","100%",{fill:o.rgb2rgbString(n)})},b.prototype.generatePattern=function(){var e=this.opts.generator;if(e){if(u.indexOf(e)<0)throw new Error("The generator "+e+" does not exist.")}else e=u[v(this.hash,20)];return this["geo"+e.slice(0,1).toUpperCase()+e.slice(1)]()},b.prototype.geoHexagons=function(){var e,t,n,r,o,i,a,s=y(v(this.hash,0),0,15,8,60),u=s*Math.sqrt(3),c=2*s,l=function(e){var t=e,n=t/2,r=Math.sin(60*Math.PI/180)*t;return[0,r,n,0,n+t,0,2*t,r,n+t,2*r,n,2*r,0,r].join(",")}(s);for(this.svg.setWidth(3*c+3*s),this.svg.setHeight(6*u),t=0,a=0;a<6;a++)for(i=0;i<6;i++)e=i%2==0?a*u:a*u+u/2,n=g(o=v(this.hash,t)),r={fill:m(o),"fill-opacity":n,stroke:f,"stroke-opacity":h},this.svg.polyline(l,r).transform({translate:[i*s*1.5-c/2,e-u/2]}),0===i&&this.svg.polyline(l,r).transform({translate:[6*s*1.5-c/2,e-u/2]}),0===a&&(e=i%2==0?6*u:6*u+u/2,this.svg.polyline(l,r).transform({translate:[i*s*1.5-c/2,e-u/2]})),0===i&&0===a&&this.svg.polyline(l,r).transform({translate:[6*s*1.5-c/2,5*u+u/2]}),t++},b.prototype.geoSineWaves=function(){var e,t,n,r,o,i,a=Math.floor(y(v(this.hash,0),0,15,100,400)),s=Math.floor(y(v(this.hash,1),0,15,30,100)),u=Math.floor(y(v(this.hash,2),0,15,3,30));for(this.svg.setWidth(a),this.svg.setHeight(36*u),e=0;e<36;e++)t=g(o=v(this.hash,e)),r={fill:"none",stroke:m(o),opacity:t,"stroke-width":u+"px"},n="M0 "+s+" C "+(i=a/4*.7)+" 0, "+(a/2-i)+" 0, "+a/2+" "+s+" S "+(a-i)+" "+2*s+", "+a+" "+s+" S "+(1.5*a-i)+" 0, "+1.5*a+", "+s,this.svg.path(n,r).transform({translate:[-a/4,u*e-1.5*s]}),this.svg.path(n,r).transform({translate:[-a/4,u*e-1.5*s+36*u]})},b.prototype.geoChevrons=function(){var e,t,n,r,o,i,a,s,u,c,l=y(v(this.hash,0),0,15,30,80),d=y(v(this.hash,0),0,15,30,80),p=[[0,0,(e=l)/2,(t=d)-(n=.66*t),e/2,t,0,n,0,0],[e/2,t-n,e,0,e,n,e/2,t,e/2,t-n]].map((function(e){return e.join(",")}));for(this.svg.setWidth(6*l),this.svg.setHeight(6*d*.66),o=0,c=0;c<6;c++)for(u=0;u<6;u++)i=g(s=v(this.hash,o)),r=m(s),a={stroke:f,"stroke-opacity":h,fill:r,"fill-opacity":i,"stroke-width":1},this.svg.group(a).transform({translate:[u*l,c*d*.66-d/2]}).polyline(p).end(),0===c&&this.svg.group(a).transform({translate:[u*l,6*d*.66-d/2]}).polyline(p).end(),o+=1},b.prototype.geoPlusSigns=function(){var e,t,n,r,o,i,a,s=y(v(this.hash,0),0,15,10,25),u=3*s,c=w(s);for(this.svg.setWidth(12*s),this.svg.setHeight(12*s),t=0,a=0;a<6;a++)for(i=0;i<6;i++)n=g(o=v(this.hash,t)),e=a%2==0?0:1,r={fill:m(o),stroke:f,"stroke-opacity":h,"fill-opacity":n},this.svg.group(r).transform({translate:[i*u-i*s+e*s-s,a*u-a*s-u/2]}).rect(c).end(),0===i&&this.svg.group(r).transform({translate:[4*u-i*s+e*s-s,a*u-a*s-u/2]}).rect(c).end(),0===a&&this.svg.group(r).transform({translate:[i*u-i*s+e*s-s,4*u-a*s-u/2]}).rect(c).end(),0===i&&0===a&&this.svg.group(r).transform({translate:[4*u-i*s+e*s-s,4*u-a*s-u/2]}).rect(c).end(),t++},b.prototype.geoXes=function(){var e,t,n,r,o,i,a,s=y(v(this.hash,0),0,15,10,25),u=w(s),c=3*s*.943;for(this.svg.setWidth(3*c),this.svg.setHeight(3*c),t=0,a=0;a<6;a++)for(i=0;i<6;i++)n=g(o=v(this.hash,t)),e=i%2==0?a*c-.5*c:a*c-.5*c+c/4,r={fill:m(o),opacity:n},this.svg.group(r).transform({translate:[i*c/2-c/2,e-a*c/2],rotate:[45,c/2,c/2]}).rect(u).end(),0===i&&this.svg.group(r).transform({translate:[6*c/2-c/2,e-a*c/2],rotate:[45,c/2,c/2]}).rect(u).end(),0===a&&(e=i%2==0?6*c-c/2:6*c-c/2+c/4,this.svg.group(r).transform({translate:[i*c/2-c/2,e-6*c/2],rotate:[45,c/2,c/2]}).rect(u).end()),5===a&&this.svg.group(r).transform({translate:[i*c/2-c/2,e-11*c/2],rotate:[45,c/2,c/2]}).rect(u).end(),0===i&&0===a&&this.svg.group(r).transform({translate:[6*c/2-c/2,e-6*c/2],rotate:[45,c/2,c/2]}).rect(u).end(),t++},b.prototype.geoOverlappingCircles=function(){var e,t,n,r,o,i,a=y(v(this.hash,0),0,15,25,200)/2;for(this.svg.setWidth(6*a),this.svg.setHeight(6*a),e=0,i=0;i<6;i++)for(o=0;o<6;o++)t=g(r=v(this.hash,e)),n={fill:m(r),opacity:t},this.svg.circle(o*a,i*a,a,n),0===o&&this.svg.circle(6*a,i*a,a,n),0===i&&this.svg.circle(o*a,6*a,a,n),0===o&&0===i&&this.svg.circle(6*a,6*a,a,n),e++},b.prototype.geoOctogons=function(){var e,t,n,r,o,i,a=y(v(this.hash,0),0,15,10,60),s=function(e){var t=.33*e;return[t,0,e-t,0,e,t,e,e-t,e-t,e,t,e,0,e-t,0,t,t,0].join(",")}(a);for(this.svg.setWidth(6*a),this.svg.setHeight(6*a),t=0,i=0;i<6;i++)for(o=0;o<6;o++)n=g(r=v(this.hash,t)),e=m(r),this.svg.polyline(s,{fill:e,"fill-opacity":n,stroke:f,"stroke-opacity":h}).transform({translate:[o*a,i*a]}),t+=1},b.prototype.geoSquares=function(){var e,t,n,r,o,i,a=y(v(this.hash,0),0,15,10,60);for(this.svg.setWidth(6*a),this.svg.setHeight(6*a),t=0,i=0;i<6;i++)for(o=0;o<6;o++)n=g(r=v(this.hash,t)),e=m(r),this.svg.rect(o*a,i*a,a,a,{fill:e,"fill-opacity":n,stroke:f,"stroke-opacity":h}),t+=1},b.prototype.geoConcentricCircles=function(){var e,t,n,r,o,i,a=y(v(this.hash,0),0,15,10,60),s=a/5;for(this.svg.setWidth(6*(a+s)),this.svg.setHeight(6*(a+s)),t=0,i=0;i<6;i++)for(o=0;o<6;o++)n=g(r=v(this.hash,t)),e=m(r),this.svg.circle(o*a+o*s+(a+s)/2,i*a+i*s+(a+s)/2,a/2,{fill:"none",stroke:e,opacity:n,"stroke-width":s+"px"}),n=g(r=v(this.hash,39-t)),e=m(r),this.svg.circle(o*a+o*s+(a+s)/2,i*a+i*s+(a+s)/2,a/4,{fill:e,"fill-opacity":n}),t+=1},b.prototype.geoOverlappingRings=function(){var e,t,n,r,o,i,a=y(v(this.hash,0),0,15,10,60),s=a/4;for(this.svg.setWidth(6*a),this.svg.setHeight(6*a),e=0,i=0;i<6;i++)for(o=0;o<6;o++)t=g(r=v(this.hash,e)),n={fill:"none",stroke:m(r),opacity:t,"stroke-width":s+"px"},this.svg.circle(o*a,i*a,a-s/2,n),0===o&&this.svg.circle(6*a,i*a,a-s/2,n),0===i&&this.svg.circle(o*a,6*a,a-s/2,n),0===o&&0===i&&this.svg.circle(6*a,6*a,a-s/2,n),e+=1},b.prototype.geoTriangles=function(){var e,t,n,r,o,i,a,s=y(v(this.hash,0),0,15,15,80),u=s/2*Math.sqrt(3),c=function(e,t){var n=e/2;return[n,0,e,t,0,t,n,0].join(",")}(s,u);for(this.svg.setWidth(3*s),this.svg.setHeight(6*u),e=0,a=0;a<6;a++)for(i=0;i<6;i++)t=g(o=v(this.hash,e)),r={fill:m(o),"fill-opacity":t,stroke:f,"stroke-opacity":h},n=a%2==0?i%2==0?180:0:i%2!=0?180:0,this.svg.polyline(c,r).transform({translate:[i*s*.5-s/2,u*a],rotate:[n,s/2,u/2]}),0===i&&this.svg.polyline(c,r).transform({translate:[6*s*.5-s/2,u*a],rotate:[n,s/2,u/2]}),e+=1},b.prototype.geoDiamonds=function(){var e,t,n,r,o,i,a,s,u,c=y(v(this.hash,0),0,15,10,50),l=y(v(this.hash,1),0,15,10,50),d=[(e=c)/2,0,e,(t=l)/2,e/2,t,0,t/2].join(",");for(this.svg.setWidth(6*c),this.svg.setHeight(3*l),r=0,u=0;u<6;u++)for(s=0;s<6;s++)o=g(a=v(this.hash,r)),i={fill:m(a),"fill-opacity":o,stroke:f,"stroke-opacity":h},n=u%2==0?0:c/2,this.svg.polyline(d,i).transform({translate:[s*c-c/2+n,l/2*u-l/2]}),0===s&&this.svg.polyline(d,i).transform({translate:[6*c-c/2+n,l/2*u-l/2]}),0===u&&this.svg.polyline(d,i).transform({translate:[s*c-c/2+n,l/2*6-l/2]}),0===s&&0===u&&this.svg.polyline(d,i).transform({translate:[6*c-c/2+n,l/2*6-l/2]}),r+=1},b.prototype.geoNestedSquares=function(){var e,t,n,r,o,i,a=y(v(this.hash,0),0,15,4,12),s=7*a;for(this.svg.setWidth(6*(s+a)+6*a),this.svg.setHeight(6*(s+a)+6*a),e=0,i=0;i<6;i++)for(o=0;o<6;o++)t=g(r=v(this.hash,e)),n={fill:"none",stroke:m(r),opacity:t,"stroke-width":a+"px"},this.svg.rect(o*s+o*a*2+a/2,i*s+i*a*2+a/2,s,s,n),t=g(r=v(this.hash,39-e)),n={fill:"none",stroke:m(r),opacity:t,"stroke-width":a+"px"},this.svg.rect(o*s+o*a*2+a/2+2*a,i*s+i*a*2+a/2+2*a,3*a,3*a,n),e+=1},b.prototype.geoMosaicSquares=function(){var e,t,n,r=y(v(this.hash,0),0,15,15,50);for(this.svg.setWidth(8*r),this.svg.setHeight(8*r),e=0,n=0;n<4;n++)for(t=0;t<4;t++)t%2==0?n%2==0?O(this.svg,t*r*2,n*r*2,r,v(this.hash,e)):S(this.svg,t*r*2,n*r*2,r,[v(this.hash,e),v(this.hash,e+1)]):n%2==0?S(this.svg,t*r*2,n*r*2,r,[v(this.hash,e),v(this.hash,e+1)]):O(this.svg,t*r*2,n*r*2,r,v(this.hash,e)),e+=1},b.prototype.geoPlaid=function(){var e,t,n,r,o,i,a=0,s=0;for(t=0;t<36;)a+=v(this.hash,t)+5,n=g(i=v(this.hash,t+1)),e=m(i),r=i+5,this.svg.rect(0,a,"100%",r,{opacity:n,fill:e}),a+=r,t+=2;for(t=0;t<36;)s+=v(this.hash,t)+5,n=g(i=v(this.hash,t+1)),e=m(i),o=i+5,this.svg.rect(s,0,o,"100%",{opacity:n,fill:e}),s+=o,t+=2;this.svg.setWidth(s),this.svg.setHeight(a)},b.prototype.geoTessellation=function(){var e,t,n,r,o,i=y(v(this.hash,0),0,15,5,40),a=i*Math.sqrt(3),s=2*i,u=i/2*Math.sqrt(3),c=function(e,t){return[0,0,t,e/2,0,e,0,0].join(",")}(i,u),l=3*i+2*u,d=2*a+2*i;for(this.svg.setWidth(l),this.svg.setHeight(d),t=0;t<20;t++)switch(n=g(o=v(this.hash,t)),e=m(o),r={stroke:f,"stroke-opacity":h,fill:e,"fill-opacity":n,"stroke-width":1},t){case 0:this.svg.rect(-i/2,-i/2,i,i,r),this.svg.rect(l-i/2,-i/2,i,i,r),this.svg.rect(-i/2,d-i/2,i,i,r),this.svg.rect(l-i/2,d-i/2,i,i,r);break;case 1:this.svg.rect(s/2+u,a/2,i,i,r);break;case 2:this.svg.rect(-i/2,d/2-i/2,i,i,r),this.svg.rect(l-i/2,d/2-i/2,i,i,r);break;case 3:this.svg.rect(s/2+u,1.5*a+i,i,i,r);break;case 4:this.svg.polyline(c,r).transform({translate:[i/2,-i/2],rotate:[0,i/2,u/2]}),this.svg.polyline(c,r).transform({translate:[i/2,d- -i/2],rotate:[0,i/2,u/2],scale:[1,-1]});break;case 5:this.svg.polyline(c,r).transform({translate:[l-i/2,-i/2],rotate:[0,i/2,u/2],scale:[-1,1]}),this.svg.polyline(c,r).transform({translate:[l-i/2,d+i/2],rotate:[0,i/2,u/2],scale:[-1,-1]});break;case 6:this.svg.polyline(c,r).transform({translate:[l/2+i/2,a/2]});break;case 7:this.svg.polyline(c,r).transform({translate:[l-l/2-i/2,a/2],scale:[-1,1]});break;case 8:this.svg.polyline(c,r).transform({translate:[l/2+i/2,d-a/2],scale:[1,-1]});break;case 9:this.svg.polyline(c,r).transform({translate:[l-l/2-i/2,d-a/2],scale:[-1,-1]});break;case 10:this.svg.polyline(c,r).transform({translate:[i/2,d/2-i/2]});break;case 11:this.svg.polyline(c,r).transform({translate:[l-i/2,d/2-i/2],scale:[-1,1]});break;case 12:this.svg.rect(0,0,i,i,r).transform({translate:[i/2,i/2],rotate:[-30,0,0]});break;case 13:this.svg.rect(0,0,i,i,r).transform({scale:[-1,1],translate:[i/2-l,i/2],rotate:[-30,0,0]});break;case 14:this.svg.rect(0,0,i,i,r).transform({translate:[i/2,d/2-i/2-i],rotate:[30,0,i]});break;case 15:this.svg.rect(0,0,i,i,r).transform({scale:[-1,1],translate:[i/2-l,d/2-i/2-i],rotate:[30,0,i]});break;case 16:this.svg.rect(0,0,i,i,r).transform({scale:[1,-1],translate:[i/2,d/2-d-i/2-i],rotate:[30,0,i]});break;case 17:this.svg.rect(0,0,i,i,r).transform({scale:[-1,-1],translate:[i/2-l,d/2-d-i/2-i],rotate:[30,0,i]});break;case 18:this.svg.rect(0,0,i,i,r).transform({scale:[1,-1],translate:[i/2,i/2-d],rotate:[-30,0,0]});break;case 19:this.svg.rect(0,0,i,i,r).transform({scale:[-1,-1],translate:[i/2-l,i/2-d],rotate:[-30,0,0]})}}},451:e=>{"use strict";function t(){var e=function(){for(var e=16;e<80;e++){var t=u[e-3]^u[e-8]^u[e-14]^u[e-16];u[e]=t<<1|t>>>31}var n,l,f=r,h=o,d=i,p=a,v=s;for(e=0;e<80;e++){e<20?(n=p^h&(d^p),l=1518500249):e<40?(n=h^d^p,l=1859775393):e<60?(n=h&d|p&(h|d),l=2400959708):(n=h^d^p,l=3395469782);var y=(f<<5|f>>>27)+n+v+l+(0|u[e]);v=p,p=d,d=h<<30|h>>>2,h=f,f=y}for(r=r+f|0,o=o+h|0,i=i+d|0,a=a+p|0,s=s+v|0,c=0,e=0;e<16;e++)u[e]=0},t=function(t){u[c]|=(255&t)<<l,l?l-=8:(c++,l=24),16===c&&e()},n=function(e){for(var t="",n=28;n>=0;n-=4)t+=(e>>n&15).toString(16);return t},r=1732584193,o=4023233417,i=2562383102,a=271733878,s=3285377520,u=new Uint32Array(80),c=0,l=24,f=0;return{update:function(e){if("string"==typeof e)return function(e){var n=e.length;f+=8*n;for(var r=0;r<n;r++)t(e.charCodeAt(r))}(e);var n=e.length;f+=8*n;for(var r=0;r<n;r++)t(e[r])},digest:function(){t(128),(c>14||14===c&&l<24)&&e(),c=14,l=24,t(0),t(0),t(f>0xffffffffff?f/1099511627776:0),t(f>4294967295?f/4294967296:0);for(var u=24;u>=0;u-=8)t(f>>u);return n(r)+n(o)+n(i)+n(a)+n(s)}}}e.exports=function(e){if(void 0===e)return t();var n=t();return n.update(e),n.digest()}},138:(e,t,n)=>{"use strict";var r=n(495),o=n(97);function i(){return this.width=100,this.height=100,this.svg=o("svg"),this.context=[],this.setAttributes(this.svg,{xmlns:"http://www.w3.org/2000/svg",width:this.width,height:this.height}),this}e.exports=i,i.prototype.currentContext=function(){return this.context[this.context.length-1]||this.svg},i.prototype.end=function(){return this.context.pop(),this},i.prototype.currentNode=function(){var e=this.currentContext();return e.lastChild||e},i.prototype.transform=function(e){return this.currentNode().setAttribute("transform",Object.keys(e).map((function(t){return t+"("+e[t].join(",")+")"})).join(" ")),this},i.prototype.setAttributes=function(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))},i.prototype.setWidth=function(e){this.svg.setAttribute("width",Math.floor(e))},i.prototype.setHeight=function(e){this.svg.setAttribute("height",Math.floor(e))},i.prototype.toString=function(){return this.svg.toString()},i.prototype.rect=function(e,t,n,i,a){var s=this;if(Array.isArray(e))return e.forEach((function(e){s.rect.apply(s,e.concat(a))})),this;var u=o("rect");return this.currentContext().appendChild(u),this.setAttributes(u,r({x:e,y:t,width:n,height:i},a)),this},i.prototype.circle=function(e,t,n,i){var a=o("circle");return this.currentContext().appendChild(a),this.setAttributes(a,r({cx:e,cy:t,r:n},i)),this},i.prototype.path=function(e,t){var n=o("path");return this.currentContext().appendChild(n),this.setAttributes(n,r({d:e},t)),this},i.prototype.polyline=function(e,t){var n=this;if(Array.isArray(e))return e.forEach((function(e){n.polyline(e,t)})),this;var i=o("polyline");return this.currentContext().appendChild(i),this.setAttributes(i,r({points:e},t)),this},i.prototype.group=function(e){var t=o("g");return this.currentContext().appendChild(t),this.context.push(t),this.setAttributes(t,r({},e)),this}},97:e=>{"use strict";var t=e.exports=function(e){return this,(null!=(n=t)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](this):this instanceof n)?(this.tagName=e,this.attributes=Object.create(null),this.children=[],this.lastChild=null,this):new t(e);var n};t.prototype.appendChild=function(e){return this.children.push(e),this.lastChild=e,this},t.prototype.setAttribute=function(e,t){return this.attributes[e]=t,this},t.prototype.toString=function(){var e=this;return["<",e.tagName,Object.keys(e.attributes).map((function(t){return[" ",t,'="',e.attributes[t],'"'].join("")})).join(""),">",e.children.map((function(e){return e.toString()})).join(""),"</",e.tagName,">"].join("")}},495:e=>{var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString;function r(e){if(!e||"[object Object]"!==n.call(e)||e.nodeType||e.setInterval)return!1;var r,o=t.call(e,"constructor"),i=t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!o&&!i)return!1;for(r in e);return void 0===r||t.call(e,r)}e.exports=function e(){var t,n,o,i,a,s,u=arguments[0]||{},c=1,l=arguments.length,f=!1;for("boolean"==typeof u&&(f=u,u=arguments[1]||{},c=2),"object"!=typeof u&&"function"!=typeof u&&(u={});c<l;c++)if(null!=(t=arguments[c]))for(n in t)o=u[n],u!==(i=t[n])&&(f&&i&&(r(i)||(a=Array.isArray(i)))?(a?(a=!1,s=o&&Array.isArray(o)?o:[]):s=o&&r(o)?o:{},u[n]=e(f,s,i)):void 0!==i&&(u[n]=i));return u}},279:(e,t,n)=>{"use strict";var r=n(493);r.createRoot,r.hydrateRoot},978:(e,t,n)=>{"use strict";var r=n(954),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,a=r.useEffect,s=r.useLayoutEffect,u=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),o=r[0].inst,l=r[1];return s((function(){o.value=n,o.getSnapshot=t,c(o)&&l({inst:o})}),[e,n,t]),a((function(){return c(o)&&l({inst:o}),e((function(){c(o)&&l({inst:o})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},921:(e,t,n)=>{"use strict";e.exports=n(978)},641:(e,t,n)=>{function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function a(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}System.register(["@openmrs/esm-config","@openmrs/esm-navigation","@openmrs/esm-error-handling","@openmrs/esm-offline"],(function(e,t){var s={},u={},c={},l={};return{setters:[function(e){s.Type=e.Type,s.defineConfigSchema=e.defineConfigSchema,s.getConfig=e.getConfig,s.validators=e.validators},function(e){u.navigate=e.navigate},function(e){c.reportError=e.reportError},function(e){l.getSynchronizationItems=e.getSynchronizationItems}],execute:function(){e(function(){var e={385:function(){System.register([],(function(e,t){return{execute:function(){e(function(){"use strict";var e=function(e,t){var n=u[e];if(n)return n.active?console.error("Cannot override an existing store. Make sure that stores are only created once."):n.value.setState(t,!0),n.active=!0,n.value;var r=s()((function(){return t}));return u[e]={value:r,active:!0},r},t=function(e,t){var n=u[e];return n?(n.active?console.error("Cannot override an existing store. Make sure that stores are only created once."):n.value=t,n.active=!0,n.value):(u[e]={value:t,active:!0},t)},n=function(e,t){var n=u[e];if(!n){var r=s()((function(){return null!=t?t:{}}));return u[e]={value:r,active:!1},r}return n.value},r=function(e,t,n){var r=t(e.getState());return e.subscribe((function(e){var o=t(e);o!==r&&(r=o,n(o))}))},o={d:function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},i={};o.r(i),o.d(i,{createGlobalStore:function(){return e},getGlobalStore:function(){return n},registerGlobalStore:function(){return t},subscribeTo:function(){return r}});var a=function(e){var t,n=new Set,r=function(e,r){var o="function"==typeof e?e(t):e;if(!Object.is(o,t)){var i=t;t=(null!=r?r:"object"!=typeof o)?o:Object.assign({},t,o),n.forEach((function(e){return e(t,i)}))}},o=function(){return t},i={setState:r,getState:o,subscribe:function(e){return n.add(e),function(){return n.delete(e)}},destroy:function(){console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(r,o,i),i},s=function(e){return e?a(e):a},u={};return setTimeout((function(){"development"===window.spaEnv&&(window.stores=u)}),1e3),i}())}}}))},824:function(e){"use strict";e.exports=s},254:function(e){"use strict";e.exports=c},513:function(e){"use strict";e.exports=u},738:function(e){"use strict";e.exports=l}},t={};function f(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,f),o.exports}f.d=function(e,t){for(var n in t)f.o(t,n)&&!f.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},f.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},f.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var h={};return function(){"use strict";var e=function(e,t){function n(){this.constructor=e}ut(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},t=function(e){return"function"==typeof e},s=function(e){setTimeout((function(){throw e}),0)},u=function(e){return null!==e&&"object"==typeof e},c=function(e){return e.reduce((function(e,t){return e.concat(i(t,pt)?t.errors:t)}),[])},l=function(e){return e},d=function(e){if(e||(e=lt.Promise||Promise),!e)throw new Error("no Promise impl found");return e},p=function(e,t,n){var r=g(e,t,n);Ht.length?Ht.forEach((function(e){return e(r)})):setTimeout((function(){throw r}))},v=function(e){if("function"!=typeof e)throw Error(m(28,!1));Ht.push(e)},y=function(e){if("function"!=typeof e)throw Error(m(29,!1));var t=!1;return Ht=Ht.filter((function(n){var r=n===e;return t=t||r,!r})),t},m=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return"single-spa minified message #".concat(e,": ").concat(t?t+" ":"","See https://single-spa.js.org/error/?code=").concat(e).concat(r.length?"&arg=".concat(r.join("&arg=")):"")},g=function(e,t,n){var r,o="".concat(O(t)," '").concat(_(t),"' died in status ").concat(t.status,": ");if(i(e,Error)){try{e.message=o+e.message}catch(e){}r=e}else{console.warn(m(30,!1,t.status,_(t)));try{r=Error(o+JSON.stringify(e))}catch(t){r=e}}return r.appOrParcelName=_(t),t.status=n,r},b=function(e){return e.status===Jt},w=function(e){try{return e.activeWhen(window.location)}catch(t){return p(t,e,nn),!1}},_=function(e){return e.name},S=function(e){return Boolean(e.unmountThisParcel)},O=function(e){return S(e)?"parcel":"application"},E=function(){for(var e=arguments.length-1;e>0;e--)for(var t in arguments[e])"__proto__"!==t&&(arguments[e-1][t]=arguments[e][t]);return arguments[0]},x=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null},P=function(e){return e&&("function"==typeof e||(t=e,Array.isArray(t)&&!x(t,(function(e){return"function"!=typeof e}))));var t},k=function(e,t){var n=e[t]||[];0===(n=Array.isArray(n)?n:[n]).length&&(n=[function(){return Promise.resolve()}]);var r=O(e),o=_(e);return function(e){return n.reduce((function(n,i,a){return n.then((function(){var n=i(e);return j(n)?n:Promise.reject(m(15,!1,r,o,t,a))}))}),Promise.resolve())}},j=function(e){return e&&"function"==typeof e.then&&"function"==typeof e.catch},A=function(e,t){return Promise.resolve().then((function(){return e.status!==Gt?e:(e.status=$t,e.bootstrap?K(e,"bootstrap").then(n).catch((function(n){if(t)throw g(n,e,nn);return p(n,e,nn),e})):Promise.resolve().then(n))}));function n(){return e.status=Yt,e}},T=function(e,t){return Promise.resolve().then((function(){if(e.status!==Jt)return e;e.status=Zt;var n=Object.keys(e.parcels).map((function(t){return e.parcels[t].unmountThisParcel()}));return Promise.all(n).then(r,(function(n){return r().then((function(){var r=Error(n.message);if(t)throw g(r,e,nn);p(r,e,nn)}))})).then((function(){return e}));function r(){return K(e,"unmount").then((function(){e.status=Yt}),(function(n){if(t)throw g(n,e,nn);p(n,e,nn)}))}}))},M=function(e,t){return Promise.resolve().then((function(){return e.status!==Yt?e:(on||(window.dispatchEvent(new Ft("single-spa:before-first-mount")),on=!0),e.status=Qt,K(e,"mount").then((function(){return e.status=Jt,an||(window.dispatchEvent(new Ft("single-spa:first-mount")),an=!0),e})).catch((function(n){return e.status=Jt,T(e,!0).then(r,r);function r(){if(t)throw g(n,e,nn);return p(n,e,nn),e}})))}))},C=function(){return D.apply(un,arguments)},D=function(e,t){var n=this;if(!e||"object"!=typeof e&&"function"!=typeof e)throw Error(m(2,!1));if(e.name&&"string"!=typeof e.name)throw Error(m(3,!1,a(e.name)));var r=sn++,o=e.name||"parcel-".concat(r);if("object"!=typeof t)throw Error(m(4,!1,o,void 0===t?"undefined":a(t)));if(!t.domElement)throw Error(m(5,!1,o));var i,s="function"==typeof e,u=s?e:function(){return Promise.resolve(e)},c={id:r,parcels:{},status:s?Wt:Gt,customProps:t,parentName:_(n),unmountThisParcel:function(){return p.then((function(){if(c.status!==Jt)throw Error(m(6,!1,o,c.status));return T(c,!0)})).then((function(e){return c.parentName&&delete n.parcels[c.id],e})).then((function(e){return f(e),e})).catch((function(e){throw c.status=nn,h(e),e}))}};n.parcels[r]=c;var l=u();if(!l||"function"!=typeof l.then)throw Error(m(7,!1));l=l.then((function(e){if(!e)throw Error(m(8,!1));if(o=e.name||"parcel-".concat(r),Object.prototype.hasOwnProperty.call(e,"bootstrap")&&!P(e.bootstrap))throw Error(m(9,!1,o));if(!P(e.mount))throw Error(m(10,!1,o));if(!P(e.unmount))throw Error(m(11,!1,o));if(e.update&&!P(e.update))throw Error(m(12,!1,o));var t=k(e,"bootstrap"),n=k(e,"mount"),a=k(e,"unmount");c.status=Gt,c.name=o,c.bootstrap=t,c.mount=n,c.unmount=a,c.timeouts=U(e.timeouts),e.update&&(c.update=k(e,"update"),i.update=function(e){return c.customProps=e,I((t=c,Promise.resolve().then((function(){if(t.status!==Jt)throw Error(m(32,!1,_(t)));return t.status=Xt,K(t,"update").then((function(){return t.status=Jt,t})).catch((function(e){throw g(e,t,nn)}))}))));var t})}));var f,h,d=l.then((function(){return A(c,!0)})),p=d.then((function(){return M(c,!0)})),v=new Promise((function(e,t){f=e,h=t}));return i={mount:function(){return I(Promise.resolve().then((function(){if(c.status!==Yt)throw Error(m(13,!1,o,c.status));return n.parcels[r]=c,M(c)})))},unmount:function(){return I(c.unmountThisParcel())},getStatus:function(){return c.status},loadPromise:I(l),bootstrapPromise:I(d),mountPromise:I(p),unmountPromise:I(v)}},I=function(e){return e.then((function(){return null}))},R=function(e){var t=_(e),n="function"==typeof e.customProps?e.customProps(t,window.location):e.customProps;("object"!=typeof n||null===n||Array.isArray(n))&&(n={},console.warn(m(40,!1),t,n));var r=E({},n,{name:t,mountParcel:D.bind(e),singleSpa:Ut});return S(e)&&(r.unmountSelf=e.unmountThisParcel),r},N=function(e,t,n){if("number"!=typeof e||e<=0)throw Error(m(16,!1));cn.bootstrap={millis:e,dieOnTimeout:t,warningMillis:n||1e3}},B=function(e,t,n){if("number"!=typeof e||e<=0)throw Error(m(17,!1));cn.mount={millis:e,dieOnTimeout:t,warningMillis:n||1e3}},z=function(e,t,n){if("number"!=typeof e||e<=0)throw Error(m(18,!1));cn.unmount={millis:e,dieOnTimeout:t,warningMillis:n||1e3}},L=function(e,t,n){if("number"!=typeof e||e<=0)throw Error(m(19,!1));cn.unload={millis:e,dieOnTimeout:t,warningMillis:n||1e3}},K=function(e,t){var n=e.timeouts[t],r=n.warningMillis,o=O(e);return new Promise((function(i,a){var s=!1,u=!1;e[t](R(e)).then((function(e){s=!0,i(e)})).catch((function(e){s=!0,a(e)})),setTimeout((function(){return l(1)}),r),setTimeout((function(){return l(!0)}),n.millis);var c=m(31,!1,t,o,_(e),n.millis);function l(e){if(!s)if(!0===e)u=!0,n.dieOnTimeout?a(Error(c)):console.error(c);else if(!u){var t=e,o=t*r;console.warn(c),o+r<n.millis&&setTimeout((function(){return l(t+1)}),r)}}}))},U=function(e){var t={};for(var n in cn)t[n]=E({},cn[n],e&&e[n]||{});return t},V=function(e){return Promise.resolve().then((function(){return e.loadPromise?e.loadPromise:e.status!==qt&&e.status!==tn?e:(e.status=Wt,e.loadPromise=Promise.resolve().then((function(){var r=e.loadApp(R(e));if(!j(r))throw n=!0,Error(m(33,!1,_(e)));return r.then((function(n){var r;e.loadErrorTime=null,"object"!=typeof(t=n)&&(r=34),Object.prototype.hasOwnProperty.call(t,"bootstrap")&&!P(t.bootstrap)&&(r=35),P(t.mount)||(r=36),P(t.unmount)||(r=37);var o=O(t);if(r){var i;try{i=JSON.stringify(t)}catch(e){}return console.error(m(r,!1,o,_(e),i),t),p(void 0,e,nn),e}return t.devtools&&t.devtools.overlays&&(e.devtools.overlays=E({},e.devtools.overlays,t.devtools.overlays)),e.status=Gt,e.bootstrap=k(t,"bootstrap"),e.mount=k(t,"mount"),e.unmount=k(t,"unmount"),e.unload=k(t,"unload"),e.timeouts=U(t.timeouts),delete e.loadPromise,e}))})).catch((function(t){var r;return delete e.loadPromise,n?r=nn:(r=tn,e.loadErrorTime=(new Date).getTime()),p(t,e,r),e})));var t,n}))},F=function(e){var t;if("string"==typeof e)t=e;else if(this&&this.href)t=this.href;else{if(!(e&&e.currentTarget&&e.currentTarget.href&&e.preventDefault))throw Error(m(14,!1));t=e.currentTarget.href,e.preventDefault()}var n=$(window.location.href),r=$(t);0===t.indexOf("#")?window.location.hash=r.hash:n.host!==r.host&&r.host?window.location.href=t:r.pathname===n.pathname&&r.search===n.search?window.location.hash=r.hash:window.history.pushState(null,null,t)},H=function(e){var t=this;if(e){var n=e[0].type;hn.indexOf(n)>=0&&fn[n].forEach((function(n){try{n.apply(t,e)}catch(e){setTimeout((function(){throw e}))}}))}},q=function(){Sn([],arguments)},W=function(e,t){return function(){var n=window.location.href,r=e.apply(this,arguments),o=window.location.href;return Kt&&n===o||window.dispatchEvent(function(e,t){var n;try{n=new PopStateEvent("popstate",{state:e})}catch(t){(n=document.createEvent("PopStateEvent")).initPopStateEvent("popstate",!1,!1,e)}return n.singleSpa=!0,n.singleSpaTrigger=t,n}(window.history.state,t)),r}},G=function(e){if(pn)throw Error(m(43,!1));Kt=!e||!e.hasOwnProperty("urlRerouteOnly")||e.urlRerouteOnly,pn=!0,dn=window.history.replaceState,window.addEventListener("hashchange",q),window.addEventListener("popstate",q);var t=window.addEventListener,n=window.removeEventListener;window.addEventListener=function(e,n){if(!("function"==typeof n&&hn.indexOf(e)>=0)||x(fn[e],(function(e){return e===n})))return t.apply(this,arguments);fn[e].push(n)},window.removeEventListener=function(e,t){if(!("function"==typeof t&&hn.indexOf(e)>=0))return n.apply(this,arguments);fn[e]=fn[e].filter((function(e){return e!==t}))},window.history.pushState=W(window.history.pushState,"pushState"),window.history.replaceState=W(dn,"replaceState")},$=function(e){var t=document.createElement("a");return t.href=e,t},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.jQuery;if(e||window.$&&window.$.fn&&window.$.fn.jquery&&(e=window.$),e&&!vn){var t=e.fn.on,n=e.fn.off;e.fn.on=function(e,n){return Q.call(this,t,window.addEventListener,e,n,arguments)},e.fn.off=function(e,t){return Q.call(this,n,window.removeEventListener,e,t,arguments)},vn=!0}},Q=function(e,t,n,r,o){return"string"!=typeof n?e.apply(this,o):(n.split(/\s+/).forEach((function(e){hn.indexOf(e)>=0&&(t(e,r),n=n.replace(e,""))})),""===n.trim()?this:e.apply(this,o))},J=function(e){return Promise.resolve().then((function(){var t=yn[_(e)];if(!t)return e;if(e.status===qt)return X(e,t),e;if(e.status===en)return t.promise.then((function(){return e}));if(e.status!==Yt&&e.status!==tn)return e;var n=e.status===tn?Promise.resolve():K(e,"unload");return e.status=en,n.then((function(){return X(e,t),e})).catch((function(n){return function(e,t,n){delete yn[_(e)],delete e.bootstrap,delete e.mount,delete e.unmount,delete e.unload,p(n,e,nn),t.reject(n)}(e,t,n),e}))}))},X=function(e,t){delete yn[_(e)],delete e.bootstrap,delete e.mount,delete e.unmount,delete e.unload,e.status=qt,t.resolve()},Z=function(e,t,n,r){yn[_(e)]={app:e,resolve:n,reject:r},Object.defineProperty(yn[_(e)],"promise",{get:t})},ee=function(e){return yn[e]},te=function(){return mn.filter(b).map(_)},ne=function(){return mn.map(_)},re=function(e){var t=x(mn,(function(t){return _(t)===e}));return t?t.status:null},oe=function(e,t,n,r){var o=function(e,t,n,r){var o,i={name:null,loadApp:null,activeWhen:null,customProps:null};return"object"==typeof e?(function(e){if(Array.isArray(e)||null===e)throw Error(m(39,!1));var t=["name","app","activeWhen","customProps"],n=Object.keys(e).reduce((function(e,n){return t.indexOf(n)>=0?e:e.concat(n)}),[]);if(0!==n.length)throw Error(m(38,!1,t.join(", "),n.join(", ")));if("string"!=typeof e.name||0===e.name.length)throw Error(m(20,!1));if("object"!=typeof e.app&&"function"!=typeof e.app)throw Error(m(20,!1));var r=function(e){return"string"==typeof e||"function"==typeof e};if(!(r(e.activeWhen)||Array.isArray(e.activeWhen)&&e.activeWhen.every(r)))throw Error(m(24,!1));if(!ce(e.customProps))throw Error(m(22,!1))}(e),i.name=e.name,i.loadApp=e.app,i.activeWhen=e.activeWhen,i.customProps=e.customProps):(function(e,t,n,r){if("string"!=typeof e||0===e.length)throw Error(m(20,!1));if(!t)throw Error(m(23,!1));if("function"!=typeof n)throw Error(m(24,!1));if(!ce(r))throw Error(m(22,!1))}(e,t,n,r),i.name=e,i.loadApp=t,i.activeWhen=n,i.customProps=r),i.loadApp="function"!=typeof(o=i.loadApp)?function(){return Promise.resolve(o)}:o,i.customProps=function(e){return e||{}}(i.customProps),i.activeWhen=function(e){var t=Array.isArray(e)?e:[e];return t=t.map((function(e){return"function"==typeof e?e:le(e)})),function(e){return t.some((function(t){return t(e)}))}}(i.activeWhen),i}(e,t,n,r);if(pe()||gn||(gn=!0,setTimeout((function(){pe()||console.warn(m(1,!1))}),5e3)),-1!==ne().indexOf(o.name))throw Error(m(21,!1,o.name));mn.push(E({loadErrorTime:null,status:qt,parcels:{},devtools:{overlays:{options:{},selectors:[]}}},o)),ln&&(Y(),Sn())},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location;return mn.filter((function(t){return t.activeWhen(e)})).map(_)},ae=function(e){if(0===mn.filter((function(t){return _(t)===e})).length)throw Error(m(25,!1,e));return(ln?se(e,{waitForUnmount:!1}):Promise.resolve()).then((function(){var t=mn.map(_).indexOf(e);mn.splice(t,1)}))},se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{waitForUnmount:!1};if("string"!=typeof e)throw Error(m(26,!1));var n=x(mn,(function(t){return _(t)===e}));if(!n)throw Error(m(27,!1,e));var r,o=ee(_(n));if(t&&t.waitForUnmount){if(o)return o.promise;var i=new Promise((function(e,t){Z(n,(function(){return i}),e,t)}));return i}return o?(r=o.promise,ue(n,o.resolve,o.reject)):r=new Promise((function(e,t){Z(n,(function(){return r}),e,t),ue(n,e,t)})),r},ue=function(e,t,n){Promise.resolve().then((function(){if(x(ie(),(function(t){return t===_(e)})))return fe()})).then((function(){return T(e).then(J).then((function(){t(),setTimeout((function(){Sn()}))}))})).catch(n)},ce=function(e){return!e||"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},le=function(e,t){var n=function(e,t){var n=0,r=!1,o="^";"/"!==e[0]&&(e="/"+e);for(var i=0;i<e.length;i++){var a=e[i];(!r&&":"===a||r&&"/"===a)&&s(i)}return s(e.length),new RegExp(o,"i");function s(i){var a=e.slice(n,i).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");if(o+=r?"[^/]+/?":a,i===e.length)if(r)t&&(o+="$");else{var s=t?"":".*";o="/"===o.charAt(o.length-1)?"".concat(o).concat(s,"$"):"".concat(o,"(/").concat(s,")?(#.*)?$")}r=!r,n=i}}(e,t);return function(e){var t=e.origin;t||(t="".concat(e.protocol,"//").concat(e.host));var r=e.href.replace(t,"").replace(e.search,"").split("?")[0];return n.test(r)}},fe=function(){return Sn()},he=function(e,t){return w(e)?A(e).then((function(e){return t.then((function(){return w(e)?M(e):e}))})):t.then((function(){return e}))},de=function(e){On=!0,ln&&(G(e),Sn())},pe=function(){return On},ve=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},ye=function(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)},me=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},ge=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},be=function(e){return e&&e.startsWith("http")?e:("/"!==e[0]&&(e="/"+e),window.openmrsBase+e)},we=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof e)throw Error("The first argument to @openmrs/api's openmrsFetch function must be a url string");if("object"!=typeof t)throw Error("The second argument to @openmrs/api's openmrsFetch function must be a plain object.");if(!window.openmrsBase)throw Error("@openmrs/api is running in a browser that doesn't have window.openmrsBase, which is provided by openmrs-module-spa's HTML file.");var n=be(e);if(t.headers||(t.headers={}),Nt(t.body)&&(t.body=JSON.stringify(t.body)),void 0===t.headers.Accept&&(t.headers.Accept="application/json"),null===t.headers.Accept&&delete t.headers.Accept,e.startsWith(Tn)&&void 0===t.headers["Disable-WWW-Authenticate"]&&(t.headers["Disable-WWW-Authenticate"]="true"),e.startsWith(Mn)){var r=new URL(n,window.location.toString());r.searchParams.has("_summary")||(r.searchParams.set("_summary","data"),n=r.toString())}var o,i,a=Error();return window.fetch(n,t).then((o=function(e){var t,r;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(o){switch(o.label){case 0:return(t=e).ok?204===t.status?(t.data=null,[2,t]):[2,t.clone().text().then((function(e){try{e&&(t.data=JSON.parse(e))}catch(e){}return t}))]:[3,1];case 1:return[4,(0,Bt.getConfig)("@openmrs/esm-api")];case 2:return r=o.sent().redirectAuthFailure,n===be(Cn)&&403===t.status||r.enabled&&r.errors.includes(t.status)?(sessionStorage.removeItem(xn),(0,zt.navigate)({to:r.url}),[2,r.resolvePromise?Promise.resolve():new Promise((function(){}))]):[2,t.clone().text().then((function(e){var r=e;try{r=JSON.parse(e)}catch(e){}throw new Dn(n,t,r,a)}),(function(e){throw new Dn(n,t,null,a)}))];case 3:return[2]}}))},i=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){ye(i,n,r,a,s,"next",e)}function s(e){ye(i,n,r,a,s,"throw",e)}a(void 0)}))},function(e){return i.apply(this,arguments)}))},_e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!=typeof t)throw Error("The second argument to openmrsObservableFetch must be either omitted or an object");var n=new AbortController;return t.signal=n.signal,new wt((function(r){var o=!1;return we(e,t).then((function(e){o=!0,r.next(e),r.complete()}),(function(e){o=!0,r.error(e)})),function(){o||n.abort()}}))},Se=function(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)},Oe=function(e,t){return we("".concat(In,"/").concat(e),{signal:t.signal})},Ee=function(e,t,n){return we("".concat(In,"?patient=").concat(e,"&includeEncounterless=").concat(t),{signal:n.signal})},xe=function(e,t){return Rn.apply(this,arguments)},Pe=function(e,t){return we("".concat(In,"/").concat(e),{method:"DELETE",signal:t.signal})},ke=function(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)},je=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ke(i,r,o,a,s,"next",e)}function s(e){ke(i,r,o,a,s,"throw",e)}a(void 0)}))}},Ae=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeAuthStatus:!0};return(Ln<Date.now()-6e4||!zn.getState().loaded)&&De(),new wt((function(t){var n=function(n){var r;n.loaded&&(e.includeAuthStatus?t.next(n.session):t.next(null===(r=n.session)||void 0===r?void 0:r.user))};return n(zn.getState()),zn.subscribe(n)}))},Me=function(){return(Ln<Date.now()-6e4||!zn.getState().loaded)&&De(),zn},Ce=function(e){var t,n,r,o=null!==(r=null==e||null===(t=e.user)||void 0===t||null===(n=t.userProperties)||void 0===n?void 0:n.defaultLocale)&&void 0!==r?r:e.locale,i=document.documentElement.getAttribute("lang");(function(e){if(void 0===e||"string"!=typeof e)return!1;try{new Intl.Locale(e)}catch(e){return!1}return!0})(o)&&o!==i&&document.documentElement.setAttribute("lang",o)},De=function(e,t){Ln=Date.now();var n={};return e&&t&&(n.Authorization="Basic ".concat(window.btoa("".concat(e,":").concat(t)))),Ke(we(Cn,{headers:n}))},Ie=function(){zn.setState({loaded:!0,session:{authenticated:!1,sessionId:""}})},Re=function(e,t){return void 0===t?Boolean(e):!Boolean(e)||function(e,t){return"string"==typeof e?!Bn(t.privileges.find((function(t){return e===t.display}))):Array.isArray(e)?e.every((function(e){return!Bn(t.privileges.find((function(t){return e===t.display})))})):(Bn(e)||console.error('Could not understand privileges "'.concat(e,'"')),!0)}(e,t)||function(e){return!Bn(e.roles.find((function(e){return"System Developer"===e.display})))}(t)},Ne=function(){var e,t;return new Promise((function(n){var r=function(r){r.loaded&&r.session.user&&(e=r.session.user,n(r.session.user),t&&t())};r(zn.getState()),e||(t=zn.subscribe(r))}))},Be=function(){return new Promise((function(e,t){Te().subscribe((function(t){e(t.sessionLocation)}),t).unsubscribe()}))},ze=function(e,t){return Kn.apply(this,arguments)},Le=function(e,t,n){return Un.apply(this,arguments)},Ke=function(e){return new Promise((function(t,n){e.then((function(e){var r;"object"==typeof(null==e?void 0:e.data)?(r={loaded:!0,session:e.data},zn.setState(r),t(r)):(r={loaded:!1,session:null},zn.setState(r),n(r))})).catch((function(e){(0,Nn.reportError)("Failed to fetch new session information: ".concat(e));var t={loaded:!1,session:null};zn.setState(t),n(t)}))}))},Ue=function(){(0,Bt.defineConfigSchema)("@openmrs/esm-api",{redirectAuthFailure:{enabled:{_type:Bt.Type.Boolean,_default:!0,_description:"Whether to redirect logged-out users to `redirectAuthFailure.url`"},url:{_type:Bt.Type.String,_default:"${openmrsSpaBase}/login",_validators:[Bt.validators.isUrl]},errors:{_type:Bt.Type.Array,_default:[401],_elements:{_type:Bt.Type.Number,_validators:[Bt.validators.inRange(100,600)]},_description:"The HTTP error codes for which users will be redirected"},resolvePromise:{_type:Bt.Type.Boolean,_default:!1,_description:"Changes how requests that fail authentication are handled. Try messing with this if redirects to the login page aren't working correctly."}}}),De()},Ve=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},Fe=function(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)},He=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Fe(i,r,o,a,s,"next",e)}function s(e){Fe(i,r,o,a,s,"throw",e)}a(void 0)}))}},qe=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},We=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ge=function(e,t){return Fn.apply(this,arguments)},$e=function(e){return Hn.apply(this,arguments)},Ye=function(e){return function(t){return 0===e?Xn:t.lift(new Zn(e))}},Qe=function(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new tr(e,t))}},Je=function(){return(0,Lt.getGlobalStore)("visit",or)},Xe=function(e,t){Je().setState({patientUuid:e,manuallySetVisitUuid:t})},Ze=function(e,t,n){var r=null!=n?n:rr;return _e("".concat(Tn,"/visit?patient=").concat(e,"&v=").concat(r),{signal:t.signal,method:"GET",headers:{"Content-type":"application/json"}}).pipe(Ye(1)).pipe(Qe((function(e){return e})))},et=function(e,t){return _e("".concat(Tn,"/visit"),{signal:t.signal,method:"POST",headers:{"Content-type":"application/json"},body:e})},tt=function(e,t,n){return _e("".concat(Tn,"/visit/").concat(e),{signal:n.signal,method:"POST",headers:{"Content-type":"application/json"},body:t})},nt=function(e){return{uuid:e.uuid,display:e.display,name:e.name}},rt=function(){return _e("".concat(Tn,"/visittype")).pipe(Qe((function(e){return e.data.results.map(nt)}))).pipe(Ye(1))},ot=function(e){return{uuid:e.uuid,display:e.display}},it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return _e("".concat(Tn,"/location")+(e?"?tag="+e:"")).pipe(Qe((function(e){return e.data.results.map(ot)}))).pipe(Ye(1))};f.r(h),f.d(h,{OpenmrsFetchError:function(){return Dn},VisitMode:function(){return ir},VisitStatus:function(){return ar},attachmentUrl:function(){return In},backendDependencies:function(){return ur},clearCurrentUser:function(){return Ie},createAttachment:function(){return xe},defaultVisitCustomRepresentation:function(){return rr},deleteAttachmentPermanently:function(){return Pe},fetchCurrentPatient:function(){return Ge},fhirBaseUrl:function(){return Mn},getAttachmentByUuid:function(){return Oe},getAttachments:function(){return Ee},getCurrentUser:function(){return Te},getLocations:function(){return it},getLoggedInUser:function(){return Ne},getSessionLocation:function(){return Be},getSessionStore:function(){return Me},getStartedVisit:function(){return sr},getVisitStore:function(){return Je},getVisitTypes:function(){return rt},getVisitsForPatient:function(){return Ze},makeUrl:function(){return be},openmrsFetch:function(){return we},openmrsObservableFetch:function(){return _e},refetchCurrentUser:function(){return De},restBaseUrl:function(){return Tn},saveVisit:function(){return et},sessionEndpoint:function(){return Cn},setCurrentVisit:function(){return Xe},setSessionLocation:function(){return ze},setUserLanguage:function(){return Ce},setUserProperties:function(){return Le},setupApiModule:function(){return Ue},toLocationObject:function(){return ot},toVisitTypeObject:function(){return nt},updateVisit:function(){return tt},userHasAccess:function(){return Re}});var at,st,ut=function(e,t){return ut=Object.setPrototypeOf||i({__proto__:[]},Array)&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},ut(e,t)},ct=!1,lt={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,ct=e},get useDeprecatedSynchronousErrorHandling(){return ct}},ft={closed:!0,next:function(e){},error:function(e){if(lt.useDeprecatedSynchronousErrorHandling)throw e;s(e)},complete:function(){}},ht=Array.isArray||function(e){return e&&"number"==typeof e.length},dt=function(){var e=function(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this};return e.prototype=Object.create(Error.prototype),e}(),pt=dt,vt=function(){var e=function(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)};return e.prototype.unsubscribe=function(){var n;if(!this.closed){var r=this,o=r._parentOrParents,a=r._ctorUnsubscribe,s=r._unsubscribe,l=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i(o,e))o.remove(this);else if(null!==o)for(var f=0;f<o.length;++f)o[f].remove(this);if(t(s)){a&&(this._unsubscribe=void 0);try{s.call(this)}catch(e){n=i(e,pt)?c(e.errors):[e]}}if(ht(l)){f=-1;for(var h=l.length;++f<h;){var d=l[f];if(u(d))try{d.unsubscribe()}catch(e){n=n||[],i(e,pt)?n=n.concat(c(e.errors)):n.push(e)}}}if(n)throw new pt(n)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(void 0===t?"undefined":a(t)){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!i(n,e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var o=n._parentOrParents;if(null===o)n._parentOrParents=this;else if(i(o,e)){if(o===this)return n;n._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return n;o.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[n]:s.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}(),yt="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),mt=function(t){function n(e,r,o){var a=t.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=ft;break;case 1:if(!e){a.destination=ft;break}if("object"==typeof e){i(e,n)?(a.syncErrorThrowable=e.syncErrorThrowable,a.destination=e,e.add(a)):(a.syncErrorThrowable=!0,a.destination=new gt(a,e));break}default:a.syncErrorThrowable=!0,a.destination=new gt(a,e,r,o)}return a}return e(n,t),n.prototype[yt]=function(){return this},n.create=function(e,t,r){var o=new n(e,t,r);return o.syncErrorThrowable=!1,o},n.prototype.next=function(e){this.isStopped||this._next(e)},n.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},n.prototype._next=function(e){this.destination.next(e)},n.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},n.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},n.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},n}(vt),gt=function(n){var r=function(e,r,o,i){var a,s=n.call(this)||this;s._parentSubscriber=e;var u=s;return t(r)?a=r:r&&(a=r.next,o=r.error,i=r.complete,r!==ft&&(t((u=Object.create(r)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=a,s._error=o,s._complete=i,s};return e(r,n),r.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;lt.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},r.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=lt.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):s(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;s(e)}}},r.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};lt.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},r.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),lt.useDeprecatedSynchronousErrorHandling)throw e;s(e)}},r.prototype.__tryOrSetError=function(e,t,n){if(!lt.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return lt.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(s(t),!0)}return!1},r.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},r}(mt),bt="function"==typeof Symbol&&Symbol.observable||"@@observable",wt=function(){var e=function(e){this._isScalar=!1,e&&(this._subscribe=e)};return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=function(e,t,n){if(e){if(i(e,mt))return e;if(e[yt])return e[yt]()}return e||t||n?new mt(e,t,n):new mt(ft)}(e,t,n);if(r?o.add(r.call(o,this.source)):o.add(this.source||lt.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),lt.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){lt.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,r=t.destination,o=t.isStopped;if(n||o)return!1;e=r&&i(r,mt)?r:null}return!0}(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=d(t))((function(t,r){var o;o=n.subscribe((function(t){try{e(t)}catch(e){r(e),o&&o.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[bt]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:(0===(n=e).length?l:1===n.length?n[0]:function(e){return n.reduce((function(e,t){return t(e)}),e)})(this);var n},e.prototype.toPromise=function(e){var t=this;return new(e=d(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}(),_t="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,St="object"==typeof self&&self&&self.Object===Object&&self,Ot=(_t||St||Function("return this")()).Symbol,Et=Object.prototype,xt=Et.hasOwnProperty,Pt=Et.toString,kt=Ot?Ot.toStringTag:void 0,jt=Object.prototype.toString,At=Ot?Ot.toStringTag:void 0,Tt=(at=Object.getPrototypeOf,st=Object,function(e){return at(st(e))}),Mt=Function.prototype,Ct=Object.prototype,Dt=Mt.toString,It=Ct.hasOwnProperty,Rt=Dt.call(Object),Nt=function(e){if(!function(e){return null!=e&&"object"==typeof e}(e)||"[object Object]"!=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":At&&At in Object(e)?function(e){var t=xt.call(e,kt),n=e[kt];try{e[kt]=void 0;var r=!0}catch(e){}var o=Pt.call(e);return r&&(t?e[kt]=n:delete e[kt]),o}(e):function(e){return jt.call(e)}(e)}(e))return!1;var t=Tt(e);if(null===t)return!0;var n=It.call(t,"constructor")&&t.constructor;return"function"==typeof n&&i(n,n)&&Dt.call(n)==Rt},Bt=f(824),zt=f(513),Lt=f(385);(0,Lt.createGlobalStore)("breadcrumbs",[]);var Kt,Ut=Object.freeze({__proto__:null,get start(){return de},get ensureJQuerySupport(){return Y},get setBootstrapMaxTime(){return N},get setMountMaxTime(){return B},get setUnmountMaxTime(){return z},get setUnloadMaxTime(){return L},get registerApplication(){return oe},get unregisterApplication(){return ae},get getMountedApps(){return te},get getAppStatus(){return re},get unloadApplication(){return se},get checkActivityFunctions(){return ie},get getAppNames(){return ne},get pathToActiveWhen(){return le},get navigateToUrl(){return F},get patchHistoryApi(){return G},get triggerAppChange(){return fe},get addErrorHandler(){return v},get removeErrorHandler(){return y},get mountRootParcel(){return C},get NOT_LOADED(){return qt},get LOADING_SOURCE_CODE(){return Wt},get NOT_BOOTSTRAPPED(){return Gt},get BOOTSTRAPPING(){return $t},get NOT_MOUNTED(){return Yt},get MOUNTING(){return Qt},get UPDATING(){return Xt},get LOAD_ERROR(){return tn},get MOUNTED(){return Jt},get UNLOADING(){return en},get UNMOUNTING(){return Zt},get SKIP_BECAUSE_BROKEN(){return nn}}),Vt=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).CustomEvent,Ft=function(){try{var e=new Vt("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?Vt:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n},Ht=[],qt="NOT_LOADED",Wt="LOADING_SOURCE_CODE",Gt="NOT_BOOTSTRAPPED",$t="BOOTSTRAPPING",Yt="NOT_MOUNTED",Qt="MOUNTING",Jt="MOUNTED",Xt="UPDATING",Zt="UNMOUNTING",en="UNLOADING",tn="LOAD_ERROR",nn="SKIP_BECAUSE_BROKEN",rn=[],on=!1,an=!1,sn=0,un={parcels:{}},cn={bootstrap:{millis:4e3,dieOnTimeout:!1,warningMillis:1e3},mount:{millis:3e3,dieOnTimeout:!1,warningMillis:1e3},unmount:{millis:3e3,dieOnTimeout:!1,warningMillis:1e3},unload:{millis:3e3,dieOnTimeout:!1,warningMillis:1e3},update:{millis:3e3,dieOnTimeout:!1,warningMillis:1e3}},ln="undefined"!=typeof window,fn={hashchange:[],popstate:[]},hn=["hashchange","popstate"],dn=null,pn=!1;ln&&(window.singleSpaNavigate?console.warn(m(41,!1)):window.singleSpaNavigate=F);var vn=!1,yn={},mn=[],gn=!1,bn=!1,wn=[],_n=ln&&window.location.href;function Sn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(bn)return new Promise((function(e,n){wn.push({resolve:e,reject:n,eventArguments:t})}));var r,i=function(){var e=[],t=[],n=[],r=[],o=(new Date).getTime();return mn.forEach((function(i){var a=i.status!==nn&&w(i);switch(i.status){case tn:a&&o-i.loadErrorTime>=200&&n.push(i);break;case qt:case Wt:a&&n.push(i);break;case Gt:case Yt:!a&&ee(_(i))?e.push(i):a&&r.push(i);break;case Jt:a||t.push(i)}})),{appsToUnload:e,appsToUnmount:t,appsToLoad:n,appsToMount:r}}(),a=i.appsToUnload,s=i.appsToUnmount,u=i.appsToLoad,c=i.appsToMount,l=[],f=_n,h=_n=window.location.href;return pe()?(bn=!0,r=a.concat(u,s,c),Promise.resolve().then((function(){return g(0===r.length?"before-no-app-change":"before-app-change",y(!0)),g("before-routing-event",y(!0,{cancelNavigation:d})),Promise.all(l).then((function(n){if(n.some((function(e){return e})))return dn.call(window.history,history.state,"",f.substring(location.origin.length)),_n=location.href,bn=!1,Sn(e,t,!0);var r=a.map(J),o=s.map(T).map((function(e){return e.then(J)})).concat(r),i=Promise.all(o);i.then((function(){g("before-mount-routing-event",y(!0))}),(function(e){throw e}));var l=u.map((function(e){return V(e).then((function(e){return he(e,i)}))})),h=c.filter((function(e){return u.indexOf(e)<0})).map((function(e){return he(e,i)}));return i.catch((function(e){throw v(),e})).then((function(){return v(),Promise.all(l.concat(h)).catch((function(t){throw e.forEach((function(e){return e.reject(t)})),t})).then(p).then((function(){}),(function(e){throw e}))}))}))}))):(r=u,Promise.resolve().then((function(){var e=u.map(V);return Promise.all(e).then(v).then((function(){return[]})).catch((function(e){throw v(),e})).finally((function(){}))})));function d(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t="function"==typeof(null==e?void 0:e.then)?e:Promise.resolve(e);l.push(t.catch((function(e){return console.warn(Error(m(42,!1))),console.warn(e),!1})))}function p(){var t=te();e.forEach((function(e){return e.resolve(t)}));try{g(0===r.length?"no-app-change":"app-change",y()),g("routing-event",y())}catch(e){setTimeout((function(){throw e}))}if(bn=!1,wn.length>0){var n=wn;wn=[],Sn(n)}return t}function v(){n||(e.forEach((function(e){H(e.eventArguments)})),H(t))}function y(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1?arguments[1]:void 0,l={},d=(o(e={},Jt,[]),o(e,Yt,[]),o(e,qt,[]),o(e,nn,[]),e);n?(u.concat(c).forEach((function(e,t){v(e,Jt)})),a.forEach((function(e){v(e,qt)})),s.forEach((function(e){v(e,Yt)}))):r.forEach((function(e){v(e)}));var p={detail:{newAppStatuses:l,appsByNewStatus:d,totalAppChanges:r.length,originalEvent:null==t?void 0:t[0],oldUrl:f,newUrl:h}};return i&&E(p.detail,i),p;function v(e,t){var n=_(e);t=t||re(n),l[n]=t,(d[t]=d[t]||[]).push(n)}}function g(e,t){n||window.dispatchEvent(new Ft("single-spa:".concat(e),t))}}var On=!1,En={getRawAppData:function(){return function(e){if(Array.isArray(e))return r(e)}(e=mn)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var e},reroute:Sn,NOT_LOADED:qt,toLoadPromise:V,toBootstrapPromise:A,unregisterApplication:ae,getProfilerData:function(){return rn}};ln&&window.__SINGLE_SPA_DEVTOOLS__&&(window.__SINGLE_SPA_DEVTOOLS__.exposedMethods=En);var xn="openmrs:history";function Pn(e,t,n){return Pn=ge()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&jn(o,n.prototype),o},Pn.apply(null,arguments)}function kn(e){return kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},kn(e)}function jn(e,t){return jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jn(e,t)}function An(e){var t="function"==typeof Map?new Map:void 0;return An=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Pn(e,arguments,kn(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),jn(r,e)},An(e)}var Tn="/ws/rest/v1",Mn="/ws/fhir2/R4",Cn="".concat(Tn,"/session"),Dn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jn(e,t)}(o,e);var t,n,r=(t=o,n=ge(),function(){var e,r=kn(t);if(n){var o=kn(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":void 0===n?"undefined":a(n))&&"function"!=typeof t?ve(e):t;var n}(this,e)});function o(e,t,n,a){var s;return function(e,t){if(!i(e,t))throw new TypeError("Cannot call a class as a function")}(this,o),me(ve(s=r.call(this)),"response",void 0),me(ve(s),"responseBody",void 0),s.message="Server responded with ".concat(t.status," (").concat(t.statusText,") for url ").concat(e,". Check err.responseBody or network tab in dev tools for more info"),a.message=s.message,s.responseBody=n,s.response=t,s.stack="Stacktrace for outgoing request:\n".concat(a.stack,"\nStacktrace for incoming response:\n").concat(s.stack),s}return o}(An(Error)),In="".concat(Tn,"/attachment");function Rn(){var e;return e=function(e,t){var n;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(r){return(n=new FormData).append("fileCaption",t.fileDescription),n.append("patient",e),t.file?n.append("file",t.file):(n.append("file",new File([""],t.fileName),t.fileName),n.append("base64Content",t.base64Content)),[2,we("".concat(In),{method:"POST",body:n})]}))},Rn=function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Se(i,r,o,a,s,"next",e)}function s(e){Se(i,r,o,a,s,"throw",e)}a(void 0)}))},Rn.apply(this,arguments)}var Nn=f(254),Bn=function(e){return void 0===e},zn=(0,Lt.createGlobalStore)("session",{loaded:!1,session:null}),Ln=0;function Kn(){return(Kn=je((function(e,t){return Ae(this,(function(n){return[2,Ke(we(Cn,{method:"POST",body:{sessionLocation:e},headers:{"Content-Type":"application/json"},signal:t.signal}))]}))}))).apply(this,arguments)}function Un(){return(Un=je((function(e,t,n){return Ae(this,(function(r){switch(r.label){case 0:return n||(n=new AbortController),[4,we("".concat(Tn,"/user/").concat(e),{method:"POST",body:{userProperties:t},headers:{"Content-Type":"application/json"},signal:n.signal})];case 1:return r.sent(),[2,De()]}}))}))).apply(this,arguments)}zn.subscribe((function(e){return e.session&&Ce(e.session)}));var Vn=f(738);function Fn(){return Fn=He((function(e,t){var n,r,o,i,a,s=arguments;return We(this,(function(u){switch(u.label){case 0:return n=!(s.length>2&&void 0!==s[2])||s[2],e?(r=null,[4,Promise.all([we("".concat(Mn,"/Patient/").concat(e),t).catch((function(e){return r=e})),n?$e(e):Promise.resolve(null)])]):[3,2];case 1:if(o=qe.apply(void 0,[u.sent(),2]),i=o[0],a=o[1],i.ok)return[2,i.data];if(a)return[2,a];if(r)throw r;u.label=2;case 2:return[2,null]}}))})),Fn.apply(this,arguments)}function Hn(){return(Hn=He((function(e){var t,n,r;return We(this,(function(o){switch(o.label){case 0:return[4,(0,Vn.getSynchronizationItems)("patient-registration")];case 1:return t=o.sent(),n=t.find((function(t){return t.fhirPatient.id===e})),[2,null!==(r=null==n?void 0:n.fhirPatient)&&void 0!==r?r:null]}}))}))).apply(this,arguments)}var qn=function(){var e=function(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this};return e.prototype=Object.create(Error.prototype),e}(),Wn=function(t){var n=function(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r};return e(n,t),n.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},n}(vt),Gn=function(t){var n=function(e){var n=t.call(this,e)||this;return n.destination=e,n};return e(n,t),n}(mt),$n=function(t){var n=function(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e};return e(n,t),n.prototype[yt]=function(){return new Gn(this)},n.prototype.lift=function(e){var t=new Yn(this,this);return t.operator=e,t},n.prototype.next=function(e){if(this.closed)throw new qn;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].next(e)},n.prototype.error=function(e){if(this.closed)throw new qn;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].error(e);this.observers.length=0},n.prototype.complete=function(){if(this.closed)throw new qn;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},n.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},n.prototype._trySubscribe=function(e){if(this.closed)throw new qn;return t.prototype._trySubscribe.call(this,e)},n.prototype._subscribe=function(e){if(this.closed)throw new qn;return this.hasError?(e.error(this.thrownError),vt.EMPTY):this.isStopped?(e.complete(),vt.EMPTY):(this.observers.push(e),new Wn(this,e))},n.prototype.asObservable=function(){var e=new wt;return e.source=this,e},n.create=function(e,t){return new Yn(e,t)},n}(wt),Yn=function(t){var n=function(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r};return e(n,t),n.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},n.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},n.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},n.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):vt.EMPTY},n}($n),Qn=function(t){var n=function(e){var n=t.call(this)||this;return n._value=e,n};return e(n,t),Object.defineProperty(n.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),n.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},n.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new qn;return this._value},n.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},n}($n),Jn=function(){var e=function(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this};return e.prototype=Object.create(Error.prototype),e}(),Xn=new wt((function(e){return e.complete()})),Zn=function(){var e=function(e){if(this.total=e,this.total<0)throw new Jn};return e.prototype.call=function(e,t){return t.subscribe(new er(e,this.total))},e}(),er=function(t){var n=function(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r};return e(n,t),n.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},n}(mt),tr=function(){var e=function(e,t){this.project=e,this.thisArg=t};return e.prototype.call=function(e,t){return t.subscribe(new nr(e,this.project,this.thisArg))},e}(),nr=function(t){var n=function(e,n,r){var o=t.call(this,e)||this;return o.project=n,o.count=0,o.thisArg=r||o,o};return e(n,t),n.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},n}(mt),rr="custom:(uuid,display,voided,indication,startDatetime,stopDatetime,encounters:(uuid,display,encounterDatetime,form:(uuid,name),location:ref,encounterType:ref,encounterProviders:(uuid,display,provider:(uuid,display))),patient:(uuid,display),visitType:(uuid,name,display),attributes:(uuid,display,attributeType:(name,datatypeClassname,uuid),value),location:(uuid,name,display))",or=function(){try{return JSON.parse(localStorage.getItem("openmrs:visitStoreState")||"null")}catch(e){return null}}()||{patientUuid:null,manuallySetVisitUuid:null};Je().subscribe((function(e){var t;t=e,localStorage.setItem("openmrs:visitStoreState",JSON.stringify(t))}));var ir,ar,sr=new Qn(null);!function(e){e.NEWVISIT="startVisit",e.EDITVISIT="editVisit",e.LOADING="loadingVisit"}(ir||(ir={})),function(e){e.NOTSTARTED="notStarted",e.ONGOING="ongoing"}(ar||(ar={}));var ur={"webservices.rest":"2.24.0",fhir2:"1.0.0-SNAPSHOT"}}(),h}())}}}))},714:()=>{function e(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}System.register(["@openmrs/esm-state"],(function(t,n){var r={};return{setters:[function(e){r.createGlobalStore=e.createGlobalStore,r.getGlobalStore=e.getGlobalStore}],execute:function(){t(function(){"use strict";var t={685:function(e){e.exports=r}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return function(){var t=function(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]},n=function(e){return function n(r){return 0===arguments.length||t(r)?n:e.apply(this,arguments)}},r=function(e){return function r(o,i){switch(arguments.length){case 0:return r;case 1:return t(o)?r:n((function(t){return e(o,t)}));default:return t(o)&&t(i)?r:t(o)?n((function(t){return e(t,i)})):t(i)?n((function(t){return e(o,t)})):e(o,i)}}},a=function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n},s=function(e,t,n){for(var r=0,o=n.length;r<o;){if(e(t,n[r]))return!0;r+=1}return!1},u=function(e,t){return Object.prototype.hasOwnProperty.call(t,e)},c=function(e,t,n,r){var o=a(e);function i(e,t){return fe(e,t,n.slice(),r.slice())}return!s((function(e,t){return!s(i,t,e)}),a(t),o)},l=function(e){return function o(i,a,s){switch(arguments.length){case 0:return o;case 1:return t(i)?o:r((function(t,n){return e(i,t,n)}));case 2:return t(i)&&t(a)?o:t(i)?r((function(t,n){return e(t,a,n)})):t(a)?r((function(t,n){return e(i,t,n)})):n((function(t){return e(i,a,t)}));default:return t(i)&&t(a)&&t(s)?o:t(i)&&t(a)?r((function(t,n){return e(t,n,s)})):t(i)&&t(s)?r((function(t,n){return e(t,a,n)})):t(a)&&t(s)?r((function(t,n){return e(i,t,n)})):t(i)?n((function(t){return e(t,a,s)})):t(a)?n((function(t){return e(i,t,s)})):t(s)?n((function(t){return e(i,a,t)})):e(i,a,s)}}},f=function(e){return"[object Object]"===Object.prototype.toString.call(e)},h=function(e,t,n){for(var r=n.next();!r.done;){if((t=e["@@transducer/step"](t,r.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=n.next()}return e["@@transducer/result"](t)},d=function(e,t,n,r){return e["@@transducer/result"](n[r](Ee(e["@@transducer/step"],e),t))},p=function(e,t){return function(n){if(!e(n))return"function"==typeof t?t(n):t}},v=function(e){return(0,De.getGlobalStore)("config-module-".concat(e),{config:null,loaded:!1,translationOverridesLoaded:!1})},y=function(){return(0,De.getGlobalStore)("config-extension-slots",{slots:{}})},m=function(e){return g(y().getState(),e)},g=function(e,t){var n=e.slots[t];return null!=n?n:{loaded:!1,config:{}}},b=function(){return(0,De.getGlobalStore)("config-extensions",{configs:{}})},w=function(e,t){var n=Object.assign({},_(b().getState(),e,t));return n.config=ye(["Display conditions","Translation overrides"],n.config),n},_=function(e,t,n){var r,o=null===(r=e.configs[t])||void 0===r?void 0:r[n];return null!=o?o:{loaded:!1,config:null}},S=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},O=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},E=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){O(e,t,n[t])}))}return e},x=function(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e},P=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||j(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},k=function(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},j=function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}},A=function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=Object.keys(e.schemas)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,u=v(s);if(e.moduleLoaded[s]){var c=H(s,e,t);u.setState({translationOverridesLoaded:!0,loaded:!0,config:c})}else{var l=q(s,e,t);u.setState({translationOverridesLoaded:!0,loaded:!1,config:l})}}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}},T=function(e,t){var n,r,o=(n=G(F(e,t)),function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=Object.entries(e)[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=P(o.value,2),s=a[0],u=a[1],c=!0,l=!1,f=void 0;try{for(var h,d=Object.entries(u)[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=P(h.value,2),v=p[0];V(p[1],s,v)}}catch(e){l=!0,f=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}(r=Object.keys(n).reduce((function(e,t){var r,o;return(null===(r=n[t])||void 0===r?void 0:r.extensionSlots)&&(e[t]=null===(o=n[t])||void 0===o?void 0:o.extensionSlots),e}),{})),Object.keys(r).reduce((function(e,t){return E({},e,r[t])}),{})),i=Object.fromEntries(Object.entries(o).map((function(e){var t=P(e,2);return[t[0],{loaded:!0,config:t[1]}]}))),a=y(),s=a.getState(),u={slots:E({},s.slots,i)};he(s,u)||a.setState(u)},M=function(e,t){var n=function(e,t){var n=ze(be(e.schemas)),r=k(e.providedConfigs.map((function(e){return[e.config,e.source]}))).concat([[t.config,"temporary config"]]),o=!0,i=!1,a=void 0;try{for(var s,u=r[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=P(s.value,2);n=G([n,Le(c[0],c[1])])}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t);Be.setState({config:n})},C=function(e,t,n){var r={},o=!0,i=!1,a=void 0;try{for(var s,u=t.mountedExtensions[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=s.value,l=U(c.slotModuleName,c.extensionModuleName,c.slotName,c.extensionId,e,n);r[c.slotName]=x(E({},r[c.slotName]),O({},c.extensionId,{config:l,loaded:!0}))}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}b().setState({configs:r})},D=function(e,t){Ke(e,t);var n=ve(t,We);Ie.setState((function(t){return x(E({},t),{schemas:x(E({},t.schemas),O({},e,n)),moduleLoaded:x(E({},t.moduleLoaded),O({},e,!0))})}))},I=function(e){var t=Ie.getState();Ie.setState({schemas:x(E({},t.schemas),O({},e,We))})},R=function(e){var t=Ie.getState();Ie.setState({schemas:x(E({},t.schemas),O({},e,qe))})},N=function(e,t){Ke(e,t);var n=ve(t,We),r=Ie.getState();r.schemas[e]&&console.error("Config schema for extension ".concat(e," already exists. If there are multiple extensions with this same name, one will probably crash.")),Ie.setState({schemas:x(E({},r.schemas),O({},e,n))})},B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"provided";Ie.setState((function(n){return x(E({},n),{providedConfigs:k(n.providedConfigs).concat([{source:t,config:e}])})}))},z=function(e){return new Promise((function(t){var n=function(e){if(e.loaded&&e.config){var n=ye(["Display conditions","Translation overrides"],e.config);t(n),o&&o()}},r=v(e);n(r.getState());var o=r.subscribe(n)}))},L=function(e){return new Promise((function(t){var n=function(e){if(e.translationOverridesLoaded&&e.config){var n,r=null!==(n=e.config["Translation overrides"])&&void 0!==n?n:{};t(r),o&&o()}},r=v(e);n(r.getState());var o=r.subscribe(n)}))},K=function(e,t,n){$(e,t,n);var r=Fe(e,t);return Ve(e,r,n),r},U=function(e,t,n,r,o,i){var a,s,u,c,l=function(e){return P(e.split("#"),1)[0]}(r),f=o.schemas[l],h=f?l:t,d=F(o,i),p=W(e,d),v=null!==(c=null==p||null===(a=p.extensionSlots)||void 0===a||null===(s=a[n])||void 0===s||null===(u=s.configure)||void 0===u?void 0:u[r])&&void 0!==c?c:{},y=G([W(h,d),v]),m=null!=f?f:o.schemas[t];$(m,y,h);var g=Fe(m,y);return Ve(m,g,h),delete g.extensionSlots,g},V=function(e,t,n){var r="".concat(t,".extensionSlots.").concat(n),o="Extension slot config '".concat(r,"'"),i=Object.keys(e).filter((function(e){return!["add","remove","order","configure"].includes(e)}));i.length&&Z(r,o+"' contains invalid keys '".concat(i.join("', '"),"'")),e.add&&(Array.isArray(e.add)&&e.add.every((function(e){return"string"==typeof e}))||Z(r,o+".add' is invalid. Must be an array of strings (extension IDs)")),e.remove&&(Array.isArray(e.remove)&&e.remove.every((function(e){return"string"==typeof e}))||Z(r,o+".remove' is invalid. Must be an array of strings (extension IDs)")),e.order&&(Array.isArray(e.order)&&e.order.every((function(e){return"string"==typeof e}))||Z(r,o+".order' is invalid. Must be an array of strings (extension IDs)")),e.configure&&(X(e.configure)||Z(r,o+".configure' is invalid. Must be an object with extension IDs for keys"))},F=function(e,t){return k(e.providedConfigs.map((function(e){return e.config}))).concat([t.config])},H=function(e,t,n){var r=t.schemas[e],o=W(e,F(t,n));$(r,o,e);var i=Fe(r,o);return Ve(r,i,e),delete i.extensionSlots,i},q=function(e,t,n){var r=W(e,F(t,n)),o=Fe(We,r);return Ve(We,o,e),delete o.extensionSlots,o},W=function(e,t){return G(t.map((function(t){return t[e]})).filter((function(e){return!!e})))},G=function(e){return Pe(ve)({},e)},$=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=!0,o=!1,i=void 0;try{for(var a,s=Object.keys(t)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,c=t[u],l=n+"."+u,f=e[u];e.hasOwnProperty(u)?Ue(f,c,l):"extensionSlots"===u&&""!==n||Z(l,"Unknown config key '".concat(l,"' provided. Ignoring."))}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}},Y=function(e,t,n){return!t||Q(e,[{Array:ke,Boolean:je,ConceptUuid:Ce,Number:Ae,Object:Me,String:Te,UUID:Ce,PersonAttributeTypeUuid:Ce,PatientIdentifierTypeUuid:Ce}[t]],n)},Q=function(e,t,n){var r=!0;if(t)try{var o=!0,i=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=(0,s.value)(n);"string"==typeof c&&(Z(e,"object"==typeof n?"Invalid configuration for ".concat(e,": ").concat(c):"Invalid configuration value ".concat(n," for ").concat(e,": ").concat(c)),r=!1)}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}}catch(t){console.error('Skipping invalid validator at "'.concat(e,'". Encountered error\n\t').concat(t))}return r},J=function(e){return!!e&&Object.keys(e).filter((function(e){return!["_default","_validators"].includes(e)})).length>0},X=function(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e},Z=function(e,t){var n="".concat(e,":::").concat(t);He.has(n)||(console.error(t),He.add(n))},ee=function(e){e?He.forEach((function(t){t.startsWith(e)&&He.delete(t)})):He.clear()};o.r(i),o.d(i,{Type:function(){return ge},clearConfigErrors:function(){return ee},configExtensionStore:function(){return Ne},configInternalStore:function(){return Ie},defineConfigSchema:function(){return D},defineExtensionConfigSchema:function(){return N},getConfig:function(){return z},getConfigStore:function(){return v},getExtensionConfig:function(){return w},getExtensionConfigFromStore:function(){return _},getExtensionSlotConfig:function(){return m},getExtensionSlotConfigFromStore:function(){return g},getExtensionSlotsConfigStore:function(){return y},getExtensionsConfigStore:function(){return b},getTranslationOverrides:function(){return L},implementerToolsConfigStore:function(){return Be},inRange:function(){return Ge},isUrl:function(){return Ye},isUrlWithTemplateParameters:function(){return $e},oneOf:function(){return Qe},processConfig:function(){return K},provide:function(){return B},registerModuleWithConfigSystem:function(){return I},registerTranslationNamespace:function(){return R},temporaryConfigStore:function(){return Re},validator:function(){return p},validators:function(){return Je}});var te="function"==typeof Object.is?Object.is:function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},ne=Object.prototype.toString,re=function(){return"[object Arguments]"===ne.call(arguments)?function(e){return"[object Arguments]"===ne.call(e)}:function(e){return u("callee",e)}}(),oe=re,ie=!{toString:null}.propertyIsEnumerable("toString"),ae=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],se=function(){return arguments.propertyIsEnumerable("length")}(),ue=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},ce="function"!=typeof Object.keys||se?n((function(e){if(Object(e)!==e)return[];var t,n,r=[],o=se&&oe(e);for(t in e)!u(t,e)||o&&"length"===t||(r[r.length]=t);if(ie)for(n=ae.length-1;n>=0;)u(t=ae[n],e)&&!ue(r,t)&&(r[r.length]=t),n-=1;return r})):n((function(e){return Object(e)!==e?[]:Object.keys(e)})),le=n((function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}));function fe(t,n,r,o){if(te(t,n))return!0;var i,a,s=le(t);if(s!==le(n))return!1;if(null==t||null==n)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof n["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](n)&&"function"==typeof n["fantasy-land/equals"]&&n["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof n.equals)return"function"==typeof t.equals&&t.equals(n)&&"function"==typeof n.equals&&n.equals(t);switch(s){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===(i=t.constructor,null==(a=String(i).match(/^function (\w*)/))?"":a[1]))return t===n;break;case"Boolean":case"Number":case"String":if((void 0===t?"undefined":e(t))!=(void 0===n?"undefined":e(n))||!te(t.valueOf(),n.valueOf()))return!1;break;case"Date":if(!te(t.valueOf(),n.valueOf()))return!1;break;case"Error":return t.name===n.name&&t.message===n.message;case"RegExp":if(t.source!==n.source||t.global!==n.global||t.ignoreCase!==n.ignoreCase||t.multiline!==n.multiline||t.sticky!==n.sticky||t.unicode!==n.unicode)return!1}for(var l=r.length-1;l>=0;){if(r[l]===t)return o[l]===n;l-=1}switch(s){case"Map":return t.size===n.size&&c(t.entries(),n.entries(),r.concat([t]),o.concat([n]));case"Set":return t.size===n.size&&c(t.values(),n.values(),r.concat([t]),o.concat([n]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var f=ce(t);if(f.length!==ce(n).length)return!1;var h=r.concat([t]),d=o.concat([n]);for(l=f.length-1;l>=0;){var p=f[l];if(!u(p,n)||!fe(n[p],t[p],h,d))return!1;l-=1}return!0}var he=r((function(e,t){return fe(e,t,[],[])})),de=l((function(e,t,n){var r,o={};for(r in t)u(r,t)&&(o[r]=u(r,n)?e(r,t[r],n[r]):t[r]);for(r in n)u(r,n)&&!u(r,o)&&(o[r]=n[r]);return o})),pe=l((function e(t,n,r){return de((function(n,r,o){return f(r)&&f(o)?e(t,r,o):t(n,r,o)}),n,r)})),ve=r((function(e,t){return pe((function(e,t,n){return n}),e,t)})),ye=r((function(e,t){for(var n={},r={},o=0,i=e.length;o<i;)r[e[o]]=1,o+=1;for(var a in t)r.hasOwnProperty(a)||(n[a]=t[a]);return n}));function me(e,t,n,r){var o,i=function(o){for(var i=t.length,a=0;a<i;){if(e===t[a])return n[a];a+=1}for(var s in t[a+1]=e,n[a+1]=o,e)o[s]=r?me(e[s],t,n,!0):e[s];return o};switch(le(e)){case"Object":return i({});case"Array":return i([]);case"Date":return new Date(e.valueOf());case"RegExp":return o=e,new RegExp(o.source,(o.global?"g":"")+(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.sticky?"y":"")+(o.unicode?"u":""));default:return e}}var ge,be=n((function(e){return null!=e&&"function"==typeof e.clone?e.clone():me(e,[],[],!0)})),we=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)},_e=n((function(e){return!!we(e)||!!e&&"object"==typeof e&&!function(e){return"[object String]"===Object.prototype.toString.call(e)}(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1))})),Se=function(){var e=function(e){this.f=e};return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}(),Oe=r((function(e,t){return function(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,o){return t.apply(this,arguments)};case 5:return function(e,n,r,o,i){return t.apply(this,arguments)};case 6:return function(e,n,r,o,i,a){return t.apply(this,arguments)};case 7:return function(e,n,r,o,i,a,s){return t.apply(this,arguments)};case 8:return function(e,n,r,o,i,a,s,u){return t.apply(this,arguments)};case 9:return function(e,n,r,o,i,a,s,u,c){return t.apply(this,arguments)};case 10:return function(e,n,r,o,i,a,s,u,c,l){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}(e.length,(function(){return e.apply(t,arguments)}))})),Ee=Oe,xe="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",Pe=l((function(e,t,n){if("function"==typeof e&&(e=function(e){return new Se(e)}(e)),_e(n))return function(e,t,n){for(var r=0,o=n.length;r<o;){if((t=e["@@transducer/step"](t,n[r]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}(e,t,n);if("function"==typeof n["fantasy-land/reduce"])return d(e,t,n,"fantasy-land/reduce");if(null!=n[xe])return h(e,t,n[xe]());if("function"==typeof n.next)return h(e,t,n);if("function"==typeof n.reduce)return d(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}));!function(e){e.Array="Array",e.Boolean="Boolean",e.ConceptUuid="ConceptUuid",e.Number="Number",e.Object="Object",e.String="String",e.UUID="UUID",e.PersonAttributeTypeUuid="PersonAttributeTypeUuid",e.PatientIdentifierTypeUuid="PatientIdentifierTypeUuid"}(ge||(ge={}));var ke=p((function(e){return Array.isArray(e)}),"must be an array"),je=p((function(e){return"boolean"==typeof e}),"must be a boolean"),Ae=p((function(e){return"number"==typeof e}),"must be a number"),Te=p((function(e){return"string"==typeof e}),"must be a string"),Me=p((function(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}),"must be an object (not an array or null)"),Ce=p((function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)||/^[0-9a-f]{36}$/i.test(e)}),"must be a valid UUID or a 36-character hexadecimal string"),De=o(685),Ie=(0,De.createGlobalStore)("config-internal",{providedConfigs:[],schemas:{},moduleLoaded:{}}),Re=(0,De.createGlobalStore)("temporary-config",{config:function(){try{return JSON.parse(localStorage.getItem("openmrs:temporaryConfig")||"{}")}catch(e){return{}}}()});Re.subscribe((function(e){var t;t=e.config,localStorage.setItem("openmrs:temporaryConfig",JSON.stringify(t))}));var Ne=(0,De.createGlobalStore)("config-store-of-extension-state",{mountedExtensions:[]}),Be=(0,De.createGlobalStore)("config-implementer-tools",{config:{}});function ze(e){return e.hasOwnProperty("_default")?x(E({},e),{_value:e._default,_source:"default"}):X(e)?Object.keys(e).reduce((function(t,n){return t[n]=ze(e[n]),t}),{}):{}}function Le(e,t){return X(e)?Object.keys(e).reduce((function(n,r){return n[r]=Le(e[r],t),n}),{}):{_value:e,_source:t}}function Ke(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="Please verify that you are running the latest version and, if so, alert the maintainer.",o=!0,i=!1,a=void 0;try{for(var s,u=function(){var o=s.value,i=n+(n&&".")+o,a=t[o];if("Display conditions"===i&&console.error("".concat(e,' declares a configuration option called "Display conditions"; the "Display conditions" option is a reserved name. ').concat(r)),"Translation overrides"===i&&console.error("".concat(e,' declares a configuration option called "Translation overrides"; the "Translation overrides" option is a reserved name. ').concat(r)),!X(a))return console.error("".concat(e," has bad config schema definition for key '").concat(i,"'. ").concat(r)),"continue";a.hasOwnProperty("_default")||Ke(e,a,i);var u=a._elements;if(J(u)&&Ke(e,u,i+"._elements"),a._validators){var c=!0,l=!1,f=void 0;try{for(var h,d=a._validators[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;"function"!=typeof p&&console.error("".concat(e," has invalid validator for key '").concat(i,"' ").concat(r,".")+"\n\nIf you're the maintainer: validators must be functions that return either "+"undefined or an error string. Received ".concat(p,"."))}}catch(e){l=!0,f=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}}var v=a._type;v&&!Object.values(ge).includes(v)&&console.error("".concat(e," has invalid type for key '").concat(i,"' ").concat(r,".")+"\n\nIf you're the maintainer: the allowed types are ".concat(Object.values(ge).join(", "),". ")+"Received '".concat(v,"'")),Object.keys(a).every((function(e){return["_description","_validators","_elements","_type"].includes(e)}))&&!n.includes("._elements")&&console.error("".concat(e," has bad config schema definition for key '").concat(i,"'. ").concat(r,".")+"\n\nIf you're the maintainer: all config elements must have a default. "+"Received ".concat(JSON.stringify(a))),u&&v&&![ge.Array,ge.Object].includes(v)&&console.error("".concat(e," has bad config schema definition for key '").concat(i,"'. ").concat(r,".")+"\n\nIf you're the maintainer: the 'elements' key only works with '_type' equal to 'Array' or 'Object'. "+"Received ".concat(JSON.stringify(v)))},c=Object.keys(t).filter((function(e){return!e.startsWith("_")}))[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)u()}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}}function Ue(e,t,n){Y(n,e._type,t),X(t)?e._type===ge.Object?function(e,t,n){if(e._elements){var r=!0,o=!1,i=void 0;try{for(var a,s=Object.keys(t)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,c=t[u];$(e._elements,c,"".concat(n,".").concat(u))}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}}(e,t,n):e.hasOwnProperty("_default")||e.hasOwnProperty("_type")||$(e,t,n):e._type===ge.Array&&function(e,t,n){if(Y(n,ge.Array,t)){if(J(e._elements))for(var r=0;r<t.length;r++)Ue(e._elements,t[r],"".concat(n,"[").concat(r,"]"));for(var o=0;o<t.length;o++){var i;Y("".concat(n,"[").concat(o,"]"),null===(i=e._elements)||void 0===i?void 0:i._type,t[o])}}}(e,t,n)}function Ve(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(e)if(t!==e._default&&Q(n,e._validators,t),X(t)){var r=!0,o=!1,i=void 0;try{for(var a,s=Object.keys(t)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,c=t[u],l=n+"."+u,f=e[u];e._type===ge.Object&&e._elements?Ve(e._elements,c,l):Ve(f,c,l)}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}else if(Array.isArray(t)&&e._elements)for(var h=0;h<t.length;h++)Ve(e._elements,t[h],"".concat(n,"[").concat(h,"]"))}A(Ie.getState(),Re.getState()),Ie.subscribe((function(e){return A(e,Re.getState())})),Re.subscribe((function(e){return A(Ie.getState(),e)})),M(Ie.getState(),Re.getState()),Ie.subscribe((function(e){return M(e,Re.getState())})),Re.subscribe((function(e){return M(Ie.getState(),e)})),T(Ie.getState(),Re.getState()),Ie.subscribe((function(e){return T(e,Re.getState())})),Re.subscribe((function(e){return T(Ie.getState(),e)})),C(Ie.getState(),Ne.getState(),Re.getState()),Ie.subscribe((function(e){C(e,Ne.getState(),Re.getState())})),Ne.subscribe((function(e){C(Ie.getState(),e,Re.getState())})),Re.subscribe((function(e){C(Ie.getState(),Ne.getState(),e)}));var Fe=function(e,t){var n=be(t);if(!e)return n;var r=!0,o=!1,i=void 0;try{for(var a,s=function(){var t=a.value,r=n[t],o=e[t];if(o&&(o.hasOwnProperty("_type")||o.hasOwnProperty("_default"))){n.hasOwnProperty(t)||(n[t]=o._default);var i=o._elements;if(r&&J(i))if(o._type===ge.Array&&Array.isArray(r)){var s=r.map((function(e){return Fe(i,e)}));n[t]=s}else if(o._type===ge.Object){var u=!0,c=!1,l=void 0;try{for(var f,h=Object.keys(r)[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value;r[d]=Fe(i,r[d])}}catch(e){c=!0,l=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}}}else if(X(o)){var p=null!=r?r:{};X(p)&&(n[t]=Fe(o,p))}},u=Object.keys(e)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)s()}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n},He=new Set,qe={"Translation overrides":{_description:"Per-language overrides for frontend translations should be keyed by language code and each language dictionary contains the translation key and the display value",_type:ge.Object,_default:{},_validators:[p((function(e){return Object.keys(e).every((function(e){return/^[a-z]{2,3}(-[A-Z]{2,3})?$/.test(e)}))}),(function(e){var t=Object.keys(e).filter((function(e){return!/^[a-z]{2,3}(-[A-Z]{2,3})?$/.test(e)}));return"The 'Translation overrides' object should have language codes for keys. Language codes must be in the form of a two-to-three letter language code optionally followed by a hyphen and a two-to-three letter country code. The following keys do not conform: ".concat(t.join(", "),".")}))]}},We=E({"Display conditions":{privileges:{_description:"The privilege(s) the user must have to use this extension",_type:ge.Array,_default:[]}}},qe),Ge=function(e,t){return p((function(n){return e<=n&&n<=t}),"must be between ".concat(e," and ").concat(t))},$e=function(e){var t=e.concat(["openmrsBase","openmrsSpaBase"]);return p((function(e){if(!e||"string"!=typeof e)return!1;for(var n=/\${(.*?)}/g,r=n.exec(e);r;){if(!t.includes(r[1]))return!1;r=n.exec(e)}return!0}),"Should be a URL or path. The allowed template parameters are "+t.map((function(e){return"${"+e+"}"})).join(", "))},Ye=$e([]),Qe=function(e){return p((function(t){return e.includes(t)}),"Must be one of the following: '".concat(e.join("', '"),"'."))},Je={inRange:Ge,isUrl:Ye,isUrlWithTemplateParameters:$e,oneOf:Qe}}(),i}())}}}))},570:()=>{System.register(["@openmrs/esm-state"],(function(e,t){var n={};return{setters:[function(e){n.getGlobalStore=e.getGlobalStore}],execute:function(){e(function(){"use strict";var e={685:function(e){e.exports=n}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return function(){var e=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},t=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},n=function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),o.forEach((function(n){t(e,n,r[n])}))}return e},i=function(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e},a=function(e,r,o){var a;h.setState((function(s){var u;return{flags:i(n({},s.flags),t({},e,{enabled:null!==(a=null===(u=s.flags[e])||void 0===u?void 0:u.enabled)&&void 0!==a&&a,label:r,description:o}))}}))},s=function(e){return h.getState().flags[e].enabled},u=function(e,t){h.subscribe((function(n){t(n.flags[e].enabled)}))},c=function(e,r){h.setState((function(o){return{flags:i(n({},o.flags),t({},e,i(n({},o.flags[e]),{enabled:r})))}}))};r.r(o),r.d(o,{featureFlagsStore:function(){return h},getFeatureFlag:function(){return s},registerFeatureFlag:function(){return a},setFeatureFlag:function(){return c},subscribeToFeatureFlag:function(){return u}});var l=r(685),f={flags:function(){var e={},t=!0,r=!1,o=void 0;try{for(var i,a=Object.keys(localStorage)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;if(s.startsWith("openmrs:feature-flag:")){var u=s.replace("openmrs:feature-flag:",""),c=JSON.parse(localStorage.getItem("openmrs:feature-flag-meta:".concat(u))||"{}");e[u]=n({enabled:"true"===localStorage.getItem(s)},c)}}}catch(e){r=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw o}}return e}()},h=(0,l.getGlobalStore)("feature-flags",f);h.subscribe((function(t){var n,r=!0,o=!1,i=void 0;try{for(var a,s=Object.entries(t.flags)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=function(e){if(Array.isArray(e))return e}(n=a.value)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),2!==i.length);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(n)||function(t,n){if(t){if("string"==typeof t)return e(t,2);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,2):void 0}}(n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=u[0],l=u[1];localStorage.setItem("openmrs:feature-flag:".concat(c),l.enabled.toString()),localStorage.setItem("openmrs:feature-flag-meta:".concat(c),JSON.stringify({label:l.label,description:l.description}))}}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}))}(),o}())}}}))},103:()=>{System.register([],(function(e,t){return{execute:function(){e(function(){"use strict";var e=function(e){window.dispatchEvent(new CustomEvent(v,{detail:{online:e}}))},t=function(e){if(!window.offlineEnabled)return function(){};var t=function(t){return e(t.detail)};return window.addEventListener(v,t),function(){return window.removeEventListener(v,t)}},n=function(e){return e({online:!window.offlineEnabled||navigator.onLine}),t(e)},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};window.dispatchEvent(new CustomEvent(y,{detail:e}))},o=function(e){var t=function(t){return e(t.detail)};return window.addEventListener(y,t),function(){return window.removeEventListener(y,t)}},i=function(e){window.dispatchEvent(new CustomEvent(m,{detail:e}))},a=function(e){window.dispatchEvent(new CustomEvent(g,{detail:e}))},s=function(e){window.dispatchEvent(new CustomEvent(w,{detail:e}))},u=function(e){window.dispatchEvent(new CustomEvent(b,{detail:e}))},c=function(e){var t=function(t){return e(t.detail)};return window.addEventListener(m,t),function(){return window.removeEventListener(m,t)}},l=function(e){var t=function(t){return e(t.detail)};return window.addEventListener(g,t),function(){return window.removeEventListener(g,t)}},f=function(e){var t=function(t){return e(t.detail)};return window.addEventListener(b,t),function(){return window.removeEventListener(b,t)}},h=function(e){var t=function(t){return e(t.detail)};return window.addEventListener(w,t),function(){return window.removeEventListener(w,t)}},d={d:function(e,t){for(var n in t)d.o(t,n)&&!d.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},p={};d.r(p),d.d(p,{dispatchActionableNotificationShown:function(){return a},dispatchConnectivityChanged:function(){return e},dispatchNotificationShown:function(){return i},dispatchPrecacheStaticDependencies:function(){return r},dispatchSnackbarShown:function(){return s},dispatchToastShown:function(){return u},subscribeActionableNotificationShown:function(){return l},subscribeConnectivity:function(){return n},subscribeConnectivityChanged:function(){return t},subscribeNotificationShown:function(){return c},subscribePrecacheStaticDependencies:function(){return o},subscribeSnackbarShown:function(){return h},subscribeToastShown:function(){return f}});var v="openmrs:connectivity-changed",y="openmrs:precache-static-dependencies",m="openmrs:notification-shown",g="openmrs:actionable-notification-shown",b="openmrs:toast-shown",w="openmrs:snack-bar-shown";return p}())}}}))},593:(e,t,n)=>{function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function l(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function p(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}System.register(["@openmrs/esm-api","@openmrs/esm-state"],(function(e,t){var r={},i={};return{setters:[function(e){r.getLoggedInUser=e.getLoggedInUser},function(e){i.createGlobalStore=e.createGlobalStore}],execute:function(){e(function(){"use strict";var e={766:function(e){e.exports=r},685:function(e){e.exports=i}},t={};function p(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,p),o.exports}p.d=function(e,t){for(var n in t)p.o(t,n)&&!p.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},p.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},p.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var v={};return function(){var e=function(e,t){return new Promise((function(n){var r=new MessageChannel;r.port1.onmessage=function(e){n(e.data)},e.postMessage(t,[r.port2])}))},t=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},r=function(e,n){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)},i=function(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href},y=function(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)},m=function(){},g=function(e,t){if(!t)return e&&e.then?e.then(m):Promise.resolve()},b=function(e,t){if(void 0!==Dn)return console.warn("The application's Service Worker has already been registered. The new service worker at ".concat(e," will not be registered.")),Dn;if(!("serviceWorker"in navigator))throw new Error("Registering the Service Worker is not possible due to missing browser capabilities.");var n=new Cn(e,t);return Dn=n.register().then((function(){return n.controlling.then((function(){return n}))}))},w=function(){return null!=Dn?Dn:Promise.resolve(void 0)},S=function(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)},O=function(e){return Bn.apply(this,arguments)},E=function(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)},x=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){E(i,r,o,a,s,"next",e)}function s(e){E(i,r,o,a,s,"throw",e)}a(void 0)}))}},P=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},k=function(){return zn.apply(this,arguments)},j=function(){return Ln.apply(this,arguments)},A=function(){return Kn.apply(this,arguments)},T=function(){return Un.apply(this,arguments)},M=function(){return{current:Fn,notAvailable:"unavailable"===Fn,active:"on"===Fn}},C=function(e){"unavailable"!==Fn&&"unavailable"!==e&&(localStorage.setItem(Vn,"on"===e?"active":"disabled"),Fn=e)},D=function(){return Hn.apply(this,arguments)},I=function(e,t){return"object"!=typeof t||Wn(t).forEach((function(n){e[n]=t[n]})),e},R=function(e,t){return Yn.call(e,t)},N=function(e,t){"function"==typeof t&&(t=t($n(e))),("undefined"==typeof Reflect?Wn:Reflect.ownKeys)(t).forEach((function(n){B(e,n,t[n])}))},B=function(e,t,n,r){Qn(e,t,I(n&&R(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))},z=function(e){return{from:function(t){return e.prototype=Object.create(t.prototype),B(e.prototype,"constructor",e),{extend:N.bind(null,e.prototype)}}}},L=function(e,t,n){return Zn.call(e,t,n)},K=function(e,t){return t(e)},U=function(e){if(!e)throw new Error("Assertion Failed")},V=function(e){qn.setImmediate?setImmediate(e):setTimeout(e,0)},F=function(e,t){return e.reduce((function(e,n,r){var o=t(n,r);return o&&(e[o[0]]=o[1]),e}),{})},H=function(e){var t={};for(var n in e)R(e,n)&&(t[n]=e[n]);return t},q=function(e){return nr.apply([],e)},W=function(e){ir="undefined"!=typeof WeakMap&&new WeakMap;var t=ar(e);return ir=null,t},G=function(e){return sr.call(e).slice(8,-1)},$=function(e){var t,n,r,o;if(1===arguments.length){if(Gn(e))return e.slice();if(this===lr&&"string"==typeof e)return[e];if(o=cr(e)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n},Y=function(e,t){hr=e,dr=t},Q=function(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(dr).map((function(e){return"\n"+e})).join("")):""},J=function(e,t){this._e=vr(),this.name=e,this.message=t},X=function(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")},Z=function(e,t,n,r){this._e=vr(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=X(e,t)},ee=function(e,t){this._e=vr(),this.name="BulkError",this.failures=Object.keys(t).map((function(e){return t[e]})),this.failuresByPos=t,this.message=X(e,t)},te=function(){},ne=function(e){return e},re=function(e,t){return null==e||e===ne?t:function(n){return t(e(n))}},oe=function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}},ie=function(e,t){return e===te?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?oe(r,this.onsuccess):r),o&&(this.onerror=this.onerror?oe(o,this.onerror):o),void 0!==i?i:n}},ae=function(e,t){return e===te?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?oe(n,this.onsuccess):n),r&&(this.onerror=this.onerror?oe(r,this.onerror):r)}},se=function(e,t){return e===te?t:function(n){var r=e.apply(this,arguments);I(n,r);var o=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?oe(o,this.onsuccess):o),i&&(this.onerror=this.onerror?oe(i,this.onerror):i),void 0===r?void 0===a?void 0:a:I(r,a)}},ue=function(e,t){return e===te?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}},ce=function(e,t){return e===te?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return n.then((function(){return t.apply(r,i)}))}return t.apply(this,arguments)}},le=function(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=te,this._lib=!1;var t=this._PSD=Vr;if(hr&&(this._stackHolder=vr(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==Er)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&he(this,this._value))}this._state=null,this._value=null,++t.ref,Gr(this,e)},fe=function(e,t,n,r,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=o},he=function(e,t){if(zr.push(t),null===e._state){var n=e._lib&&ge();t=Kr(t),e._state=!1,e._value=t,hr&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,void 0)}catch(e){}}((function(){var n=Xn(t,"stack");t._promise=e,B(t,"stack",{get:function(){return Cr?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){Br.some((function(t){return t._value===e._value}))||Br.push(e)}(e),de(e),n&&be()}},de=function(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)pe(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),0===Hr&&(++Hr,Ir((function(){0==--Hr&&we()}),[]))},pe=function(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Hr,Ir(ve,[n,e,t])}else e._listeners.push(t)},ve=function(e,t,n){try{Lr=t;var r,o=t._value;t._state?r=e(o):(zr.length&&(zr=[]),r=e(o),-1===zr.indexOf(o)&&function(e){for(var t=Br.length;t;)if(Br[--t]._value===e._value)return void Br.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Lr=null,0==--Hr&&we(),--n.psd.ref||n.psd.finalize()}},ye=function(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)},me=function(){ge()&&be()},ge=function(){var e=Rr;return Rr=!1,Nr=!1,e},be=function(){var e,t,n;do{for(;Fr.length>0;)for(e=Fr,Fr=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Fr.length>0);Rr=!0,Nr=!0},we=function(){var e=Br;Br=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=qr.slice(0),n=t.length;n;)t[--n]()},_e=function(e){return new le(Er,!1,e)},Se=function(e,t){var n=Vr;return function(){var r=ge(),o=Vr;try{return Ae(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{Ae(o,!1),r&&be()}}},Oe=function(e,t,n,r){var o=Vr,i=Object.create(o);i.parent=o,i.ref=0,i.global=!1,i.id=++eo;var a=Ur.env;i.env=Mr?{Promise:le,PromiseProp:{value:le,configurable:!0,writable:!0},all:le.all,race:le.race,allSettled:le.allSettled,any:le.any,resolve:le.resolve,reject:le.reject,nthen:Ie(a.nthen,i),gthen:Ie(a.gthen,i)}:{},t&&I(i,t),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=Me(i,e,n,r);return 0===i.ref&&i.finalize(),s},Ee=function(){return Yr.id||(Yr.id=++Qr),++Yr.awaits,Yr.echoes+=100,Yr.id},xe=function(){return!!Yr.awaits&&(0==--Yr.awaits&&(Yr.id=0),Yr.echoes=100*Yr.awaits,!0)},Pe=function(e){return Yr.echoes&&e&&e.constructor===Tr?(Ee(),e.then((function(e){return xe(),e}),(function(e){return xe(),to(e)}))):e},ke=function(e){++Zr,Yr.echoes&&0!=--Yr.echoes||(Yr.echoes=Yr.id=0),Jr.push(Vr),Ae(e,!0)},je=function(){var e=Jr[Jr.length-1];Jr.pop(),Ae(e,!1)},Ae=function(e,t){var n=Vr;if((t?!Yr.echoes||Xr++&&e===Vr:!Xr||--Xr&&e===Vr)||Ce(t?ke.bind(null,e):je),e!==Vr&&(Vr=e,n===Ur&&(Ur.env=Te()),Mr)){var r=Ur.env.Promise,o=e.env;kr.then=o.nthen,r.prototype.then=o.gthen,(n.global||e.global)&&(Object.defineProperty(qn,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}},Te=function(){var e=qn.Promise;return Mr?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(qn,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:kr.then,gthen:e.prototype.then}:{}},Me=function(e,t,n,r,o){var i=Vr;try{return Ae(e,!0),t(n,r,o)}finally{Ae(i,!1)}},Ce=function(e){Ar.call(Pr,e)},De=function(e,t,n,r){return"function"!=typeof e?e:function(){var o=Vr;n&&Ee(),Ae(t,!0);try{return e.apply(this,arguments)}finally{Ae(o,!1),r&&Ce(xe)}}},Ie=function(e,t){return function(n,r){return e.call(this,De(n,t),De(r,t))}},Re=function(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,o={promise:t,reason:e};if(qn.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),I(r,o)):qn.CustomEvent&&I(r=new CustomEvent("unhandledrejection",{detail:o}),o),r&&qn.dispatchEvent&&(dispatchEvent(r),!qn.PromiseRejectionEvent&&qn.onunhandledrejection))try{qn.onunhandledrejection(r)}catch(e){}hr&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: ".concat(e.stack||e))}catch(e){}},Ne=function(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t},Be=function(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=W(t))[e],t}},ze=function(e){var t={},n=function(n,r){if(r){for(var o=arguments.length,i=new Array(o-1);--o;)i[o-1]=arguments[o];return t[n].subscribe.apply(null,i),e}if("string"==typeof n)return t[n]};n.addEventType=i;for(var r=1,o=arguments.length;r<o;++r)i(arguments[r]);return n;function i(e,r,o){if("object"==typeof e)return function(e){Wn(e).forEach((function(t){var n=e[t];if(Gn(n))i(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new _r.InvalidArgument("Invalid event config");var r=i(t,ne,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){V((function(){e.apply(null,t)}))}))}))}}))}(e);r||(r=ue),o||(o=te);var a={subscribers:[],fire:o,subscribe:function(e){-1===a.subscribers.indexOf(e)&&(a.subscribers.push(e),a.fire=r(a.fire,e))},unsubscribe:function(e){a.subscribers=a.subscribers.filter((function(t){return t!==e})),a.fire=a.subscribers.reduce(r,o)}};return t[e]=n[e]=a,a}},Le=function(e,t){return z(t).from({prototype:e}),t},Ke=function(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)},Ue=function(e,t){e.filter=Ne(e.filter,t)},Ve=function(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Ne(r(),t())}:t,e.justLimit=n&&!r},Fe=function(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new _r.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n},He=function(e,t,n){var r=Fe(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})},qe=function(e,t,n,r){var o=e.replayFilter?Ne(e.filter,e.replayFilter()):e.filter;if(e.or){var i={},a=function(e,n,r){if(!o||o(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var a=n.primaryKey,s=""+a;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(a)),R(i,s)||(i[s]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),We(He(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return We(He(e,r,n),Ne(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)},We=function(e,t,n,r){var o=Se(r?function(e,t,o){return n(r(e),t,o)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=te}),(function(t){e.fail(t),n=te}))||o(e.value,e,(function(e){return n=e})),n()}))}))},Ge=function(e){var t=void 0===e?"undefined":d(e);if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";var n=G(e);return"ArrayBuffer"===n?"binary":n},$e=function(e){return u(e,Uint8Array)?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)},Ye=function(e,t){return e<t?-1:e===t?0:1},Qe=function(e,t){return e>t?-1:e===t?0:1},Je=function(e,t,n){var r=u(e,yo)?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r},Xe=function(e){return new e.Collection(e,(function(){return nt("")})).limit(0)},Ze=function(e,t,n,r,o,i){for(var a=Math.min(e.length,r.length),s=-1,u=0;u<a;++u){var c=t[u];if(c!==r[u])return o(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):o(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;o(e[u],c)<0&&(s=u)}return a<r.length&&"next"===i?e+n.substr(e.length):a<e.length&&"prev"===i?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)},et=function(e,t,n,r){var o,i,a,s,u,c,l,f=n.length;if(!n.every((function(e){return"string"==typeof e})))return Je(e,"String expected.");function h(e){o=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),i=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),a="next"===e?Ye:Qe;var t=n.map((function(e){return{lower:i(e),upper:o(e)}})).sort((function(e,t){return a(e.lower,t.lower)}));s=t.map((function(e){return e.upper})),u=t.map((function(e){return e.lower})),c=e,l="next"===e?"":r}h("next");var d=new e.Collection(e,(function(){return tt(s[0],u[f-1]+r)}));d._ondirectionchange=function(e){h(e)};var p=0;return d._addAlgorithm((function(e,n,r){var o=e.key;if("string"!=typeof o)return!1;var h=i(o);if(t(h,u,p))return!0;for(var d=null,v=p;v<f;++v){var y=Ze(o,h,s[v],u[v],a,c);null===y&&null===d?p=v+1:(null===d||a(d,y)>0)&&(d=y)}return n(null!==d?function(){e.continue(d+l)}:r),!1})),d},tt=function(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}},nt=function(e){return{type:1,lower:e,upper:e}},rt=function(e){return Se((function(t){return ot(t),e(t.target.error),!1}))},ot=function(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()},it=function(e,t,n,r,o,i,a){return{name:e,keyPath:t,unique:n,multi:r,auto:o,compound:i,src:(n&&!a?"&":"")+(r?"*":"")+(o?"++":"")+at(t)}},at=function(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""},st=function(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:F(n,(function(e){return[e.name,e]}))}},ut=function(e){return null==e?function(){}:"string"==typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return er(t,e)}}(e):function(t){return er(t,e)}},ct=function(e){return[].slice.call(e)},lt=function(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")},ft=function(e,t){var n=e._novip,r=t.db,o=function(e,t,n,r){var o=n.IDBKeyRange,i=(n.indexedDB,function(e,t){return t.reduce((function(e,t){return c({},e,(0,t.create)(e))}),e)}(function(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,o=e.lowerOpen,i=e.upperOpen;return void 0===n?void 0===r?null:t.upperBound(r,!!i):void 0===r?t.lowerBound(n,!!o):t.bound(n,r,!!o,!!i)}var o=function(e,t){var n=ct(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=Gn(t),o=null==t,i={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:o,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:ut(t)},indexes:ct(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry,o=e.keyPath,a={name:t,compound:Gn(o),keyPath:o,unique:n,multiEntry:r,extractKey:ut(o)};return i[lt(o)]=a,a})),getIndexByKeyPath:function(e){return i[lt(e)]}};return i[":id"]=a.primaryKey,null!=t&&(i[lt(t)]=a.primaryKey),a}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),i=o.schema,a=o.hasGetAll,s=i.tables.map((function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(e){var n=e.trans,o=e.type,i=e.keys,a=e.values,s=e.range;return new Promise((function(e,u){e=Se(e);var c=n.objectStore(t),l=null==c.keyPath,h="put"===o||"add"===o;if(!h&&"delete"!==o&&"deleteRange"!==o)throw new Error("Invalid operation type: "+o);var d,p=(i||a||{length:1}).length;if(i&&a&&i.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===p)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var v=[],y=[],m=0,g=function(e){++m,ot(e)};if("deleteRange"===o){if(4===s.type)return e({numFailures:m,failures:y,results:[],lastResult:void 0});3===s.type?v.push(d=c.clear()):v.push(d=c.delete(r(s)))}else{var b=f(h?l?[a,i]:[a,null]:[i,null],2),w=b[0],_=b[1];if(h)for(var S=0;S<p;++S)v.push(d=_&&void 0!==_[S]?c[o](w[S],_[S]):c[o](w[S])),d.onerror=g;else for(var O=0;O<p;++O)v.push(d=c[o](w[O])),d.onerror=g}var E=function(t){var n=t.target.result;v.forEach((function(e,t){return null!=e.error&&(y[t]=e.error)})),e({numFailures:m,failures:y,results:"delete"===o?i:v.map((function(e){return e.result})),lastResult:n})};d.onerror=function(e){g(e),E(e)},d.onsuccess=E}))},getMany:function(e){var n=e.trans,r=e.keys;return new Promise((function(e,o){e=Se(e);for(var i,a=n.objectStore(t),s=r.length,u=new Array(s),c=0,l=0,f=function(t){var n=t.target;u[n._pos]=n.result,++l===c&&e(u)},h=rt(o),d=0;d<s;++d)null!=r[d]&&((i=a.get(r[d]))._pos=d,i.onsuccess=f,i.onerror=h,++c);0===c&&e(u)}))},get:function(e){var n=e.trans,r=e.key;return new Promise((function(e,o){e=Se(e);var i=n.objectStore(t).get(r);i.onsuccess=function(t){return e(t.target.result)},i.onerror=rt(o)}))},query:function(e){return function(n){return new Promise((function(o,i){o=Se(o);var a=n.trans,s=n.values,u=n.limit,c=n.query,l=u===1/0?void 0:u,f=c.index,h=c.range,d=a.objectStore(t),p=f.isPrimaryKey?d:d.index(f.name),v=r(h);if(0===u)return o({result:[]});if(e){var y=s?p.getAll(v,l):p.getAllKeys(v,l);y.onsuccess=function(e){return o({result:e.target.result})},y.onerror=rt(i)}else{var m=0,g=s||!("openKeyCursor"in p)?p.openCursor(v):p.openKeyCursor(v),b=[];g.onsuccess=function(e){var t=g.result;return t?(b.push(s?t.value:t.primaryKey),++m===u?o({result:b}):void t.continue()):o({result:b})},g.onerror=rt(i)}}))}}(a),openCursor:function(e){var n=e.trans,o=e.values,i=e.query,a=e.reverse,s=e.unique;return new Promise((function(e,u){e=Se(e);var c=i.index,l=i.range,f=n.objectStore(t),h=c.isPrimaryKey?f:f.index(c.name),d=a?s?"prevunique":"prev":s?"nextunique":"next",p=o||!("openKeyCursor"in h)?h.openCursor(r(l),d):h.openKeyCursor(r(l),d);p.onerror=rt(u),p.onsuccess=Se((function(t){var r=p.result;if(r){r.___id=++wo,r.done=!1;var o=r.continue.bind(r),i=r.continuePrimaryKey;i&&(i=i.bind(r));var a=r.advance.bind(r),s=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=Se(u),r.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var t=new Promise((function(e,t){e=Se(e),p.onerror=rt(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=s,e(t)}})),n=function(){if(p.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return p.onsuccess=Se((function(e){p.onsuccess=n,n()})),r.continue=o,r.continuePrimaryKey=i,r.advance=a,n(),t},e(r)}else e(null)}),u)}))},count:function(e){var n=e.query,o=e.trans,i=n.index,a=n.range;return new Promise((function(e,n){var s=o.objectStore(t),u=i.isPrimaryKey?s:s.index(i.name),c=r(a),l=c?u.count(c):u.count();l.onsuccess=Se((function(t){return e(t.target.result)})),l.onerror=rt(n)}))}}}(e)})),u={};return s.forEach((function(e){return u[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!u[e])throw new Error("Table '".concat(e,"' not found"));return u[e]},MIN_KEY:-1/0,MAX_KEY:bo(t),schema:i}}(t,o,r),e.dbcore));return{dbcore:i}}(n._middlewares,r,n._deps,t);n.core=o.dbcore,n.tables.forEach((function(e){var t=e.name;n.core.schema.tables.some((function(e){return e.name===t}))&&(e.core=n.core.table(t),u(n[t],n.Table)&&(n[t].core=e.core))}))},ht=function(e,t,n,r){var o=e._novip;n.forEach((function(e){var n=r[e];t.forEach((function(t){var r=Xn(t,e);(!r||"value"in r&&void 0===r.value)&&(t===o.Transaction.prototype||u(t,o.Transaction)?B(t,e,{get:function(){return this.table(e)},set:function(t){Qn(this,e,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):t[e]=new o.Table(e,n))}))}))},dt=function(e,t){var n=e._novip;t.forEach((function(e){for(var t in e)u(e[t],n.Table)&&delete e[t]}))},pt=function(e,t){return e._cfg.version-t._cfg.version},vt=function(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var o=e[n],i=t[n];if(o){var a={name:n,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||o.primKey.auto!==i.primKey.auto&&!ao)a.recreate=!0,r.change.push(a);else{var s=o.idxByName,u=i.idxByName,c=void 0;for(c in s)u[c]||a.del.push(c);for(c in u){var l=s[c],f=u[c];l?l.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&r.change.push(a)}}else r.add.push([n,i])}return r},yt=function(e,t,n,r){var o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return mt(o,e)})),o},mt=function(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})},gt=function(e,t,n){var r={};return L(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),o=t.keyPath,i=it(at(o),o||"",!1,!1,!!t.autoIncrement,o&&"string"!=typeof o,!0),a=[],s=0;s<t.indexNames.length;++s){var u=t.index(t.indexNames[s]);o=u.keyPath;var c=it(u.name,o,!!u.unique,!!u.multiEntry,!1,o&&"string"!=typeof o,!1);a.push(c)}r[e]=st(e,i,a)})),r},bt=function(e,t,n){for(var r=e._novip,o=n.db.objectStoreNames,i=0;i<o.length;++i){var a=o[i],s=n.objectStore(a);r._hasGetAll="getAll"in s;for(var c=0;c<s.indexNames.length;++c){var l=s.indexNames[c],f=s.index(l).keyPath,h="string"==typeof f?f:"["+L(f).join("+")+"]";if(t[a]){var d=t[a].idxByName[h];d&&(d.name=l,delete t[a].idxByName[h],t[a].idxByName[l]=d)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&qn.WorkerGlobalScope&&u(qn,qn.WorkerGlobalScope)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)},wt=function(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Mo("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")},_t=function(e){return e&&"function"==typeof e.databases},St=function(e){return Oe((function(){return Vr.letThrough=!0,e()}))},Ot=function(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()},Et=function(e){var t=function(t){return e.next(t)},n=o(t),r=o((function(t){return e.throw(t)}));function o(e){return function(t){var o=e(t),i=o.value;return o.done?i:i&&"function"==typeof i.then?i.then(n,r):Gn(i)?Promise.all(i).then(n,r):n(i)}}return o(t)()},xt=function(e,t,n){var r=arguments.length;if(r<2)throw new _r.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];return n=o.pop(),[e,q(o),n]},Pt=function(e,t,n){for(var r=Gn(e)?e.slice():[e],o=0;o<n;++o)r.push(t);return r},kt=function(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],o=0,i=0;o<t.keys.length&&i<e.length;++o)0===ho(t.keys[o],e[i])&&(r.push(n?W(t.values[o]):t.values[o]),++i);return r.length===e.length?r:null}catch(e){return null}},jt=function(e){return!("from"in e)},At=function(e,t){jt(t)||function e(t,n){var r=n.from,o=n.to,i=n.l,a=n.r;jo(t,r,o),i&&e(t,i),a&&e(t,a)}(e,t)},Tt=function(e){var t=jt(e)?null:{s:0,n:e};return{next:function(e){for(var n=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&ho(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||ho(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}},Mt=function(e){var t,n,r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),o=r>1?"r":r<-1?"l":"";if(o){var i="r"===o?"l":"r",a=c({},e),s=e[o];e.from=s.from,e.to=s.to,e[o]=s[o],a[o]=s[i],e[i]=a,a.d=Ct(a)}e.d=Ct(e)},Ct=function(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1},Dt=function(e,t){return Wn(t).forEach((function(n){At(e[n]||(e[n]=new ko),t[n])})),e},It=function(e){var t=Ro;try{Ro=!0,mo.storagemutated.fire(e)}finally{Ro=t}},Rt=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},Nt=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},Bt=function(){return new Vo},zt=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},Lt=function(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)},Kt=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Lt(i,r,o,a,s,"next",e)}function s(e){Lt(i,r,o,a,s,"throw",e)}a(void 0)}))}},Ut=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},Vt=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ut(e,t,n[t])}))}return e},Ft=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},Ht=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},qt=function(){return qo},Wt=function(){return Wo.apply(this,arguments)},Gt=function(){return $o.apply(this,arguments)},$t=function(e,t,n,r){return Yo.apply(this,arguments)},Yt=function(e,t,n){return Qo.apply(this,arguments)},Qt=function(e,t){return Jo.apply(this,arguments)},Jt=function(e,t){return Xo.apply(this,arguments)},Xt=function(e){return Zo.apply(this,arguments)},Zt=function(e){return ei.apply(this,arguments)},en=function(e){return ti.apply(this,arguments)},tn=function(e){var t;return!!(null===(t=Ho[e])||void 0===t?void 0:t.options.onBeginEditSyncItem)},nn=function(e){return ni.apply(this,arguments)},rn=function(e){return ri.apply(this,arguments)},on=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Ho[e]={type:e,dependsOn:t,process:n,options:r}},an=function(){if(!oi&&!(oi="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return oi(ai)},sn=function(){return li+ci()},un=function(e){return e.startsWith(li)},cn=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},ln=function(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)},fn=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ln(i,r,o,a,s,"next",e)}function s(e){ln(i,r,o,a,s,"throw",e)}a(void 0)}))}},hn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},dn=function(){return Object.values(fi)},pn=function(e){fi[e.id]&&console.warn('[setupDynamicOfflineDataHandler] Another second handler with the ID "'.concat(e.id,'" was registered. This handler will override the previous one. This could be unintended as the previous handler might run different flows than the newly registered one. If this is the case, ensure that you are setting up the handlers with different IDs.')),fi[e.id]=e},vn=function(e){return hi.apply(this,arguments)},yn=function(e,t){return di.apply(this,arguments)},mn=function(e,t){return pi.apply(this,arguments)},gn=function(e,t,n){return vi.apply(this,arguments)},bn=function(e,t){return yi.apply(this,arguments)},wn=function(e,t,n){return mi.apply(this,arguments)},_n=function(e,t){return gi.apply(this,arguments)},Sn=function(e,t,n){return bi.apply(this,arguments)},On=function(){return wi.apply(this,arguments)},En=function(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)},xn=function(){return jn(),_i},Pn=function(e,t){jn(),pn({type:"patient",displayName:t.displayName,id:e,isSynced:function(){return Promise.resolve(!0)},sync:function(e,n){return t.onOfflinePatientAdded({patientUuid:e,signal:null!=n?n:(new AbortController).signal})}})},kn=function(e){return Si.apply(this,arguments)},jn=function(){console.warn("The offline patient API has been deprecated and will be removed in a future release. To prevent future crashes, the functions remain available for the moment, but any invocations should be migrated ASAP.")};p.r(v),p.d(v,{activateOfflineCapability:function(){return D},beginEditSynchronizationItem:function(){return nn},canBeginEditSynchronizationItemsOfType:function(){return tn},deleteSynchronizationItem:function(){return rn},generateOfflineUuid:function(){return sn},getCurrentOfflineMode:function(){return M},getDynamicOfflineDataEntries:function(){return vn},getDynamicOfflineDataEntriesFor:function(){return yn},getDynamicOfflineDataHandlers:function(){return dn},getFullSynchronizationItems:function(){return Zt},getFullSynchronizationItemsFor:function(){return Jt},getOfflineDb:function(){return Bt},getOfflinePatientDataStore:function(){return xn},getOfflineSynchronizationStore:function(){return qt},getOmrsServiceWorker:function(){return w},getSynchronizationItem:function(){return en},getSynchronizationItems:function(){return Xt},getSynchronizationItemsFor:function(){return Qt},isOfflineUuid:function(){return un},messageOmrsServiceWorker:function(){return O},offlineUuidPrefix:function(){return li},omrsOfflineCachingStrategyHttpHeaderName:function(){return Nn},omrsOfflineResponseBodyHttpHeaderName:function(){return In},omrsOfflineResponseStatusHttpHeaderName:function(){return Rn},putDynamicOfflineData:function(){return mn},putDynamicOfflineDataFor:function(){return gn},queueSynchronizationItem:function(){return Yt},queueSynchronizationItemFor:function(){return $t},registerOfflinePatientHandler:function(){return Pn},registerOmrsServiceWorker:function(){return b},removeDynamicOfflineData:function(){return bn},removeDynamicOfflineDataFor:function(){return wn},runSynchronization:function(){return Wt},setCurrentOfflineMode:function(){return C},setupDynamicOfflineDataHandler:function(){return pn},setupOfflineSync:function(){return on},syncAllDynamicOfflineData:function(){return _n},syncDynamicOfflineData:function(){return Sn},syncOfflinePatientData:function(){return kn}});try{self["workbox:window:6.5.4"]&&_()}catch(e){}try{self["workbox:core:6.5.4"]&&_()}catch(e){}var An=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},Tn=function(e,t){this.type=e,Object.assign(this,t)},Mn={type:"SKIP_WAITING"},Cn=function(t){var n,r,o=function(e,n){var r,o;return void 0===n&&(n={}),(r=t.call(this)||this).nn={},r.tn=0,r.rn=new An,r.en=new An,r.on=new An,r.un=0,r.an=new Set,r.cn=function(){var e=r.fn,t=e.installing;r.tn>0||!i(t.scriptURL,r.sn.toString())||performance.now()>r.un+6e4?(r.vn=t,e.removeEventListener("updatefound",r.cn)):(r.hn=t,r.an.add(t),r.rn.resolve(t)),++r.tn,t.addEventListener("statechange",r.ln)},r.ln=function(e){var t=r.fn,n=e.target,o=n.state,i=n===r.vn,a={sw:n,isExternal:i,originalEvent:e};!i&&r.mn&&(a.isUpdate=!0),r.dispatchEvent(new Tn(o,a)),"installed"===o?r.wn=self.setTimeout((function(){"installed"===o&&t.waiting===n&&r.dispatchEvent(new Tn("waiting",a))}),200):"activating"===o&&(clearTimeout(r.wn),i||r.en.resolve(n))},r.dn=function(e){var t=r.hn,n=t!==navigator.serviceWorker.controller;r.dispatchEvent(new Tn("controlling",{isExternal:n,originalEvent:e,sw:t,isUpdate:r.mn})),n||r.on.resolve(t)},r.gn=(o=function(e){var t=e.data,n=e.ports,o=e.source;return y(r.getSW(),(function(){r.an.has(o)&&r.dispatchEvent(new Tn("message",{data:t,originalEvent:e,ports:n,sw:o}))}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(o.apply(this,e))}catch(e){return Promise.reject(e)}}),r.sn=e,r.nn=n,navigator.serviceWorker.addEventListener("message",r.gn),r};r=t,(n=o).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var a,s=o.prototype;return s.register=function(e){var t=(void 0===e?{}:e).immediate,n=void 0!==t&&t;try{var r=this;return function(e,t){var n=e();return n&&n.then?n.then(t):t()}((function(){if(!n&&"complete"!==document.readyState)return g(new Promise((function(e){return window.addEventListener("load",e)})))}),(function(){return r.mn=Boolean(navigator.serviceWorker.controller),r.yn=r.pn(),y(r.bn(),(function(e){r.fn=e,r.yn&&(r.hn=r.yn,r.en.resolve(r.yn),r.on.resolve(r.yn),r.yn.addEventListener("statechange",r.ln,{once:!0}));var t=r.fn.waiting;return t&&i(t.scriptURL,r.sn.toString())&&(r.hn=t,Promise.resolve().then((function(){r.dispatchEvent(new Tn("waiting",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),r.hn&&(r.rn.resolve(r.hn),r.an.add(r.hn)),r.fn.addEventListener("updatefound",r.cn),navigator.serviceWorker.addEventListener("controllerchange",r.dn),r.fn}))}))}catch(e){return Promise.reject(e)}},s.update=function(){try{return this.fn?g(this.fn.update()):void 0}catch(e){return Promise.reject(e)}},s.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},s.messageSW=function(t){try{return y(this.getSW(),(function(n){return e(n,t)}))}catch(e){return Promise.reject(e)}},s.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&e(this.fn.waiting,Mn)},s.pn=function(){var e=navigator.serviceWorker.controller;return e&&i(e.scriptURL,this.sn.toString())?e:void 0},s.bn=function(){try{var e=this;return function(t,n){try{var r=y(navigator.serviceWorker.register(e.sn,e.nn),(function(t){return e.un=performance.now(),t}))}catch(t){return n(t)}return r&&r.then?r.then(void 0,n):r}((function(){return y(navigator.serviceWorker.register(e.sn,e.nn),(function(t){return e.un=performance.now(),t}))}),(function(e){throw e}))}catch(e){return Promise.reject(e)}},(a=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(o.prototype,a),o}(function(){var e=function(){this.Pn=new Map},t=e.prototype;return t.addEventListener=function(e,t){this.Sn(e).add(t)},t.removeEventListener=function(e,t){this.Sn(e).delete(t)},t.dispatchEvent=function(e){e.target=this;for(var t,n=r(this.Sn(e.type));!(t=n()).done;)(0,t.value)(e)},t.Sn=function(e){return this.Pn.has(e)||this.Pn.set(e,new Set),this.Pn.get(e)},e}()),Dn=void 0,In="x-omrs-offline-response-body",Rn="x-omrs-offline-response-status",Nn="x-omrs-offline-caching-strategy";function Bn(){return Bn=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){S(i,r,o,a,s,"next",e)}function s(e){S(i,r,o,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(r){switch(r.label){case 0:return[4,w()];case 1:return(t=r.sent())?[4,t.messageSW(e)]:[3,3];case 2:return n=r.sent(),[3,4];case 3:n={success:!1,result:void 0,error:"No service worker has been registered. This is typically the case when the application has been built without offline-related features."},r.label=4;case 4:return[2,n]}}))})),Bn.apply(this,arguments)}function zn(){return zn=x((function(){var e;return P(this,(function(t){e=window.sessionStorage;try{e.setItem("someKeyHere","test"),e.removeItem("someKeyHere")}catch(t){if(t.code===DOMException.QUOTA_EXCEEDED_ERR&&0===e.length)return[2,!0]}return[2,!1]}))})),zn.apply(this,arguments)}function Ln(){return(Ln=x((function(){return P(this,(function(e){return[2,!window.indexedDB]}))}))).apply(this,arguments)}function Kn(){return Kn=x((function(){return P(this,(function(e){return[2,new Promise((function(e){var t=indexedDB.open("test");t.onerror=function(){return e(!0)},t.onsuccess=function(){return e(!1)}}))]}))})),Kn.apply(this,arguments)}function Un(){return(Un=x((function(){var e,t;return P(this,(function(n){switch(n.label){case 0:return[4,A()];case 1:return(t=n.sent())?[3,3]:[4,j()];case 2:t=n.sent(),n.label=3;case 3:return(e=t)?[3,5]:[4,k()];case 4:e=n.sent(),n.label=5;case 5:return[2,e]}}))}))).apply(this,arguments)}var Vn="openmrs3:offline-mode",Fn="unavailable";function Hn(){return(Hn=x((function(){return P(this,(function(e){switch(e.label){case 0:return[4,T()];case 1:return e.sent()||(Fn="active"===localStorage.getItem(Vn)?"on":"off"),navigator.onLine,[2]}}))}))).apply(this,arguments)}var qn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,Wn=Object.keys,Gn=Array.isArray;"undefined"==typeof Promise||qn.Promise||(qn.Promise=Promise);var $n=Object.getPrototypeOf,Yn={}.hasOwnProperty,Qn=Object.defineProperty,Jn=Object.getOwnPropertyDescriptor;function Xn(e,t){var n;return Jn(e,t)||(n=$n(e))&&Xn(n,t)}var Zn=[].slice;function er(e,t){if(R(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,o=t.length;r<o;++r){var i=er(e,t[r]);n.push(i)}return n}var a=t.indexOf(".");if(-1!==a){var s=e[t.substr(0,a)];return void 0===s?void 0:er(s,t.substr(a+1))}}function tr(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){U("string"!=typeof n&&"length"in n);for(var r=0,o=t.length;r<o;++r)tr(e,t[r],n[r])}else{var i=t.indexOf(".");if(-1!==i){var a=t.substr(0,i),s=t.substr(i+1);if(""===s)void 0===n?Gn(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var u=e[a];u&&R(e,a)||(u=e[a]={}),tr(u,s,n)}}else void 0===n?Gn(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}var nr=[].concat,rr="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(q([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return qn[e]})),or=rr.map((function(e){return qn[e]}));F(rr,(function(e){return[e,!0]}));var ir=null;function ar(e){if(!e||"object"!=typeof e)return e;var t=ir&&ir.get(e);if(t)return t;if(Gn(e)){t=[],ir&&ir.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(ar(e[n]))}else if(or.indexOf(e.constructor)>=0)t=e;else{var o=$n(e);for(var i in t=o===Object.prototype?{}:Object.create(o),ir&&ir.set(e,t),e)R(e,i)&&(t[i]=ar(e[i]))}return t}var sr={}.toString,ur="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",cr="symbol"==(void 0===ur?"undefined":d(ur))?function(e){var t;return null!=e&&(t=e[ur])&&t.apply(e)}:function(){return null},lr={},fr="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},hr="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),dr=function(){return!0},pr=!new Error("").stack;function vr(){if(pr)try{throw vr.arguments,new Error}catch(e){return e}return new Error}var yr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],mr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(yr),gr={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};z(J).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Q(this._e,2))}},toString:function(){return this.name+": "+this.message}}),z(Z).from(J),z(ee).from(J);var br=mr.reduce((function(e,t){return e[t]=t+"Error",e}),{}),wr=J,_r=mr.reduce((function(e,t){var n=function(e,n){this._e=vr(),this.name=r,e?"string"==typeof e?(this.message="".concat(e).concat(n?"\n "+n:""),this.inner=n||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=gr[t]||r,this.inner=null)},r=t+"Error";return z(n).from(wr),e[t]=n,e}),{});_r.Syntax=SyntaxError,_r.Type=TypeError,_r.Range=RangeError;var Sr=yr.reduce((function(e,t){return e[t+"Error"]=_r[t],e}),{}),Or=mr.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=_r[t]),e}),{});Or.ModifyError=Z,Or.DexieError=J,Or.BulkError=ee;var Er={},xr=f("undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,$n(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,$n(t),e]}(),3),Pr=xr[0],kr=xr[1],jr=xr[2],Ar=kr&&kr.then,Tr=Pr&&Pr.constructor,Mr=!!jr,Cr=!1,Dr=jr?function(){jr.then(me)}:qn.setImmediate?setImmediate.bind(null,me):qn.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){me(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(me,0)},Ir=function(e,t){Fr.push([e,t]),Nr&&(Dr(),Nr=!1)},Rr=!0,Nr=!0,Br=[],zr=[],Lr=null,Kr=ne,Ur={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Re,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{Re(e[0],e[1])}catch(e){}}))}},Vr=Ur,Fr=[],Hr=0,qr=[],Wr={get:function(){var e=function(e,r){var o=this,i=!t.global&&(t!==Vr||n!==Zr),a=i&&!xe(),s=new le((function(n,s){pe(o,new fe(De(e,t,i,a),De(r,t,i,a),n,s,t))}));return hr&&ye(s,this),s},t=Vr,n=Zr;return e.prototype=Er,e},set:function(e){B(this,"then",e&&e.prototype===Er?Wr:{get:function(){return e},set:Wr.set})}};function Gr(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&ge();t&&"function"==typeof t.then?Gr(e,(function(e,n){u(t,le)?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,de(e)),n&&be()}}),he.bind(null,e))}catch(t){he(e,t)}}function $r(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var o,i,a=e._value;null!=a?(o=a.name||"Error",i=a.message||a,r=Q(a,0)):(o=a,i=""),t.push(o+(i?": "+i:"")+r)}return hr&&((r=Q(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&$r(e._prev,t,n)),t}N(le.prototype,{then:Wr,_then:function(e,t){pe(this,new fe(null,null,e,t,Vr))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return u(e,t)?n(e):_e(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):_e(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),_e(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{Cr=!0;var e=$r(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Cr=!1}}},timeout:function(e,t){var n=this;return e<1/0?new le((function(r,o){var i=setTimeout((function(){return o(new _r.Timeout(t))}),e);n.then(r,o).finally(clearTimeout.bind(null,i))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&B(le.prototype,Symbol.toStringTag,"Dexie.Promise"),Ur.env=Te(),N(le,{all:function(){var e=$.apply(null,arguments).map(Pe);return new le((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(o,i){return le.resolve(o).then((function(n){e[i]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(u(e,le))return e;if(e&&"function"==typeof e.then)return new le((function(t,n){e.then(t,n)}));var t=new le(Er,!0,e);return ye(t,Lr),t},reject:_e,race:function(){var e=$.apply(null,arguments).map(Pe);return new le((function(t,n){e.map((function(e){return le.resolve(e).then(t,n)}))}))},PSD:{get:function(){return Vr},set:function(e){return Vr=e}},totalEchoes:{get:function(){return Zr}},newPSD:Oe,usePSD:Me,scheduler:{get:function(){return Ir},set:function(e){Ir=e}},rejectionMapper:{get:function(){return Kr},set:function(e){Kr=e}},follow:function(e,t){return new le((function(n,r){return Oe((function(t,n){var r=Vr;r.unhandleds=[],r.onunhandled=n,r.finalize=oe((function(){var e=this;!function(e){qr.push((function t(){e(),qr.splice(qr.indexOf(t),1)})),++Hr,Ir((function(){0==--Hr&&we()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}}),Tr&&(Tr.allSettled&&B(le,"allSettled",(function(){var e=$.apply(null,arguments).map(Pe);return new le((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,o){return le.resolve(e).then((function(e){return r[o]={status:"fulfilled",value:e}}),(function(e){return r[o]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),Tr.any&&"undefined"!=typeof AggregateError&&B(le,"any",(function(){var e=$.apply(null,arguments).map(Pe);return new le((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,o=new Array(r);e.forEach((function(e,i){return le.resolve(e).then((function(e){return t(e)}),(function(e){o[i]=e,--r||n(new AggregateError(o))}))}))}))})));var Yr={awaits:0,echoes:0,id:0},Qr=0,Jr=[],Xr=0,Zr=0,eo=0;-1===(""+Ar).indexOf("[native code]")&&(Ee=xe=te);var to=le.reject;function no(e,t,n,r){if(e.idbdb&&(e._state.openComplete||Vr.letThrough||e._vip)){var o=e._createTransaction(t,n,e._dbSchema);try{o.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===br.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((function(){return no(e,t,n,r)}))):to(o)}return o._promise(t,(function(e,t){return Oe((function(){return Vr.trans=o,r(e,t,o)}))})).then((function(e){return o._completion.then((function(){return e}))}))}if(e._state.openComplete)return to(new _r.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return to(new _r.DatabaseClosed);e.open().catch(te)}return e._state.dbReadyPromise.then((function(){return no(e,t,n,r)}))}var ro=String.fromCharCode(65535),oo="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",io=[],ao="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),so=ao,uo=ao,co=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},lo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1},fo=function(){function e(){o(this,e)}return a(e,[{key:"_trans",value:function(e,t,n){var r=function(e,n,r){if(!r.schema[i])throw new _r.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)},o=this._tx||Vr.trans,i=this.name,a=ge();try{return o&&o.db===this.db?o===Vr.trans?o._promise(e,r,n):Oe((function(){return o._promise(e,r,n)}),{trans:o,transless:Vr.transless||Vr}):no(this.db,e,[this.name],r)}finally{a&&be()}}},{key:"get",value:function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)}},{key:"where",value:function(e){var t=function(e,t){try{return 0===i.cmp(e,t)}catch(e){return!1}};if("string"==typeof e)return new this.db.WhereClause(this,e);if(Gn(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var n=Wn(e);if(1===n.length)return this.where(n[0]).equals(e[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&n.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return n.indexOf(e)>=0}))}))[0];if(r&&this.db._maxKey!==ro)return this.where(r.name).equals(r.keyPath.map((function(t){return e[t]})));!r&&hr&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit of a compound index [").concat(n.join("+"),"]"));var o=this.schema.idxByName,i=this.db._deps.indexedDB,a=f(n.reduce((function(n,r){var i=f(n,2),a=i[0],s=i[1],u=o[r],c=e[r];return[a||u,a||!u?Ne(s,u&&u.multi?function(e){var n=er(e,r);return Gn(n)&&n.some((function(e){return t(c,e)}))}:function(e){return t(c,er(e,r))}):s]}),[null,null]),2),s=a[0],u=a[1];return s?this.where(s.name).equals(e[s.keyPath]).filter(u):r?this.filter(u):this.where(n).equals("")}},{key:"filter",value:function(e){return this.toCollection().and(e)}},{key:"count",value:function(e){return this.toCollection().count(e)}},{key:"offset",value:function(e){return this.toCollection().offset(e)}},{key:"limit",value:function(e){return this.toCollection().limit(e)}},{key:"each",value:function(e){return this.toCollection().each(e)}},{key:"toArray",value:function(e){return this.toCollection().toArray(e)}},{key:"toCollection",value:function(){return new this.db.Collection(new this.db.WhereClause(this))}},{key:"orderBy",value:function(e){return new this.db.Collection(new this.db.WhereClause(this,Gn(e)?"[".concat(e.join("+"),"]"):e))}},{key:"reverse",value:function(){return this.toCollection().reverse()}},{key:"mapToClass",value:function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(R(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}},{key:"defineClass",value:function(){return this.mapToClass((function(e){I(this,e)}))}},{key:"add",value:function(e,t){var n=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,a=e;return i&&o&&(a=Be(i)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})})).then((function(e){return e.numFailures?le.reject(e.failures[0]):e.lastResult})).then((function(t){if(i)try{tr(e,i,t)}catch(e){}return t}))}},{key:"update",value:function(e,t){if("object"!=typeof e||Gn(e))return this.where(":id").equals(e).modify(t);var n=er(e,this.schema.primKey.keyPath);if(void 0===n)return to(new _r.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?Wn(t).forEach((function(n){tr(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)}},{key:"put",value:function(e,t){var n=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,a=e;return i&&o&&(a=Be(i)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?le.reject(e.failures[0]):e.lastResult})).then((function(t){if(i)try{tr(e,i,t)}catch(e){}return t}))}},{key:"delete",value:function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?le.reject(e.failures[0]):void 0}))}},{key:"clear",value:function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:lo})})).then((function(e){return e.numFailures?le.reject(e.failures[0]):void 0}))}},{key:"bulkGet",value:function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))}},{key:"bulkAdd",value:function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0,i=(n=n||(o?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,s=n.keyPath;if(s&&o)throw new _r.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new _r.InvalidArgument("Arguments objects and keys must have the same length");var u=e.length,c=s&&a?e.map(Be(s)):e;return r.core.mutate({trans:t,type:"add",keys:o,values:c,wantResults:i}).then((function(e){var t=e.numFailures,n=e.results,o=e.lastResult,a=e.failures;if(0===t)return i?n:o;throw new ee("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(u," operations failed"),a)}))}))}},{key:"bulkPut",value:function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0,i=(n=n||(o?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,s=n.keyPath;if(s&&o)throw new _r.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new _r.InvalidArgument("Arguments objects and keys must have the same length");var u=e.length,c=s&&a?e.map(Be(s)):e;return r.core.mutate({trans:t,type:"put",keys:o,values:c,wantResults:i}).then((function(e){var t=e.numFailures,n=e.results,o=e.lastResult,a=e.failures;if(0===t)return i?n:o;throw new ee("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(u," operations failed"),a)}))}))}},{key:"bulkDelete",value:function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,o=e.lastResult,i=e.failures;if(0===r)return o;throw new ee("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),i)}))}}]),e}();function ho(e,t){try{var n=Ge(e),r=Ge(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){for(var n=e.length,r=t.length,o=n<r?n:r,i=0;i<o;++i)if(e[i]!==t[i])return e[i]<t[i]?-1:1;return n===r?0:n<r?-1:1}($e(e),$e(t));case"Array":return function(e,t){for(var n=e.length,r=t.length,o=n<r?n:r,i=0;i<o;++i){var a=ho(e[i],t[i]);if(0!==a)return a}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}var po=function(){function e(){o(this,e)}return a(e,[{key:"_read",value:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,to.bind(null,n.error)):n.table._trans("readonly",e).then(t)}},{key:"_write",value:function(e){var t=this._ctx;return t.error?t.table._trans(null,to.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}},{key:"_addAlgorithm",value:function(e){var t=this._ctx;t.algorithm=Ne(t.algorithm,e)}},{key:"_iterate",value:function(e,t){return qe(this._ctx,e,t,this._ctx.table.core)}},{key:"clone",value:function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&I(n,e),t._ctx=n,t}},{key:"raw",value:function(){return this._ctx.valueMapper=null,this}},{key:"each",value:function(e){var t=this._ctx;return this._read((function(n){return qe(t,e,n,t.table.core)}))}},{key:"count",value:function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(Ke(n,!0))return r.count({trans:e,query:{index:Fe(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var o=0;return qe(n,(function(){return++o,!1}),e,r).then((function(){return o}))})).then(e)}},{key:"sortBy",value:function(e,t){var n=function(e,t){var n=a(e,i),r=a(t,i);return n<r?-s:n>r?s:0},r=e.split(".").reverse(),o=r[0],i=r.length-1;function a(e,t){return t?a(e[r[t]],t-1):e[o]}var s="next"===this._ctx.dir?1:-1;return this.toArray((function(e){return e.sort(n)})).then(t)}},{key:"toArray",value:function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&Ke(n,!0)&&n.limit>0){var r=n.valueMapper,o=Fe(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:o,range:n.range}}).then((function(e){var t=e.result;return r?t.map(r):t}))}var i=[];return qe(n,(function(e){return i.push(e)}),e,n.table.core).then((function(){return i}))}),e)}},{key:"offset",value:function(e){var t=this._ctx;return e<=0||(t.offset+=e,Ke(t)?Ve(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):Ve(t,(function(){var t=e;return function(){return--t<0}}))),this}},{key:"limit",value:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Ve(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this}},{key:"until",value:function(e,t){return Ue(this._ctx,(function(n,r,o){return!e(n.value)||(r(o),t)})),this}},{key:"first",value:function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}},{key:"last",value:function(e){return this.reverse().first(e)}},{key:"filter",value:function(e){var t,n;return Ue(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=Ne(t.isMatch,n),this}},{key:"and",value:function(e){return this.filter(e)}},{key:"or",value:function(e){return new this.db.WhereClause(this._ctx.table,e,this)}},{key:"reverse",value:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}},{key:"desc",value:function(){return this.reverse()}},{key:"eachKey",value:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}},{key:"eachUniqueKey",value:function(e){return this._ctx.unique="unique",this.eachKey(e)}},{key:"eachPrimaryKey",value:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}},{key:"keys",value:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}},{key:"primaryKeys",value:function(e){var t=this._ctx;if("next"===t.dir&&Ke(t,!0)&&t.limit>0)return this._read((function(e){var n=Fe(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}},{key:"uniqueKeys",value:function(e){return this._ctx.unique="unique",this.keys(e)}},{key:"firstKey",value:function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}},{key:"lastKey",value:function(e){return this.reverse().firstKey(e)}},{key:"distinct",value:function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Ue(this._ctx,(function(e){var t=e.primaryKey.toString(),r=R(n,t);return n[t]=!0,!r})),this}},{key:"modify",value:function(e){var t=this,n=this._ctx;return this._write((function(r){var o;if("function"==typeof e)o=e;else{var i=Wn(e),a=i.length;o=function(t){for(var n=!1,r=0;r<a;++r){var o=i[r],s=e[o];er(t,o)!==s&&(tr(t,o,s),n=!0)}return n}}var s=n.table.core,u=s.schema.primaryKey,c=u.outbound,l=u.extractKey,f=t.db._options.modifyChunkSize||200,h=[],d=0,p=[],v=function(e,t){var n=t.failures,r=t.numFailures;d+=e-r;var o=!0,i=!1,a=void 0;try{for(var s,u=Wn(n)[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=s.value;h.push(n[c])}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}};return t.clone().primaryKeys().then((function(t){var i=function(a){var u=Math.min(f,t.length-a);return s.getMany({trans:r,keys:t.slice(a,a+u),cache:"immutable"}).then((function(h){for(var d=[],p=[],y=c?[]:null,m=[],g=0;g<u;++g){var b=h[g],w={value:W(b),primKey:t[a+g]};!1!==o.call(w,w.value,w)&&(null==w.value?m.push(t[a+g]):c||0===ho(l(b),l(w.value))?(p.push(w.value),c&&y.push(t[a+g])):(m.push(t[a+g]),d.push(w.value)))}var _=Ke(n)&&n.limit===1/0&&("function"!=typeof e||e===vo)&&{index:n.index,range:n.range};return Promise.resolve(d.length>0&&s.mutate({trans:r,type:"add",values:d}).then((function(e){for(var t in e.failures)m.splice(parseInt(t),1);v(d.length,e)}))).then((function(){return(p.length>0||_&&"object"==typeof e)&&s.mutate({trans:r,type:"put",keys:y,values:p,criteria:_,changeSpec:"function"!=typeof e&&e}).then((function(e){return v(p.length,e)}))})).then((function(){return(m.length>0||_&&e===vo)&&s.mutate({trans:r,type:"delete",keys:m,criteria:_}).then((function(e){return v(m.length,e)}))})).then((function(){return t.length>a+u&&i(a+f)}))}))};return i(0).then((function(){if(h.length>0)throw new Z("Error modifying one or more objects",h,d,p);return t.length}))}))}))}},{key:"delete",value:function(){var e=this._ctx,t=e.range;return Ke(e)&&(e.isPrimKey&&!uo||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,o=t;return e.table.core.count({trans:n,query:{index:r,range:o}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:o}).then((function(e){var n=e.failures,r=(e.lastResult,e.results,e.numFailures);if(r)throw new Z("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-r);return t-r}))}))})):this.modify(vo)}}]),e}(),vo=function(e,t){return t.value=null},yo=function(){function e(){o(this,e)}return a(e,[{key:"Collection",get:function(){return this._ctx.table.db.Collection}},{key:"between",value:function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Xe(this):new this.Collection(this,(function(){return tt(e,t,!n,!r)}))}catch(e){return Je(this,oo)}}},{key:"equals",value:function(e){return null==e?Je(this,oo):new this.Collection(this,(function(){return nt(e)}))}},{key:"above",value:function(e){return null==e?Je(this,oo):new this.Collection(this,(function(){return tt(e,void 0,!0)}))}},{key:"aboveOrEqual",value:function(e){return null==e?Je(this,oo):new this.Collection(this,(function(){return tt(e,void 0,!1)}))}},{key:"below",value:function(e){return null==e?Je(this,oo):new this.Collection(this,(function(){return tt(void 0,e,!1,!0)}))}},{key:"belowOrEqual",value:function(e){return null==e?Je(this,oo):new this.Collection(this,(function(){return tt(void 0,e)}))}},{key:"startsWith",value:function(e){return"string"!=typeof e?Je(this,"String expected."):this.between(e,e+ro,!0,!0)}},{key:"startsWithIgnoreCase",value:function(e){return""===e?this.startsWith(e):et(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],ro)}},{key:"equalsIgnoreCase",value:function(e){return et(this,(function(e,t){return e===t[0]}),[e],"")}},{key:"anyOfIgnoreCase",value:function(){var e=$.apply(lr,arguments);return 0===e.length?Xe(this):et(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")}},{key:"startsWithAnyOfIgnoreCase",value:function(){var e=$.apply(lr,arguments);return 0===e.length?Xe(this):et(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,ro)}},{key:"anyOf",value:function(){var e=this,t=$.apply(lr,arguments),n=this._cmp;try{t.sort(n)}catch(e){return Je(this,oo)}if(0===t.length)return Xe(this);var r=new this.Collection(this,(function(){return tt(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var o=0;return r._addAlgorithm((function(e,r,i){for(var a=e.key;n(a,t[o])>0;)if(++o===t.length)return r(i),!1;return 0===n(a,t[o])||(r((function(){e.continue(t[o])})),!1)})),r}},{key:"notEqual",value:function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}},{key:"noneOf",value:function(){var e=$.apply(lr,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Je(this,oo)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}},{key:"inAnyRange",value:function(e,t){var n=this,r=function(e,t){return h(e[0],t[0])},o=this._cmp,i=this._ascending,a=this._descending,s=this._min,u=this._max;if(0===e.length)return Xe(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return Je(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",_r.InvalidArgument);var c,l=!t||!1!==t.includeLowers,f=t&&!0===t.includeUppers,h=i;try{c=e.reduce((function(e,t){for(var n=0,r=e.length;n<r;++n){var i=e[n];if(o(t[0],i[1])<0&&o(t[1],i[0])>0){i[0]=s(i[0],t[0]),i[1]=u(i[1],t[1]);break}}return n===r&&e.push(t),e}),[]),c.sort(r)}catch(e){return Je(this,oo)}var d=0,p=f?function(e){return i(e,c[d][1])>0}:function(e){return i(e,c[d][1])>=0},v=l?function(e){return a(e,c[d][0])>0}:function(e){return a(e,c[d][0])>=0},y=p,m=new this.Collection(this,(function(){return tt(c[0][0],c[c.length-1][1],!l,!f)}));return m._ondirectionchange=function(e){"next"===e?(y=p,h=i):(y=v,h=a),c.sort(r)},m._addAlgorithm((function(e,t,r){for(var o=e.key;y(o);)if(++d===c.length)return t(r),!1;return!!function(e){return!p(e)&&!v(e)}(o)||(0===n._cmp(o,c[d][1])||0===n._cmp(o,c[d][0])||t((function(){h===i?e.continue(c[d][0]):e.continue(c[d][1])})),!1)})),m}},{key:"startsWithAnyOf",value:function(){var e=$.apply(lr,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?Xe(this):this.inAnyRange(e.map((function(e){return[e,e+ro]}))):Je(this,"startsWithAnyOf() only works with strings")}}]),e}(),mo=ze(null,"storagemutated"),go=function(){function e(){o(this,e)}return a(e,[{key:"_lock",value:function(){return U(!Vr.global),++this._reculock,1!==this._reculock||Vr.global||(Vr.lockOwnerFor=this),this}},{key:"_unlock",value:function(){if(U(!Vr.global),0==--this._reculock)for(Vr.global||(Vr.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Me(e[1],e[0])}catch(e){}}return this}},{key:"_locked",value:function(){return this._reculock&&Vr.lockOwnerFor!==this}},{key:"create",value:function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(U(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new _r.DatabaseClosed(r);case"MissingAPIError":throw new _r.MissingAPI(r.message,r);default:throw new _r.OpenFailed(r)}if(!this.active)throw new _r.TransactionInactive;return U(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Se((function(n){ot(n),t._reject(e.error)})),e.onabort=Se((function(n){ot(n),t.active&&t._reject(new _r.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=Se((function(){t.active=!1,t._resolve(),"mutatedParts"in e&&mo.storagemutated.fire(e.mutatedParts)})),this}},{key:"_promise",value:function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return to(new _r.ReadOnly("Transaction is readonly"));if(!this.active)return to(new _r.TransactionInactive);if(this._locked())return new le((function(o,i){r._blockedFuncs.push([function(){r._promise(e,t,n).then(o,i)},Vr])}));if(n)return Oe((function(){var e=new le((function(e,n){r._lock();var o=t(e,n,r);o&&o.then&&o.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var o=new le((function(e,n){var o=t(e,n,r);o&&o.then&&o.then(e,n)}));return o._lib=!0,o}},{key:"_root",value:function(){return this.parent?this.parent._root():this}},{key:"waitFor",value:function(e){var t=this._root(),n=le.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var o=t._waitingFor;return new le((function(e,r){n.then((function(n){return t._waitingQueue.push(Se(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(Se(r.bind(null,e)))})).finally((function(){t._waitingFor===o&&(t._waitingFor=null)}))}))}},{key:"abort",value:function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new _r.Abort))}},{key:"table",value:function(e){var t=this._memoizedTables||(this._memoizedTables={});if(R(t,e))return t[e];var n=this.schema[e];if(!n)throw new _r.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}]),e}(),bo=function(e){try{return e.only([[]]),bo=function(){return[[]]},[[]]}catch(e){return bo=function(){return ro},ro}},wo=0,_o=function(){function e(){o(this,e)}return a(e,[{key:"_parseStoresSpec",value:function(e,t){Wn(e).forEach((function(n){if(null!==e[n]){var r=e[n].split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return it(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),Gn(r),0===t)})),o=r.shift();if(o.multi)throw new _r.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new _r.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new _r.Schema("Index must have a name and cannot be an empty string")})),t[n]=st(n,o,r)}}))}},{key:"stores",value:function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?I(this._cfg.storesSource,e):e;var n=t._versions,r={},o={};return n.forEach((function(e){I(r,e._cfg.storesSource),o=e._cfg.dbschema={},e._parseStoresSpec(r,o)})),t._dbSchema=o,dt(t,[t._allTables,t,t.Transaction.prototype]),ht(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],Wn(o),o),t._storeNames=Wn(o),this}},{key:"upgrade",value:function(e){return this._cfg.contentUpgrade=ce(this._cfg.contentUpgrade||te,e),this}}]),e}();function So(e,t,n,r,o){return le.resolve().then((function(){var i=Vr.transless||Vr,a=e._createTransaction(t,n,e._dbSchema,r),s={trans:a,transless:i};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===br.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((function(){return So(e,t,n,null,o)}))):to(r)}var u,c=fr(o);c&&Ee();var l=le.follow((function(){if(u=o.call(a,a))if(c){var e=xe.bind(null,null);u.then(e,e)}else"function"==typeof u.next&&"function"==typeof u.throw&&(u=Et(u))}),s);return(u&&"function"==typeof u.then?le.resolve(u).then((function(e){return a.active?e:to(new _r.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):l.then((function(){return u}))).then((function(e){return r&&a._resolve(),a._completion.then((function(){return e}))})).catch((function(e){return a._reject(e),to(e)}))}))}var Oo={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return l(c({},e),{table:function(t){var n=function(t){var n,r,o=t.query.index;return o.isVirtual?l(c({},t),{query:{index:o,range:(n=t.query.range,r=o.keyTail,{type:1===n.type?2:n.type,lower:Pt(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,r),lowerOpen:!0,upper:Pt(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,r),upperOpen:!0})}}):t},r=e.table(t),o=r.schema,i={},a=[];function s(e,t,n){var r=lt(e),o=i[r]=i[r]||[],u=null==e?0:"string"==typeof e?1:e.length,f=t>0,h=l(c({},n),{isVirtual:f,keyTail:t,keyLength:u,extractKey:ut(e),unique:!f&&n.unique});return o.push(h),h.isPrimaryKey||a.push(h),u>1&&s(2===u?e[0]:e.slice(0,u-1),t+1,n),o.sort((function(e,t){return e.keyTail-t.keyTail})),h}var u=s(o.primaryKey.keyPath,0,o.primaryKey);i[":id"]=[u];var f=!0,h=!1,d=void 0;try{for(var p,v=o.indexes[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var y=p.value;s(y.keyPath,0,y)}}catch(e){h=!0,d=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}var m=l(c({},r),{schema:l(c({},o),{primaryKey:u,indexes:a,getIndexByKeyPath:function(e){var t=i[lt(e)];return t&&t[0]}}),count:function(e){return r.count(n(e))},query:function(e){return r.query(n(e))},openCursor:function(t){var o=t.query.index,i=o.keyTail,a=o.isVirtual,s=o.keyLength;return a?r.openCursor(n(t)).then((function(n){return n&&function(n){var r=Object.create(n,{continue:{value:function(r){null!=r?n.continue(Pt(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(n.key.slice(0,s).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Pt(t,e.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===s?e[0]:e.slice(0,s)}},value:{get:function(){return n.value}}});return r}(n)})):r.openCursor(t)}});return m}})}};function Eo(e,t,n,r){return n=n||{},r=r||"",Wn(e).forEach((function(o){if(R(t,o)){var i=e[o],a=t[o];if("object"==typeof i&&"object"==typeof a&&i&&a){var s=G(i);s!==G(a)?n[r+o]=t[o]:"Object"===s?Eo(i,a,n,r+o+"."):i!==a&&(n[r+o]=t[o])}else i!==a&&(n[r+o]=t[o])}else n[r+o]=void 0})),Wn(t).forEach((function(o){R(e,o)||(n[r+o]=t[o])})),n}var xo={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return l(c({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,o=l(c({},n),{mutate:function(e){var o=function(e){var t=Vr.trans,o=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!o)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?l(c({},e),{keys:o}):c({},e)).type&&(e.values=h(e.values)),e.keys&&(e.keys=h(e.keys)),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,o).then((function(i){var a=o.map((function(n,o){var a=i[o],c={onerror:null,onsuccess:null};if("delete"===e.type)s.fire.call(c,n,a,t);else if("add"===e.type||void 0===a){var l=u.fire.call(c,n,e.values[o],t);null==n&&null!=l&&(n=l,e.keys[o]=n,r.outbound||tr(e.values[o],r.keyPath,n))}else{var h=Eo(a,e.values[o]),d=f.fire.call(c,h,n,a,t);if(d){var p=e.values[o];Object.keys(d).forEach((function(e){R(p,e)?p[e]=d[e]:tr(p,e,d[e])}))}}return c}));return n.mutate(e).then((function(t){for(var n=t.failures,r=t.results,s=t.numFailures,u=t.lastResult,c=0;c<o.length;++c){var l=r?r[c]:o[c],f=a[c];null==l?f.onerror&&f.onerror(n[c]):f.onsuccess&&f.onsuccess("put"===e.type&&i[c]?e.values[c]:l)}return{failures:n,results:r,numFailures:s,lastResult:u}})).catch((function(e){return a.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))},i=Vr.trans,a=i.table(t).hook,s=a.deleting,u=a.creating,f=a.updating;switch(e.type){case"add":if(u.fire===te)break;return i._promise("readwrite",(function(){return o(e)}),!0);case"put":if(u.fire===te&&f.fire===te)break;return i._promise("readwrite",(function(){return o(e)}),!0);case"delete":if(s.fire===te)break;return i._promise("readwrite",(function(){return o(e)}),!0);case"deleteRange":if(s.fire===te)break;return i._promise("readwrite",(function(){return function(e){return d(e.trans,e.range,1e4)}(e)}),!0)}return n.mutate(e);function d(e,t,i){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:i}).then((function(n){var r=n.result;return o({type:"delete",keys:r,trans:e}).then((function(n){return n.numFailures>0?Promise.reject(n.failures[0]):r.length<i?{failures:[],numFailures:0,lastResult:void 0}:d(e,l(c({},t),{lower:r[r.length-1],lowerOpen:!0}),i)}))}))}}});return o}})}},Po={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return l(c({},n),{getMany:function(e){if(!e.cache)return n.getMany(e);var t=kt(e.keys,e.trans._cache,"clone"===e.cache);return t?le.resolve(t):n.getMany(e).then((function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?W(t):t},t}))},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),n.mutate(e)}})}}}},ko=function(e,t){if(!this){var n=new ko;return e&&"d"in e&&I(n,e),n}I(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function jo(e,t,n){var r=ho(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(jt(e))return I(e,{from:t,to:n,d:1});var o=e.l,i=e.r;if(ho(n,e.from)<0)return o?jo(o,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Mt(e);if(ho(t,e.to)>0)return i?jo(i,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Mt(e);ho(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),ho(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var a=!e.r;o&&!e.l&&At(e,o),i&&a&&At(e,i)}}N(ko.prototype,s({add:function(e){return At(this,e),this},addKey:function(e){return jo(this,e,e),this},addKeys:function(e){var t=this;return e.forEach((function(e){return jo(t,e,e)})),this}},ur,(function(){return Tt(this)})));var Ao,To={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new ko(e.MIN_KEY,e.MAX_KEY);return l(c({},e),{table:function(r){var o=e.table(r),i=o.schema,a=i.primaryKey,s=a.extractKey,u=a.outbound,h=l(c({},o),{mutate:function(e){var a=e.trans,s=a.mutatedParts||(a.mutatedParts={}),u=function(e){var n="idb://".concat(t,"/").concat(r,"/").concat(e);return s[n]||(s[n]=new ko)},c=u(""),l=u(":dels"),h=e.type,d=f("deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[],2),p=d[0],v=d[1],y=e.trans._cache;return o.mutate(e).then((function(e){if(Gn(p)){"delete"!==h&&(p=e.results),c.addKeys(p);var t=kt(p,y);t||"add"===h||l.addKeys(p),(t||v)&&function(e,t,n,r){t.indexes.forEach((function(t){var o=function(e){return null!=e?t.extractKey(e):null},i=e(t.name||""),a=function(e){return t.multiEntry&&Gn(e)?e.forEach((function(e){return i.addKey(e)})):i.addKey(e)};(n||r).forEach((function(e,t){var i=n&&o(n[t]),s=r&&o(r[t]);0!==ho(i,s)&&(null!=i&&a(i),null!=s&&a(s))}))}))}(u,i,t,v)}else if(p){var r={from:p.lower,to:p.upper};l.add(r),c.add(r)}else c.add(n),l.add(n),i.indexes.forEach((function(e){return u(e.name).add(n)}));return e}))}}),d=function(t){var n,r,o=t.query,i=o.index,a=o.range;return[i,new ko(null!==(n=a.lower)&&void 0!==n?n:e.MIN_KEY,null!==(r=a.upper)&&void 0!==r?r:e.MAX_KEY)]},p={get:function(e){return[a,new ko(e.key)]},getMany:function(e){return[a,(new ko).addKeys(e.keys)]},count:d,query:d,openCursor:d};return Wn(p).forEach((function(e){h[e]=function(i){var a=Vr.subscr;if(a){var h=function(e){var n="idb://".concat(t,"/").concat(r,"/").concat(e);return a[n]||(a[n]=new ko)},d=h(""),v=h(":dels"),y=f(p[e](i),2),m=y[0],g=y[1];if(h(m.name||"").add(g),!m.isPrimaryKey){if("count"!==e){var b="query"===e&&u&&i.values&&o.query(l(c({},i),{values:!1}));return o[e].apply(this,arguments).then((function(t){if("query"===e){if(u&&i.values)return b.then((function(e){var n=e.result;return d.addKeys(n),t}));var n=i.values?t.result.map(s):t.result;i.values?d.addKeys(n):v.addKeys(n)}else if("openCursor"===e){var r=t,o=i.values;return r&&Object.create(r,{key:{get:function(){return v.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return v.addKey(e),e}},value:{get:function(){return o&&d.addKey(r.primaryKey),r.value}}})}return t}))}v.add(n)}}return o[e].apply(this,arguments)}})),h}})}},Mo=function(){function e(t,n){var r=this;o(this,e),this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=c({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s,u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:te,dbReadyPromise:null,cancelOpen:te,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};u.dbReadyPromise=new le((function(e){u.dbReadyResolve=e})),u.openCanceller=new le((function(e,t){u.cancelOpen=t})),this._state=u,this.name=t,this.on=ze(this,"populate","blocked","versionchange","close",{ready:[ce,te]}),this.on.ready.subscribe=K(this.on.ready.subscribe,(function(t){return function(n,o){e.vip((function(){var e=r._state;if(e.openComplete)e.dbOpenError||le.resolve().then(n),o&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),o&&t(n);else{t(n);var i=r;o||t((function e(){i.on.ready.unsubscribe(n),i.on.ready.unsubscribe(e)}))}}))}})),this.Collection=(s=this,Le(po.prototype,(function(e,t){this.db=s;var n=lo,r=null;if(t)try{n=t()}catch(e){r=e}var o=e._ctx,i=o.table,a=i.hook.reading.fire;this._ctx={table:i,index:o.index,isPrimKey:!o.index||i.schema.primKey.keyPath&&o.index===i.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:o.or,valueMapper:a!==ne?a:null}}))),this.Table=function(e){return Le(fo.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:ze(null,{creating:[ie,te],reading:[re,ne],updating:[se,te],deleting:[ae,te]})}))}(this),this.Transaction=function(e){return Le(go.prototype,(function(t,n,r,o,i){var a=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=ze(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new le((function(e,t){a._resolve=e,a._reject=t})),this._completion.then((function(){a.active=!1,a.on.complete.fire()}),(function(e){var t=a.active;return a.active=!1,a.on.error.fire(e),a.parent?a.parent._reject(e):t&&a.idbtrans&&a.idbtrans.abort(),to(e)}))}))}(this),this.Version=function(e){return Le(_o.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return Le(yo.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};var o=e._deps.indexedDB;if(!o)throw new _r.MissingAPI;this._cmp=this._ascending=o.cmp.bind(o),this._descending=function(e,t){return o.cmp(t,e)},this._max=function(e,t){return o.cmp(e,t)>0?e:t},this._min=function(e,t){return o.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))})),this._maxKey=bo(n.IDBKeyRange),this._createTransaction=function(e,t,n,o){return new r.Transaction(e,t,n,r._options.chromeTransactionDurability,o)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),io.filter((function(e){return e.name===r.name&&e!==r&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(Oo),this.use(xo),this.use(To),this.use(Po),this.vip=Object.create(this,{_vip:{value:!0}}),a.forEach((function(e){return e(r)}))}return a(e,[{key:"version",value:function(e){if(isNaN(e)||e<.1)throw new _r.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new _r.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(pt),n.stores({}),this._state.autoSchema=!1,n)}},{key:"_whenReady",value:function(e){var t=this;return this.idbdb&&(this._state.openComplete||Vr.letThrough||this._vip)?e():new le((function(e,n){if(t._state.openComplete)return n(new _r.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new _r.DatabaseClosed);t.open().catch(te)}t._state.dbReadyPromise.then(e,n)})).then(e)}},{key:"use",value:function(e){var t=e.stack,n=e.create,r=e.level,o=e.name;o&&this.unuse({stack:t,name:o});var i=this._middlewares[t]||(this._middlewares[t]=[]);return i.push({stack:t,create:n,level:null==r?10:r,name:o}),i.sort((function(e,t){return e.level-t.level})),this}},{key:"unuse",value:function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this}},{key:"open",value:function(){return function(e){var t=function(){if(n.openCanceller!==o)throw new _r.DatabaseClosed("db.open() was cancelled")},n=e._state,r=e._deps.indexedDB;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then((function(){return n.dbOpenError?to(n.dbOpenError):e}));hr&&(n.openCanceller._stackHolder=vr()),n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var o=n.openCanceller,i=n.dbReadyResolve,a=null,s=!1;return le.race([o,("undefined"==typeof navigator?le.resolve():Ot()).then((function(){return new le((function(o,i){if(t(),!r)throw new _r.MissingAPI;var u=e.name,c=n.autoSchema?r.open(u):r.open(u,Math.round(10*e.verno));if(!c)throw new _r.MissingAPI;c.onerror=rt(i),c.onblocked=Se(e._fireOnBlocked),c.onupgradeneeded=Se((function(t){if(a=c.transaction,n.autoSchema&&!e._options.allowEmptyDB){c.onerror=ot,a.abort(),c.result.close();var o=r.deleteDatabase(u);o.onsuccess=o.onerror=Se((function(){i(new _r.NoSuchDatabase("Database ".concat(u," doesnt exist")))}))}else{a.onerror=rt(i);var l=t.oldVersion>Math.pow(2,62)?0:t.oldVersion;s=l<1,e._novip.idbdb=c.result,function(e,t,n,r){var o=e._dbSchema,i=e._createTransaction("readwrite",e._storeNames,o);i.create(n),i._completion.catch(r);var a=i._reject.bind(i),s=Vr.transless||Vr;Oe((function(){Vr.trans=i,Vr.transless=s,0===t?(Wn(o).forEach((function(e){yt(n,e,o[e].primKey,o[e].indexes)})),ft(e,n),le.follow((function(){return e.on.populate.fire(i)})).catch(a)):function(e,t,n,r){var o=e._novip,i=[],a=o._versions,s=o._dbSchema=gt(0,o.idbdb,r),u=!1;return a.filter((function(e){return e._cfg.version>=t})).forEach((function(e){i.push((function(){var i=s,a=e._cfg.dbschema;bt(o,i,r),bt(o,a,r),s=o._dbSchema=a;var c=vt(i,a);c.add.forEach((function(e){yt(r,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((function(e){if(e.recreate)throw new _r.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach((function(e){return mt(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),mt(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var l=e._cfg.contentUpgrade;if(l&&e._cfg.version>t){ft(o,r),n._memoizedTables={},u=!0;var f=H(a);c.del.forEach((function(e){f[e]=i[e]})),dt(o,[o.Transaction.prototype]),ht(o,[o.Transaction.prototype],Wn(f),f),n.schema=f;var h,d=fr(l);d&&Ee();var p=le.follow((function(){if((h=l(n))&&d){var e=xe.bind(null,null);h.then(e,e)}}));return h&&"function"==typeof h.then?le.resolve(h):p.then((function(){return h}))}})),i.push((function(t){u&&so||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((function(n){return null==e[n]&&t.db.deleteObjectStore(n)}))}(e._cfg.dbschema,t),dt(o,[o.Transaction.prototype]),ht(o,[o.Transaction.prototype],o._storeNames,o._dbSchema),n.schema=o._dbSchema}))})),function e(){return i.length?le.resolve(i.shift()(n.idbtrans)).then(e):le.resolve()}().then((function(){var e,t;t=r,Wn(e=s).forEach((function(n){t.db.objectStoreNames.contains(n)||yt(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,i,n).catch(a)}))}(e,l/10,a,i)}}),i),c.onsuccess=Se((function(){a=null;var t,r=e._novip.idbdb=c.result,i=L(r.objectStoreNames);if(i.length>0)try{var l=r.transaction(1===(t=i).length?t[0]:t,"readonly");n.autoSchema?function(e,t,n){var r=e._novip;r.verno=t.version/10;var o=r._dbSchema=gt(0,t,n);r._storeNames=L(t.objectStoreNames,0),ht(r,[r._allTables],Wn(o),o)}(e,r,l):(bt(e,e._dbSchema,l),function(e,t){var n=vt(gt(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}(e,l)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),ft(e,l)}catch(e){}io.push(e),r.onversionchange=Se((function(t){n.vcFired=!0,e.on("versionchange").fire(t)})),r.onclose=Se((function(t){e.on("close").fire(t)})),s&&function(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!_t(n)&&"__dbnames"!==t&&wt(n,r).put({name:t}).catch(te)}(e._deps,u),o()}),i)}))}))]).then((function(){return t(),n.onReadyBeingFired=[],le.resolve(St((function(){return e.on.ready.fire(e.vip)}))).then((function t(){if(n.onReadyBeingFired.length>0){var r=n.onReadyBeingFired.reduce(ce,te);return n.onReadyBeingFired=[],le.resolve(St((function(){return r(e.vip)}))).then(t)}}))})).finally((function(){n.onReadyBeingFired=null,n.isBeingOpened=!1})).then((function(){return e})).catch((function(t){n.dbOpenError=t;try{a&&a.abort()}catch(e){}return o===n.openCanceller&&e._close(),to(t)})).finally((function(){n.openComplete=!0,i()}))}(this)}},{key:"_close",value:function(){var e=this._state,t=io.indexOf(this);if(t>=0&&io.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new le((function(t){e.dbReadyResolve=t})),e.openCanceller=new le((function(t,n){e.cancelOpen=n}))}},{key:"close",value:function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new _r.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}},{key:"delete",value:function(){var e=this,t=arguments.length>0,n=this._state;return new le((function(r,o){var i=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=Se((function(){!function(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!_t(n)&&"__dbnames"!==t&&wt(n,r).delete(t).catch(te)}(e._deps,e.name),r()})),t.onerror=rt(o),t.onblocked=e._fireOnBlocked};if(t)throw new _r.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()}))}},{key:"backendDB",value:function(){return this.idbdb}},{key:"isOpen",value:function(){return null!==this.idbdb}},{key:"hasBeenClosed",value:function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}},{key:"hasFailed",value:function(){return null!==this._state.dbOpenError}},{key:"dynamicallyOpened",value:function(){return this._state.autoSchema}},{key:"tables",get:function(){var e=this;return Wn(this._allTables).map((function(t){return e._allTables[t]}))}},{key:"transaction",value:function(){var e=xt.apply(this,arguments);return this._transaction.apply(this,e)}},{key:"_transaction",value:function(e,t,n){var r=this,o=Vr.trans;o&&o.db===this&&-1===e.indexOf("!")||(o=null);var i,a,s=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=t.map((function(e){var t=u(e,r.Table)?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||"readonly"===e)i="readonly";else{if("rw"!=e&&"readwrite"!=e)throw new _r.InvalidArgument("Invalid transaction mode: "+e);i="readwrite"}if(o){if("readonly"===o.mode&&"readwrite"===i){if(!s)throw new _r.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&a.forEach((function(e){if(o&&-1===o.storeNames.indexOf(e)){if(!s)throw new _r.SubTransaction("Table "+e+" not included in parent transaction.");o=null}})),s&&o&&!o.active&&(o=null)}}catch(e){return o?o._promise(null,(function(t,n){n(e)})):to(e)}var c=So.bind(null,this,i,a,o,n);return o?o._promise(i,c,"lock"):Vr.trans?Me(Vr.transless,(function(){return r._whenReady(c)})):this._whenReady(c)}},{key:"table",value:function(e){if(!R(this._allTables,e))throw new _r.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]}}]),e}(),Co="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",Do=function(){function e(t){o(this,e),this._subscribe=t}return a(e,[{key:"subscribe",value:function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})}},{key:Co,value:function(){return this}}]),e}();try{Ao={indexedDB:qn.indexedDB||qn.mozIndexedDB||qn.webkitIndexedDB||qn.msIndexedDB,IDBKeyRange:qn.IDBKeyRange||qn.webkitIDBKeyRange}}catch(r){Ao={indexedDB:null,IDBKeyRange:null}}var Io=Mo;N(Io,l(c({},Or),{delete:function(e){return new Io(e,{addons:[]}).delete()},exists:function(e){return new Io(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){try{return function(e){var t=e.indexedDB,n=e.IDBKeyRange;return _t(t)?Promise.resolve(t.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return"__dbnames"!==e}))})):wt(t,n).toCollection().primaryKeys()}(Io.dependencies).then(e)}catch(e){return to(new _r.MissingAPI)}},defineClass:function(){return function(e){I(this,e)}},ignoreTransaction:function(e){return Vr.trans?Me(Vr.transless,e):e()},vip:St,async:function(e){return function(){try{var t=Et(e.apply(this,arguments));return t&&"function"==typeof t.then?t:le.resolve(t)}catch(e){return to(e)}}},spawn:function(e,t,n){try{var r=Et(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:le.resolve(r)}catch(e){return to(e)}},currentTransaction:{get:function(){return Vr.trans||null}},waitFor:function(e,t){var n=le.resolve("function"==typeof e?Io.ignoreTransaction(e):e).timeout(t||6e4);return Vr.trans?Vr.trans.waitFor(n):n},Promise:le,debug:{get:function(){return hr},set:function(e){Y(e,"dexie"===e?function(){return!0}:co)}},derive:z,extend:I,props:N,override:K,Events:ze,on:mo,liveQuery:function(e){return new Do((function(t){var n=function(){return Wn(a).some((function(e){return i[e]&&function(e,t){var n=Tt(t),r=n.next();if(r.done)return!1;for(var o=r.value,i=Tt(e),a=i.next(o.from),s=a.value;!r.done&&!a.done;){if(ho(s.from,o.to)<=0&&ho(s.to,o.from)>=0)return!0;ho(o.from,s.from)<0?o=(r=n.next(s.from)).value:s=(a=i.next(o.from)).value}return!1}(i[e],a[e])}))},r=fr(e),o=!1,i={},a={},s={get closed(){return o},unsubscribe:function(){o=!0,mo.storagemutated.unsubscribe(l)}};t.start&&t.start(s);var u=!1,c=!1,l=function(e){Dt(i,e),n()&&f()},f=function(){if(!u&&!o){i={};var h={},d=function(t){r&&Ee();var n=function(){return Oe(e,{subscr:t,trans:null})},o=Vr.trans?Me(Vr.transless,n):n();return r&&o.then(xe,xe),o}(h);c||(mo("storagemutated",l),c=!0),u=!0,Promise.resolve(d).then((function(e){u=!1,o||(n()?f():(i={},a=h,t.next&&t.next(e)))}),(function(e){u=!1,t.error&&t.error(e),s.unsubscribe()}))}};return f(),s}))},extendObservabilitySet:Dt,getByKeyPath:er,setByKeyPath:tr,delByKeyPath:function(e,t){"string"==typeof t?tr(e,t,void 0):"length"in t&&[].map.call(t,(function(t){tr(e,t,void 0)}))},shallowClone:H,deepClone:W,getObjectDiff:Eo,cmp:ho,asap:V,minKey:-1/0,addons:[],connections:io,errnames:br,dependencies:Ao,semVer:"3.2.3",version:"3.2.3".split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)}))})),Io.maxKey=bo(Io.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(mo("storagemutated",(function(e){var t;Ro||(ao?(t=document.createEvent("CustomEvent")).initCustomEvent("x-storagemutated-1",!0,!0,e):t=new CustomEvent("x-storagemutated-1",{detail:e}),Ro=!0,dispatchEvent(t),Ro=!1)})),addEventListener("x-storagemutated-1",(function(e){var t=e.detail;Ro||It(t)})));var Ro=!1;if("undefined"!=typeof BroadcastChannel){var No=new BroadcastChannel("x-storagemutated-1");"function"==typeof No.unref&&No.unref(),mo("storagemutated",(function(e){Ro||No.postMessage(e)})),No.onmessage=function(e){e.data&&It(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){mo("storagemutated",(function(e){try{Ro||("undefined"!=typeof localStorage&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&h(self.clients.matchAll({includeUncontrolled:!0})).forEach((function(t){return t.postMessage({type:"x-storagemutated-1",changedParts:e})})))}catch(e){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(function(e){if("x-storagemutated-1"===e.key){var t=JSON.parse(e.newValue);t&&It(t.changedParts)}}));var Bo=self.document&&navigator.serviceWorker;Bo&&Bo.addEventListener("message",(function(e){var t=e.data;t&&"x-storagemutated-1"===t.type&&It(t.changedParts)}))}le.rejectionMapper=function(e,t){if(!e||u(e,J)||u(e,TypeError)||u(e,SyntaxError)||!e.name||!Sr[e.name])return e;var n=new Sr[e.name](t||e.message,e);return"stack"in e&&B(n,"stack",{get:function(){return this.inner.stack}}),n},Y(hr,co);var zo=p(766),Lo=p(685);function Ko(e){return Ko=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ko(e)}function Uo(e,t){return Uo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Uo(e,t)}var Vo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uo(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ko(e);if(t){var o=Ko(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":void 0===n?"undefined":d(n))&&"function"!=typeof t?Rt(e):t;var n}(this,n)}}(n);function n(){var e;return function(e,t){if(!u(e,t))throw new TypeError("Cannot call a class as a function")}(this,n),Nt(Rt(e=t.call(this,"EsmOffline")),"syncQueue",void 0),Nt(Rt(e),"dynamicOfflineData",void 0),e.version(4).stores({syncQueue:"++id,userId,type,[userId+type]",dynamicOfflineData:"++id,type,identifier,*users,&[type+identifier]"}),e.syncQueue=e.table("syncQueue"),e.dynamicOfflineData=e.table("dynamicOfflineData"),e}return n}(Mo),Fo=new Vo,Ho={},qo=(0,Lo.createGlobalStore)("offline-synchronization",{});function Wo(){return Wo=Kt((function(){var e,t,n,r,o,i,a,s,u,c,l,f,h;return Ht(this,(function(d){switch(d.label){case 0:return qo.getState().synchronization?[2]:[4,Fo.syncQueue.count()];case 1:e=d.sent(),t={},n=Object.entries(Ho),r=n.length,o={},i=new AbortController,a=function(){var e,t,n=qo.getState().synchronization;qo.setState({synchronization:(e=Vt({},n),t={pendingCount:n.pendingCount-1},t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e)})},d.label=2;case 2:d.trys.push([2,,10,11]),qo.setState({synchronization:{totalCount:e,pendingCount:e,abortController:i}}),s=0,d.label=3;case 3:if(!(s<r&&n.length>0))return[3,8];u=n.length,d.label=4;case 4:return u--?(c=Ft(n[u],2),l=c[0],f=c[1],(h=f.dependsOn.map((function(e){return t[e]}))).every(Boolean)?(o[l]={},[4,Promise.all(h)]):[3,6]):[3,7];case 5:d.sent(),t[l]=function(e,t,n,r){return Go.apply(this,arguments)}(f,o,i,a),n.splice(u,1),d.label=6;case 6:return[3,4];case 7:return s++,[3,3];case 8:return[4,Promise.allSettled(Object.values(t))];case 9:return d.sent(),[3,11];case 10:return qo.setState({synchronization:void 0}),[7];case 11:return[2]}}))})),Wo.apply(this,arguments)}function Go(){return Go=Kt((function(e,t,n,r){var o,i,a,s,u,c,l,f,h,d,p,v,y,m,g,b,w;return Ht(this,(function(_){switch(_.label){case 0:return o=e.type,i=e.dependsOn,a=e.process,s=[],u=[],[4,Gt()];case 1:return c=_.sent(),[4,Fo.syncQueue.where({type:o,userId:c}).each((function(e,t){s.push([t.primaryKey,e.content,e.descriptor]),u.push(e.content)}))];case 2:_.sent(),l=0,_.label=3;case 3:if(!(l<s.length))return[3,11];f=Ft(s[l],3),h=f[0],d=f[1],p=f[2],v=p.id,y=p.dependencies,m=void 0===y?[]:y,_.label=4;case 4:return _.trys.push([4,7,9,10]),[4,a(d,{abort:n,index:l,items:u,userId:c,dependencies:m.map((function(e){var n=e.id,r=e.type;return i.includes(r)?t[r][n]:void 0}))})];case 5:return g=_.sent(),void 0!==v&&(t[o][v]=g),[4,Fo.syncQueue.delete(h)];case 6:return _.sent(),[3,10];case 7:return b=_.sent(),[4,Fo.syncQueue.update(h,{lastError:{name:null==b?void 0:b.name,message:null!==(w=null==b?void 0:b.message)&&void 0!==w?w:null==b?void 0:b.toString()}})];case 8:return _.sent(),[3,10];case 9:return r(),[7];case 10:return l++,[3,3];case 11:return[2]}}))})),Go.apply(this,arguments)}function $o(){return($o=Kt((function(){var e;return Ht(this,(function(t){switch(t.label){case 0:return[4,(0,zo.getLoggedInUser)()];case 1:return[2,(null==(e=t.sent())?void 0:e.uuid)||"*"]}}))}))).apply(this,arguments)}function Yo(){return(Yo=Kt((function(e,t,n,r){var o;return Ht(this,(function(i){switch(i.label){case 0:return void 0===(o=r&&r.id)?[3,2]:[4,Fo.syncQueue.where({type:t,userId:e}).filter((function(e){return(null==e?void 0:e.descriptor.id)===o})).delete().catch(Mo.errnames.DatabaseClosed)];case 1:i.sent(),i.label=2;case 2:return[4,Fo.syncQueue.add({type:t,content:n,userId:e,descriptor:r||{},createdOn:new Date}).catch(Mo.errnames.DatabaseClosed,(function(){return-1}))];case 3:return[2,i.sent()]}}))}))).apply(this,arguments)}function Qo(){return(Qo=Kt((function(e,t,n){return Ht(this,(function(r){switch(r.label){case 0:return[4,Gt()];case 1:return[4,$t(r.sent(),e,t,n)];case 2:return[2,r.sent()]}}))}))).apply(this,arguments)}function Jo(){return(Jo=Kt((function(e,t){return Ht(this,(function(n){switch(n.label){case 0:return[4,Jt(e,t)];case 1:return[2,n.sent().map((function(e){return e.content}))]}}))}))).apply(this,arguments)}function Xo(){return(Xo=Kt((function(e,t){var n;return Ht(this,(function(r){switch(r.label){case 0:return n=t?{type:t,userId:e}:{userId:e},[4,Fo.syncQueue.where(n).toArray().catch(Mo.errnames.DatabaseClosed,(function(){return[]}))];case 1:return[2,r.sent()]}}))}))).apply(this,arguments)}function Zo(){return(Zo=Kt((function(e){return Ht(this,(function(t){switch(t.label){case 0:return[4,Gt()];case 1:return[4,Qt(t.sent(),e)];case 2:return[2,t.sent()]}}))}))).apply(this,arguments)}function ei(){return(ei=Kt((function(e){return Ht(this,(function(t){switch(t.label){case 0:return[4,Gt()];case 1:return[4,Jt(t.sent(),e)];case 2:return[2,t.sent()]}}))}))).apply(this,arguments)}function ti(){return(ti=Kt((function(e){return Ht(this,(function(t){switch(t.label){case 0:return[4,Fo.syncQueue.get(e).catch(Mo.errnames.DatabaseClosed,(function(){}))];case 1:return[2,t.sent()]}}))}))).apply(this,arguments)}function ni(){return(ni=Kt((function(e){var t,n,r;return Ht(this,(function(o){switch(o.label){case 0:return[4,en(e)];case 1:if(!(n=o.sent()))throw new Error("No sync item with the ID ".concat(e," exists."));if(!(r=null===(t=Ho[n.type])||void 0===t?void 0:t.options.onBeginEditSyncItem))throw new Error("A sync item with the ID ".concat(e,' exists, but the associated handler (if one exists) doesn\'t support editing the item. You can avoid this error by either verifying that sync items of this type can be edited via the "canEditSynchronizationItemsOfType(type: string)" function or alternatively ensure that the synchronizaton handler for sync items of type "').concat(n.type,'" supports editing items.'));return r(n),[2]}}))}))).apply(this,arguments)}function ri(){return(ri=Kt((function(e){return Ht(this,(function(t){switch(t.label){case 0:return[4,Fo.syncQueue.delete(e).catch(Mo.errnames.DatabaseClosed)];case 1:return t.sent(),[2]}}))}))).apply(this,arguments)}for(var oi,ii={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},ai=new Uint8Array(16),si=[],ui=0;ui<256;++ui)si.push((ui+256).toString(16).slice(1));var ci=function(e,t,n){if(ii.randomUUID&&!t&&!e)return ii.randomUUID();var r=(e=e||{}).random||(e.rng||an)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(si[e[t+0]]+si[e[t+1]]+si[e[t+2]]+si[e[t+3]]+"-"+si[e[t+4]]+si[e[t+5]]+"-"+si[e[t+6]]+si[e[t+7]]+"-"+si[e[t+8]]+si[e[t+9]]+"-"+si[e[t+10]]+si[e[t+11]]+si[e[t+12]]+si[e[t+13]]+si[e[t+14]]+si[e[t+15]]).toLowerCase()}(r)},li="OFFLINE+",fi={};function hi(){return(hi=fn((function(e){return hn(this,(function(t){switch(t.label){case 0:return[4,On()];case 1:return[4,yn(t.sent(),e)];case 2:return[2,t.sent()]}}))}))).apply(this,arguments)}function di(){return(di=fn((function(e,t){var n;return hn(this,(function(r){switch(r.label){case 0:return n=t?{type:t,users:e}:{users:e},[4,(new Vo).dynamicOfflineData.where(n).toArray().catch(Mo.errnames.DatabaseClosed,(function(){return[]}))];case 1:return[2,r.sent()]}}))}))).apply(this,arguments)}function pi(){return(pi=fn((function(e,t){return hn(this,(function(n){switch(n.label){case 0:return[4,On()];case 1:return[4,gn(n.sent(),e,t)];case 2:return[2,n.sent()]}}))}))).apply(this,arguments)}function vi(){return vi=fn((function(e,t,n){var r,o;return hn(this,(function(i){switch(i.label){case 0:return[4,(r=new Vo).dynamicOfflineData.get({type:t,identifier:n}).catch(Mo.errnames.DatabaseClosed,(function(){}))];case 1:return(o=i.sent())?[3,3]:[4,r.dynamicOfflineData.add({users:[e],type:t,identifier:n}).catch(Mo.errnames.DatabaseClosed)];case 2:return i.sent(),[3,5];case 3:return o.users.includes(e)?[3,5]:[4,r.dynamicOfflineData.update(o.id,{users:(a=o.users,function(e){if(Array.isArray(e))return cn(e)}(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cn(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e])}).catch(Mo.errnames.DatabaseClosed)];case 4:i.sent(),i.label=5;case 5:return[2]}var a}))})),vi.apply(this,arguments)}function yi(){return(yi=fn((function(e,t){return hn(this,(function(n){switch(n.label){case 0:return[4,On()];case 1:return[4,wn(n.sent(),e,t)];case 2:return[2,n.sent()]}}))}))).apply(this,arguments)}function mi(){return mi=fn((function(e,t,n){var r,o;return hn(this,(function(i){switch(i.label){case 0:return[4,(r=new Vo).dynamicOfflineData.get({type:t,identifier:n,users:e}).catch(Mo.errnames.DatabaseClosed,(function(){}))];case 1:return(o=i.sent())?o.users.length>1?[4,r.dynamicOfflineData.update(o.id,{users:o.users.filter((function(t){return t!==e}))}).catch(Mo.errnames.DatabaseClosed)]:[3,3]:[3,5];case 2:return i.sent(),[3,5];case 3:return[4,r.dynamicOfflineData.delete(o.id).catch(Mo.errnames.DatabaseClosed)];case 4:i.sent(),i.label=5;case 5:return[2]}}))})),mi.apply(this,arguments)}function gi(){return gi=fn((function(e,t){var n;return hn(this,(function(r){switch(r.label){case 0:return[4,vn(e)];case 1:return n=r.sent(),[4,Promise.all(n.map((o=fn((function(e){return hn(this,(function(n){return[2,Sn(e.type,e.identifier,t)]}))})),function(e){return o.apply(this,arguments)})))];case 2:return r.sent(),[2]}var o}))})),gi.apply(this,arguments)}function bi(){return bi=fn((function(e,t,n){var r,o,i,a,s,u,c,l,f;return hn(this,(function(h){switch(h.label){case 0:return[4,mn(e,t)];case 1:return h.sent(),r=new Vo,[4,On()];case 2:return o=h.sent(),[4,r.dynamicOfflineData.get({type:e,identifier:t}).catch(Mo.errnames.DatabaseClosed,(function(){}))];case 3:return i=h.sent(),a=dn().filter((function(t){return t.type===e})),i?[4,Promise.all(a.map((d=fn((function(e){var r,o,i;return hn(this,(function(a){try{return e.sync(t,n),[2,{id:e.id,error:void 0}]}catch(t){return i=null!==(o=null===(r=t.message)||void 0===r?void 0:r.toString())&&void 0!==o?o:t.toString(),[2,{id:e.id,error:i}]}return[2]}))})),function(e){return d.apply(this,arguments)})))]:[2];case 4:return s=h.sent(),u=s.filter((function(e){return!e.error})).map((function(e){return e.id})),c=s.filter((function(e){return e.error})).map((function(e){return e.id})),l=s.filter((function(e){return e.error})).map((function(e){return{handlerId:e.id,message:e.error}})),f={syncedOn:new Date,syncedBy:o,succeededHandlers:u,erroredHandlers:c,errors:l},i.id?[4,r.dynamicOfflineData.update(i.id,{syncState:f}).catch(Mo.errnames.DatabaseClosed)]:[3,6];case 5:h.sent(),h.label=6;case 6:return[2]}var d}))})),bi.apply(this,arguments)}function wi(){return(wi=fn((function(){var e;return hn(this,(function(t){switch(t.label){case 0:return[4,(0,zo.getLoggedInUser)()];case 1:if(!(e=t.sent().uuid))throw new Error("Using the dynamic offline data API requires a logged in user.");return[2,e]}}))}))).apply(this,arguments)}var _i=(0,Lo.createGlobalStore)("offline-patients",{offlinePatientDataSyncState:{},handlers:{}});function Si(){return Si=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){En(i,r,o,a,s,"next",e)}function s(e){En(i,r,o,a,s,"throw",e)}a(void 0)}))}}((function(e){return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(t){switch(t.label){case 0:return jn(),[4,Sn("patient",e)];case 1:return t.sent(),[2]}}))})),Si.apply(this,arguments)}}(),v}())}}}))},254:e=>{"use strict";e.exports=n},45:e=>{"use strict";e.exports=r},513:e=>{"use strict";e.exports=o},740:e=>{"use strict";e.exports=i},685:e=>{"use strict";e.exports=a},901:e=>{"use strict";e.exports=s},688:e=>{"use strict";e.exports=u},64:e=>{"use strict";e.exports=c},954:e=>{"use strict";e.exports=l},493:e=>{"use strict";e.exports=f},792:e=>{"use strict";e.exports=h}},t={};function d(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,d),o.exports}d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},d.d=(e,t)=>{for(var n in t)d.o(t,n)&&!d.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},d.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var p={};return(()=>{"use strict";var e=d(714);const t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 380 119"><path fill="var(--logo-red)" fill-rule="evenodd" d="M40.29 40.328a27.76 27.76 0 0 1 19.688-8.154c7.669 0 14.613 3.102 19.646 8.116l.021-18.54A42.84 42.84 0 0 0 59.978 17c-7.089 0-13.813 1.93-19.709 4.968z" clip-rule="evenodd"/><path fill="var(--logo-orange)" fill-rule="evenodd" d="M79.645 79.671a27.74 27.74 0 0 1-19.684 8.154c-7.67 0-14.614-3.101-19.651-8.116l-.02 18.54A42.86 42.86 0 0 0 59.96 103a42.8 42.8 0 0 0 19.672-4.751z" clip-rule="evenodd"/><path fill="var(--logo-purple)" fill-rule="evenodd" d="M40.328 79.696c-5.038-5.037-8.154-11.995-8.154-19.685 0-7.669 3.102-14.612 8.116-19.65l-18.54-.02A42.85 42.85 0 0 0 17 60.012a42.8 42.8 0 0 0 4.752 19.672z" clip-rule="evenodd"/><path fill="var(--logo-green)" fill-rule="evenodd" d="M79.634 40.289a27.75 27.75 0 0 1 8.154 19.688 27.74 27.74 0 0 1-8.117 19.646l18.542.02a42.84 42.84 0 0 0 4.749-19.666c0-7.09-1.714-13.779-4.751-19.675z" clip-rule="evenodd"/><path fill="var(--logo-black)" fill-rule="evenodd" d="M156.184 60.003c0-8.749-6.118-15.777-15.025-15.777-8.909 0-15.025 7.028-15.025 15.776s6.116 15.78 15.025 15.78c8.907 0 15.025-7.031 15.025-15.78m-34.881 0c0-11.483 8.318-19.96 19.856-19.96 11.536 0 19.855 8.478 19.855 19.96 0 11.484-8.319 19.964-19.855 19.964-11.538 0-19.856-8.48-19.856-19.964M179.514 75.54c5.507 0 9.05-4.14 9.05-9.482s-3.543-9.483-9.05-9.483c-5.505 0-9.046 4.142-9.046 9.483s3.541 9.482 9.046 9.482M166.22 53.306h4.248v3.704h.11c2.344-2.725 5.449-4.36 9.154-4.36 8.014 0 13.408 5.67 13.408 13.408 0 7.63-5.613 13.406-12.752 13.406-4.58 0-8.231-2.29-9.81-5.178h-.11V90.87h-4.248zM217.773 63.768c-.163-4.305-3-7.193-7.686-7.193-4.685 0-7.79 2.888-8.335 7.193zm3.653 10.412c-3.001 3.868-6.596 5.284-11.339 5.284-8.01 0-12.914-5.993-12.914-13.406 0-7.901 5.559-13.407 13.08-13.407 7.196 0 12.096 4.906 12.096 13.354v1.362h-20.597c.325 4.413 3.704 8.173 8.335 8.173 3.65 0 6.105-1.307 8.12-3.868zM227.854 59.357c0-2.347-.216-4.361-.216-6.05h4.031c0 1.362.11 2.776.11 4.194h.11c1.144-2.505 4.306-4.85 8.5-4.85 6.705 0 9.699 4.252 9.699 10.41v15.748h-4.248v-15.31c0-4.253-1.856-6.924-5.833-6.924-5.503 0-7.903 3.979-7.903 9.811V78.81h-4.25zM259.211 41.009h6.708L278.8 70.79h.107l12.982-29.782h6.549v37.99h-4.506V47.124h-.106L280.192 79h-2.738l-13.629-31.875h-.107V79h-4.507zM312.392 57.752h4.023c4.992 0 11.487 0 11.487-6.282 0-5.47-4.776-6.276-9.177-6.276h-6.333zm-4.506-16.744h9.711c7.352 0 15.132 1.072 15.132 10.462 0 5.527-3.594 9.125-9.495 10.037l10.784 17.492h-5.525l-10.304-17.063h-5.797V79h-4.506zM358.123 47.713c-1.506-2.414-4.187-3.487-6.926-3.487-3.973 0-8.1 1.88-8.1 6.385 0 3.49 1.931 5.047 7.994 6.98 5.903 1.878 11.377 3.809 11.377 11.267 0 7.567-6.495 11.11-13.36 11.11-4.402 0-9.125-1.45-11.7-5.262l3.862-3.165c1.61 2.794 4.83 4.24 8.105 4.24 3.862 0 8.263-2.253 8.263-6.601 0-4.669-3.165-5.474-9.928-7.728-5.366-1.771-9.442-4.134-9.442-10.463 0-7.298 6.277-10.945 12.929-10.945 4.241 0 7.836 1.178 10.625 4.45zM185.885 90.998h1.424l2.734 6.326h.023l2.758-6.326h1.391v8.07h-.957v-6.77h-.024l-2.894 6.77h-.582l-2.894-6.77h-.022v6.77h-.957zM198.386 90.998h5.071v.889h-4.114v2.53h3.841v.89h-3.841v2.871h4.32v.89h-5.277zM207.891 98.178h1.822c1.848 0 3.25-.935 3.25-3.146s-1.402-3.145-3.25-3.145h-1.822zm-.957-7.18h3.1c1.583 0 3.953 1.06 3.953 4.034 0 2.976-2.37 4.036-3.953 4.036h-3.1zM217.007 99.068h.958v-8.07h-.958zM227.105 92.663c-.478-.651-1.242-.981-2.017-.981-1.8 0-3.077 1.584-3.077 3.35 0 1.87 1.266 3.352 3.077 3.352.98 0 1.767-.4 2.337-1.129l.718.603c-.718.97-1.766 1.414-3.055 1.414-2.314 0-4.102-1.79-4.102-4.24 0-2.37 1.709-4.239 4.102-4.239 1.095 0 2.166.377 2.849 1.266zM233.557 92.23h-.024l-1.675 3.965h3.294zm-.434-1.232h.9l3.43 8.07h-1.117l-.82-1.984h-4.034l-.832 1.984h-1.082zM240.006 90.998h.958v7.18h3.692v.89h-4.65zM252.793 94.554h.855c1.06 0 2.439 0 2.439-1.334 0-1.161-1.014-1.333-1.948-1.333h-1.346zm-.957-3.556h2.063c1.561 0 3.214.228 3.214 2.222 0 1.174-.764 1.938-2.018 2.132l2.291 3.716h-1.173l-2.19-3.625h-1.23v3.625h-.957zM260.51 90.998h5.07v.889h-4.112v2.53h3.84v.89h-3.84v2.871h4.318v.89h-5.276zM274.402 92.663c-.479-.651-1.242-.981-2.018-.981-1.8 0-3.077 1.584-3.077 3.35 0 1.87 1.266 3.352 3.077 3.352.98 0 1.767-.4 2.336-1.129l.718.603c-.718.97-1.766 1.414-3.054 1.414-2.313 0-4.102-1.79-4.102-4.24 0-2.37 1.709-4.239 4.102-4.239 1.094 0 2.166.377 2.85 1.266zM284.739 95.032c0-1.857-1.3-3.35-3.191-3.35-1.892 0-3.191 1.493-3.191 3.35 0 1.858 1.299 3.352 3.191 3.352s3.191-1.494 3.191-3.352m-7.409 0c0-2.439 1.767-4.239 4.218-4.239s4.217 1.8 4.217 4.239-1.767 4.24-4.217 4.24c-2.451 0-4.218-1.8-4.218-4.24M289.514 94.554h.855c1.059 0 2.438 0 2.438-1.334 0-1.161-1.014-1.333-1.948-1.333h-1.345zm-.958-3.556h2.062c1.563 0 3.215.228 3.215 2.222 0 1.174-.763 1.938-2.016 2.132l2.289 3.716h-1.173l-2.189-3.625h-1.23v3.625h-.958zM297.81 98.178h1.825c1.845 0 3.246-.935 3.246-3.146s-1.401-3.145-3.246-3.145h-1.825zm-.957-7.18h3.1c1.585 0 3.956 1.06 3.956 4.034 0 2.976-2.371 4.036-3.956 4.036h-3.1zM315.407 92.422c-.318-.513-.89-.74-1.47-.74-.844 0-1.721.4-1.721 1.356 0 .74.41 1.072 1.698 1.482 1.254.399 2.417.81 2.417 2.393 0 1.607-1.38 2.36-2.838 2.36-.935 0-1.938-.309-2.486-1.118l.821-.672c.342.593 1.026.9 1.721.9.821 0 1.754-.478 1.754-1.402 0-.991-.67-1.163-2.107-1.64-1.139-.377-2.006-.878-2.006-2.222 0-1.551 1.333-2.326 2.747-2.326.9 0 1.664.25 2.256.946zM320.844 95.591l-3.009-4.593h1.219l2.269 3.647 2.335-3.647h1.152l-3.01 4.593v3.477h-.956zM330.565 92.422c-.32-.513-.89-.74-1.471-.74-.843 0-1.72.4-1.72 1.356 0 .74.41 1.072 1.698 1.482 1.254.399 2.415.81 2.415 2.393 0 1.607-1.378 2.36-2.837 2.36-.934 0-1.937-.309-2.485-1.118l.821-.672c.342.593 1.026.9 1.721.9.821 0 1.754-.478 1.754-1.402 0-.991-.671-1.163-2.107-1.64-1.139-.377-2.006-.878-2.006-2.222 0-1.551 1.333-2.326 2.746-2.326.901 0 1.665.25 2.257.946zM339.283 91.887h-2.666v7.18h-.958v-7.18h-2.667v-.889h6.291zM341.665 90.998h5.071v.889h-4.113v2.53h3.84v.89h-3.84v2.871h4.319v.89h-5.277zM349.905 90.998h1.424l2.735 6.326h.023l2.758-6.326h1.391v8.07h-.958v-6.77h-.023l-2.894 6.77h-.582l-2.895-6.77h-.021v6.77h-.958z" clip-rule="evenodd"/></svg>',n='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 380 119"><path fill="var(--logo-red)" fill-rule="evenodd" d="M40.29 40.328a27.76 27.76 0 0 1 19.688-8.154c7.669 0 14.613 3.102 19.647 8.116l.02-18.54A42.84 42.84 0 0 0 59.978 17c-7.089 0-13.813 1.93-19.709 4.968z" clip-rule="evenodd"/><path fill="var(--logo-orange)" fill-rule="evenodd" d="M79.645 79.671a27.74 27.74 0 0 1-19.684 8.154c-7.67 0-14.614-3.101-19.651-8.116l-.02 18.54A42.86 42.86 0 0 0 59.96 103a42.8 42.8 0 0 0 19.672-4.751z" clip-rule="evenodd"/><path fill="var(--logo-purple)" fill-rule="evenodd" d="M40.328 79.696c-5.038-5.037-8.154-11.995-8.154-19.685 0-7.669 3.102-14.612 8.116-19.65l-18.54-.02A42.85 42.85 0 0 0 17 60.012a42.8 42.8 0 0 0 4.752 19.672z" clip-rule="evenodd"/><path fill="var(--logo-green)" fill-rule="evenodd" d="M79.634 40.289a27.75 27.75 0 0 1 8.154 19.688 27.74 27.74 0 0 1-8.117 19.646l18.542.02a42.84 42.84 0 0 0 4.749-19.666c0-7.09-1.714-13.779-4.751-19.675z" clip-rule="evenodd"/><path fill="var(--logo-black)" fill-rule="evenodd" d="M156.184 60.003c0-8.749-6.118-15.777-15.025-15.777-8.909 0-15.025 7.028-15.025 15.776s6.116 15.78 15.025 15.78c8.907 0 15.025-7.031 15.025-15.78m-34.881 0c0-11.483 8.318-19.96 19.856-19.96 11.536 0 19.855 8.478 19.855 19.96 0 11.484-8.319 19.964-19.855 19.964-11.538 0-19.856-8.48-19.856-19.964M179.514 75.54c5.507 0 9.05-4.14 9.05-9.482s-3.543-9.483-9.05-9.483c-5.505 0-9.046 4.142-9.046 9.483s3.541 9.482 9.046 9.482M166.22 53.306h4.248v3.704h.11c2.344-2.725 5.449-4.36 9.154-4.36 8.014 0 13.408 5.67 13.408 13.408 0 7.63-5.613 13.406-12.752 13.406-4.58 0-8.231-2.29-9.81-5.178h-.11V90.87h-4.248zM217.773 63.768c-.163-4.305-3-7.193-7.686-7.193-4.685 0-7.79 2.888-8.335 7.193zm3.653 10.412c-3.001 3.868-6.596 5.284-11.339 5.284-8.01 0-12.914-5.993-12.914-13.406 0-7.901 5.559-13.407 13.08-13.407 7.196 0 12.096 4.906 12.096 13.354v1.362h-20.597c.325 4.413 3.704 8.173 8.335 8.173 3.65 0 6.105-1.307 8.12-3.868zM227.854 59.357c0-2.347-.216-4.361-.216-6.05h4.031c0 1.362.11 2.776.11 4.194h.11c1.144-2.505 4.306-4.85 8.5-4.85 6.705 0 9.699 4.252 9.699 10.41v15.748h-4.248v-15.31c0-4.253-1.856-6.924-5.833-6.924-5.503 0-7.903 3.979-7.903 9.811V78.81h-4.25zM259.211 41.009h6.708L278.8 70.79h.107l12.982-29.782h6.549v37.99h-4.506V47.124h-.106L280.192 79h-2.738l-13.629-31.875h-.107V79h-4.507zM312.392 57.752h4.023c4.992 0 11.487 0 11.487-6.282 0-5.47-4.776-6.276-9.177-6.276h-6.333zm-4.506-16.744h9.711c7.352 0 15.132 1.072 15.132 10.462 0 5.527-3.594 9.125-9.495 10.037L334.018 79h-5.525l-10.304-17.063h-5.797V79h-4.506zM358.123 47.713c-1.506-2.414-4.187-3.487-6.926-3.487-3.973 0-8.1 1.88-8.1 6.385 0 3.49 1.931 5.047 7.994 6.98 5.903 1.878 11.377 3.809 11.377 11.267 0 7.567-6.495 11.11-13.36 11.11-4.402 0-9.125-1.45-11.7-5.262l3.862-3.165c1.61 2.794 4.83 4.24 8.105 4.24 3.862 0 8.263-2.253 8.263-6.601 0-4.669-3.165-5.474-9.928-7.728-5.366-1.771-9.442-4.134-9.442-10.463 0-7.298 6.277-10.945 12.929-10.945 4.241 0 7.836 1.178 10.625 4.45z" clip-rule="evenodd"/></svg>',r='<svg xmlns="http://www.w3.org/2000/svg" width="121" height="118"><path fill="var(--logo-red)" fill-rule="evenodd" d="M40.436 39.474a27.93 27.93 0 0 1 19.811-8.205c7.717 0 14.705 3.122 19.77 8.167l.021-18.656A43.1 43.1 0 0 0 60.247 16c-7.133 0-13.899 1.943-19.832 4.999z" clip-rule="evenodd"/><path fill="var(--logo-orange)" fill-rule="evenodd" d="M80.038 79.064a27.92 27.92 0 0 1-19.808 8.205c-7.717 0-14.705-3.121-19.774-8.167l-.02 18.657a43.1 43.1 0 0 0 19.794 4.78 43.1 43.1 0 0 0 19.794-4.781z" clip-rule="evenodd"/><path fill="var(--logo-purple)" fill-rule="evenodd" d="M40.474 79.089c-5.069-5.069-8.205-12.07-8.205-19.808 0-7.717 3.121-14.704 8.167-19.773l-18.657-.02A43.1 43.1 0 0 0 17 59.281a43.1 43.1 0 0 0 4.782 19.795z" clip-rule="evenodd"/><path fill="var(--logo-green)" fill-rule="evenodd" d="M80.027 39.435a27.93 27.93 0 0 1 8.205 19.811 27.92 27.92 0 0 1-8.168 19.769l18.658.021a43.1 43.1 0 0 0 4.779-19.79 43.1 43.1 0 0 0-4.781-19.798z" clip-rule="evenodd"/></svg>';var o=document.createElement("div"),i=function(){document.body.appendChild(o)};function a(e,t){var n=(new DOMParser).parseFromString(t,"image/svg+xml").querySelector("svg");n&&(n.id=e,o.appendChild(n))}o.id="omrs-svgs-container",o.style.display="none","complete"===document.readyState?i():window.addEventListener("load",i);const s='<svg xmlns="http://www.w3.org/2000/svg"><path d="M9 2H7v2h2zM4 2H2v2h2zM14 2h-2v2h2zM9 7H7v2h2zM4 7H2v2h2zM14 7h-2v2h2zM9 12H7v2h2zM4 12H2v2h2zM14 12h-2v2h2z"/></svg>';var u={"Brand color #1":{_default:"#005d5d",_type:e.Type.String},"Brand color #2":{_default:"#004144",_type:e.Type.String},"Brand color #3":{_default:"#007d79",_type:e.Type.String},implementationName:{_type:e.Type.String,_description:"A name of the place (or authority) where all possible locations a user can choose are located.",_default:"Clinic"},patientPhotoConceptUuid:{_type:e.Type.ConceptUuid,_default:"736e8771-e501-4615-bfa7-570c03f4bef5",_description:"Used to look up the patient photo, which is stored as an attachment obs. Set to `null` in order to disable the feature and use only generated avatars. To remove the avatars entirely, use extension configuration's `remove` feature."},preferredCalendar:{_type:e.Type.Object,_description:"Keys should be locale codes, and values should be the preferred calendar for that locale. For example, {'am': 'ethiopic'}.",_default:{am:"ethiopic"},_elements:{_validators:[e.validators.oneOf(["buddhist","chinese","coptic","dangi","ethioaa","ethiopic","gregory","hebrew","indian","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","iso8601","japanese","persian","roc","islamicc"])]}}};Number.MAX_SAFE_INTEGER;var c=d(954),l=d(792),f={};try{process.env.CARBON_ENABLE_CSS_CUSTOM_PROPERTIES&&"true"===process.env.CARBON_ENABLE_CSS_CUSTOM_PROPERTIES?f.enableCssCustomProperties=!0:f.enableCssCustomProperties=!1,process.env.CARBON_ENABLE_USE_CONTROLLED_STATE_WITH_VALUE&&"true"===process.env.CARBON_ENABLE_USE_CONTROLLED_STATE_WITH_VALUE?f.enableUseControlledStateWithValue=!0:f.enableUseControlledStateWithValue=!1,process.env.CARBON_ENABLE_CSS_GRID&&"true"===process.env.CARBON_ENABLE_CSS_GRID?f.enableCssGrid=!0:f.enableCssGrid=!1,process.env.CARBON_ENABLE_V11_RELEASE?"true"===process.env.CARBON_ENABLE_V11_RELEASE?f.enableV11Release=!0:f.enableV11Release=!1:f.enableV11Release=!0,process.env.CARBON_ENABLE_EXPERIMENTAL_TILE_CONTRAST&&"true"===process.env.CARBON_ENABLE_EXPERIMENTAL_TILE_CONTRAST?f.enableExperimentalTileContrast=!0:f.enableExperimentalTileContrast=!1,process.env.CARBON_ENABLE_V12_TILE_DEFAULT_ICONS&&"true"===process.env.CARBON_ENABLE_V12_TILE_DEFAULT_ICONS?f.enableV12TileDefaultIcons=!0:f.enableV12TileDefaultIcons=!1,process.env.CARBON_ENABLE_V12_OVERFLOWMENU&&"true"===process.env.CARBON_ENABLE_V12_OVERFLOWMENU?f.enableV12Overflowmenu=!0:f.enableV12Overflowmenu=!1}catch(e){f.enableCssCustomProperties=!1,f.enableUseControlledStateWithValue=!1,f.enableCssGrid=!1,f.enableV11Release=!0,f.enableExperimentalTileContrast=!1,f.enableV12TileDefaultIcons=!1,f.enableV12Overflowmenu=!1}var h=[{name:"enable-css-custom-properties",description:"Describe what the flag does",enabled:f.enableCssCustomProperties},{name:"enable-use-controlled-state-with-value",description:"Enable components to be created in either a controlled or uncontrolled mode\n",enabled:f.enableUseControlledStateWithValue},{name:"enable-css-grid",description:"Enable CSS Grid Layout in the Grid and Column React components\n",enabled:f.enableCssGrid},{name:"enable-v11-release",description:"Enable the features and functionality for the v11 Release\n",enabled:f.enableV11Release},{name:"enable-experimental-tile-contrast",description:"Enable the experimental tile improved contrast styles\n",enabled:f.enableExperimentalTileContrast},{name:"enable-v12-tile-default-icons",description:"Enable rendering of default icons in the tile components\n",enabled:f.enableV12TileDefaultIcons},{name:"enable-v12-overflowmenu",description:"Enable the use of the v12 OverflowMenu leveraging the Menu subcomponents\n",enabled:f.enableV12Overflowmenu}];function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,"symbol"==(void 0===(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key))?"undefined":(o=i)&&"undefined"!=typeof Symbol&&o.constructor===Symbol?"symbol":typeof o)?i:String(i)),r)}var o,i}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}for(var g=function(){function e(t){var n=this;(function(e,t){if(n=e,!(null!=(r=t)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](n):n instanceof r))throw new TypeError("Cannot call a class as a function");var n,r})(this,e),this.flags=new Map,t&&Object.keys(t).forEach((function(e){n.flags.set(e,t[e])}))}var t,n;return t=e,n=[{key:"checkForFlag",value:function(e){if(!this.flags.has(e))throw new Error("Unable to find a feature flag with the name: `".concat(e,"`"))}},{key:"add",value:function(e,t){if(this.flags.has(e))throw new Error("The feature flag: ".concat(e," already exists"));this.flags.set(e,t)}},{key:"enable",value:function(e){this.checkForFlag(e),this.flags.set(e,!0)}},{key:"disable",value:function(e){this.checkForFlag(e),this.flags.set(e,!1)}},{key:"merge",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.flags.set(n,e[n])}))}},{key:"mergeWithScope",value:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=y(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(e.flags);try{for(n.s();!(t=n.n()).done;){var r=v(t.value,2),o=r[0],i=r[1];this.flags.has(o)||this.flags.set(o,i)}}catch(e){n.e(e)}finally{n.f()}}},{key:"enabled",value:function(e){return this.checkForFlag(e),this.flags.get(e)}}],n&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),b=new g(undefined),w=0;w<h.length;w++){var S=h[w];b.add(S.name,S.enabled)}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}!function(){b.merge.apply(b,arguments)}({"enable-css-custom-properties":!0,"enable-css-grid":!0,"enable-v11-release":!0,"enable-experimental-tile-contrast":!1}),d(279),new l.Subject,new l.Subject,d(740),d(976),new l.Subject,new l.Subject;var P=Object.freeze({__proto__:null,get start(){return ut},get ensureJQuerySupport(){return Ne},get setBootstrapMaxTime(){return ye},get setMountMaxTime(){return me},get setUnmountMaxTime(){return ge},get setUnloadMaxTime(){return be},get registerApplication(){return $e},get unregisterApplication(){return Qe},get getMountedApps(){return He},get getAppStatus(){return We},get unloadApplication(){return Je},get checkActivityFunctions(){return Ye},get getAppNames(){return qe},get pathToActiveWhen(){return et},get navigateToUrl(){return ke},get patchHistoryApi(){return De},get triggerAppChange(){return ot},get addErrorHandler(){return M},get removeErrorHandler(){return C},get mountRootParcel(){return fe},get NOT_LOADED(){return R},get LOADING_SOURCE_CODE(){return N},get NOT_BOOTSTRAPPED(){return B},get BOOTSTRAPPING(){return z},get NOT_MOUNTED(){return L},get MOUNTING(){return K},get UPDATING(){return V},get LOAD_ERROR(){return q},get MOUNTED(){return U},get UNLOADING(){return H},get UNMOUNTING(){return F},get SKIP_BECAUSE_BROKEN(){return W}}),k=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}).CustomEvent,j=function(){try{var e=new k("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?k:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n},A=[];function T(e,t,n){var r=I(e,t,n);A.length?A.forEach((function(e){return e(r)})):setTimeout((function(){throw r}))}function M(e){if("function"!=typeof e)throw Error(D(28,!1));A.push(e)}function C(e){if("function"!=typeof e)throw Error(D(29,!1));var t=!1;return A=A.filter((function(n){var r=n===e;return t=t||r,!r})),t}function D(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return"single-spa minified message #".concat(e,": ").concat(t?t+" ":"","See https://single-spa.js.org/error/?code=").concat(e).concat(r.length?"&arg=".concat(r.join("&arg=")):"")}function I(e,t,n){var r,o,i,a="".concat(J(t)," '").concat(Y(t),"' died in status ").concat(t.status,": ");if(o=e,null!=(i=Error)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](o):o instanceof i){try{e.message=a+e.message}catch(e){}r=e}else{console.warn(D(30,!1,t.status,Y(t)));try{r=Error(a+JSON.stringify(e))}catch(t){r=e}}return r.appOrParcelName=Y(t),t.status=n,r}var R="NOT_LOADED",N="LOADING_SOURCE_CODE",B="NOT_BOOTSTRAPPED",z="BOOTSTRAPPING",L="NOT_MOUNTED",K="MOUNTING",U="MOUNTED",V="UPDATING",F="UNMOUNTING",H="UNLOADING",q="LOAD_ERROR",W="SKIP_BECAUSE_BROKEN";function G(e){return e.status===U}function $(e){try{return e.activeWhen(window.location)}catch(t){return T(t,e,W),!1}}function Y(e){return e.name}function Q(e){return Boolean(e.unmountThisParcel)}function J(e){return Q(e)?"parcel":"application"}function X(){for(var e=arguments.length-1;e>0;e--)for(var t in arguments[e])"__proto__"!==t&&(arguments[e-1][t]=arguments[e][t]);return arguments[0]}function Z(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null}function ee(e){return e&&("function"==typeof e||(t=e,Array.isArray(t)&&!Z(t,(function(e){return"function"!=typeof e}))));var t}function te(e,t){var n=e[t]||[];0===(n=Array.isArray(n)?n:[n]).length&&(n=[function(){return Promise.resolve()}]);var r=J(e),o=Y(e);return function(e){return n.reduce((function(n,i,a){return n.then((function(){var n=i(e);return ne(n)?n:Promise.reject(D(15,!1,r,o,t,a))}))}),Promise.resolve())}}function ne(e){return e&&"function"==typeof e.then&&"function"==typeof e.catch}var re=[];function oe(e,t){var n=function(){return e.status=L,e};return Promise.resolve().then((function(){return e.status!==B?e:(e.status=z,e.bootstrap?we(e,"bootstrap").then(n).catch((function(n){if(t)throw I(n,e,W);return T(n,e,W),e})):Promise.resolve().then(n))}))}function ie(e,t){return Promise.resolve().then((function(){var n=function(){return we(e,"unmount").then((function(){e.status=L}),(function(n){if(t)throw I(n,e,W);T(n,e,W)}))};if(e.status!==U)return e;e.status=F;var r=Object.keys(e.parcels).map((function(t){return e.parcels[t].unmountThisParcel()}));return Promise.all(r).then(n,(function(r){return n().then((function(){var n=Error(r.message);if(t)throw I(n,e,W);T(n,e,W)}))})).then((function(){return e}))}))}var ae=!1,se=!1;function ue(e,t){return Promise.resolve().then((function(){return e.status!==L?e:(ae||(window.dispatchEvent(new j("single-spa:before-first-mount")),ae=!0),e.status=K,we(e,"mount").then((function(){return e.status=U,se||(window.dispatchEvent(new j("single-spa:first-mount")),se=!0),e})).catch((function(n){var r=function(){if(t)throw I(n,e,W);return T(n,e,W),e};return e.status=U,ie(e,!0).then(r,r)})))}))}var ce=0,le={parcels:{}};function fe(){return he.apply(le,arguments)}function he(e,t){var n=this;if(!e||"object"!=typeof e&&"function"!=typeof e)throw Error(D(2,!1));if(e.name&&"string"!=typeof e.name)throw Error(D(3,!1,x(e.name)));var r=ce++,o=e.name||"parcel-".concat(r);if("object"!=typeof t)throw Error(D(4,!1,o,void 0===t?"undefined":x(t)));if(!t.domElement)throw Error(D(5,!1,o));var i,a="function"==typeof e,s=a?e:function(){return Promise.resolve(e)},u={id:r,parcels:{},status:a?N:B,customProps:t,parentName:Y(n),unmountThisParcel:function(){return d.then((function(){if(u.status!==U)throw Error(D(6,!1,o,u.status));return ie(u,!0)})).then((function(e){return u.parentName&&delete n.parcels[u.id],e})).then((function(e){return l(e),e})).catch((function(e){throw u.status=W,f(e),e}))}};n.parcels[r]=u;var c=s();if(!c||"function"!=typeof c.then)throw Error(D(7,!1));c=c.then((function(e){if(!e)throw Error(D(8,!1));if(o=e.name||"parcel-".concat(r),Object.prototype.hasOwnProperty.call(e,"bootstrap")&&!ee(e.bootstrap))throw Error(D(9,!1,o));if(!ee(e.mount))throw Error(D(10,!1,o));if(!ee(e.unmount))throw Error(D(11,!1,o));if(e.update&&!ee(e.update))throw Error(D(12,!1,o));var t=te(e,"bootstrap"),n=te(e,"mount"),a=te(e,"unmount");u.status=B,u.name=o,u.bootstrap=t,u.mount=n,u.unmount=a,u.timeouts=_e(e.timeouts),e.update&&(u.update=te(e,"update"),i.update=function(e){return u.customProps=e,de((t=u,Promise.resolve().then((function(){if(t.status!==U)throw Error(D(32,!1,Y(t)));return t.status=V,we(t,"update").then((function(){return t.status=U,t})).catch((function(e){throw I(e,t,W)}))}))));var t})}));var l,f,h=c.then((function(){return oe(u,!0)})),d=h.then((function(){return ue(u,!0)})),p=new Promise((function(e,t){l=e,f=t}));return i={mount:function(){return de(Promise.resolve().then((function(){if(u.status!==L)throw Error(D(13,!1,o,u.status));return n.parcels[r]=u,ue(u)})))},unmount:function(){return de(u.unmountThisParcel())},getStatus:function(){return u.status},loadPromise:de(c),bootstrapPromise:de(h),mountPromise:de(d),unmountPromise:de(p)}}function de(e){return e.then((function(){return null}))}function pe(e){var t=Y(e),n="function"==typeof e.customProps?e.customProps(t,window.location):e.customProps;("object"!=typeof n||null===n||Array.isArray(n))&&(n={},console.warn(D(40,!1),t,n));var r=X({},n,{name:t,mountParcel:he.bind(e),singleSpa:P});return Q(e)&&(r.unmountSelf=e.unmountThisParcel),r}var ve={bootstrap:{millis:4e3,dieOnTimeout:!1,warningMillis:1e3},mount:{millis:3e3,dieOnTimeout:!1,warningMillis:1e3},unmount:{millis:3e3,dieOnTimeout:!1,warningMillis:1e3},unload:{millis:3e3,dieOnTimeout:!1,warningMillis:1e3},update:{millis:3e3,dieOnTimeout:!1,warningMillis:1e3}};function ye(e,t,n){if("number"!=typeof e||e<=0)throw Error(D(16,!1));ve.bootstrap={millis:e,dieOnTimeout:t,warningMillis:n||1e3}}function me(e,t,n){if("number"!=typeof e||e<=0)throw Error(D(17,!1));ve.mount={millis:e,dieOnTimeout:t,warningMillis:n||1e3}}function ge(e,t,n){if("number"!=typeof e||e<=0)throw Error(D(18,!1));ve.unmount={millis:e,dieOnTimeout:t,warningMillis:n||1e3}}function be(e,t,n){if("number"!=typeof e||e<=0)throw Error(D(19,!1));ve.unload={millis:e,dieOnTimeout:t,warningMillis:n||1e3}}function we(e,t){var n=e.timeouts[t],r=n.warningMillis,o=J(e);return new Promise((function(i,a){var s=!1,u=!1;e[t](pe(e)).then((function(e){s=!0,i(e)})).catch((function(e){s=!0,a(e)})),setTimeout((function(){return l(1)}),r),setTimeout((function(){return l(!0)}),n.millis);var c=D(31,!1,t,o,Y(e),n.millis);function l(e){if(!s)if(!0===e)u=!0,n.dieOnTimeout?a(Error(c)):console.error(c);else if(!u){var t=e,o=t*r;console.warn(c),o+r<n.millis&&setTimeout((function(){return l(t+1)}),r)}}}))}function _e(e){var t={};for(var n in ve)t[n]=X({},ve[n],e&&e[n]||{});return t}function Se(e){return Promise.resolve().then((function(){return e.loadPromise?e.loadPromise:e.status!==R&&e.status!==q?e:(e.status=N,e.loadPromise=Promise.resolve().then((function(){var r=e.loadApp(pe(e));if(!ne(r))throw n=!0,Error(D(33,!1,Y(e)));return r.then((function(n){var r;e.loadErrorTime=null,"object"!=typeof(t=n)&&(r=34),Object.prototype.hasOwnProperty.call(t,"bootstrap")&&!ee(t.bootstrap)&&(r=35),ee(t.mount)||(r=36),ee(t.unmount)||(r=37);var o=J(t);if(r){var i;try{i=JSON.stringify(t)}catch(e){}return console.error(D(r,!1,o,Y(e),i),t),T(void 0,e,W),e}return t.devtools&&t.devtools.overlays&&(e.devtools.overlays=X({},e.devtools.overlays,t.devtools.overlays)),e.status=B,e.bootstrap=te(t,"bootstrap"),e.mount=te(t,"mount"),e.unmount=te(t,"unmount"),e.unload=te(t,"unload"),e.timeouts=_e(t.timeouts),delete e.loadPromise,e}))})).catch((function(t){var r;return delete e.loadPromise,n?r=W:(r=q,e.loadErrorTime=(new Date).getTime()),T(t,e,r),e})));var t,n}))}var Oe,Ee="undefined"!=typeof window,xe={hashchange:[],popstate:[]},Pe=["hashchange","popstate"];function ke(e){var t;if("string"==typeof e)t=e;else if(this&&this.href)t=this.href;else{if(!(e&&e.currentTarget&&e.currentTarget.href&&e.preventDefault))throw Error(D(14,!1));t=e.currentTarget.href,e.preventDefault()}var n=Ie(window.location.href),r=Ie(t);0===t.indexOf("#")?window.location.hash=r.hash:n.host!==r.host&&r.host?window.location.href=t:r.pathname===n.pathname&&r.search===n.search?window.location.hash=r.hash:window.history.pushState(null,null,t)}function je(e){var t=this;if(e){var n=e[0].type;Pe.indexOf(n)>=0&&xe[n].forEach((function(n){try{n.apply(t,e)}catch(e){setTimeout((function(){throw e}))}}))}}function Ae(){it([],arguments)}function Te(e,t){return function(){var n=window.location.href,r=e.apply(this,arguments),o=window.location.href;return Oe&&n===o||window.dispatchEvent(function(e,t){var n;try{n=new PopStateEvent("popstate",{state:e})}catch(t){(n=document.createEvent("PopStateEvent")).initPopStateEvent("popstate",!1,!1,e)}return n.singleSpa=!0,n.singleSpaTrigger=t,n}(window.history.state,t)),r}}var Me=null,Ce=!1;function De(e){if(Ce)throw Error(D(43,!1));Oe=!e||!e.hasOwnProperty("urlRerouteOnly")||e.urlRerouteOnly,Ce=!0,Me=window.history.replaceState,window.addEventListener("hashchange",Ae),window.addEventListener("popstate",Ae);var t=window.addEventListener,n=window.removeEventListener;window.addEventListener=function(e,n){if(!("function"==typeof n&&Pe.indexOf(e)>=0)||Z(xe[e],(function(e){return e===n})))return t.apply(this,arguments);xe[e].push(n)},window.removeEventListener=function(e,t){if(!("function"==typeof t&&Pe.indexOf(e)>=0))return n.apply(this,arguments);xe[e]=xe[e].filter((function(e){return e!==t}))},window.history.pushState=Te(window.history.pushState,"pushState"),window.history.replaceState=Te(Me,"replaceState")}function Ie(e){var t=document.createElement("a");return t.href=e,t}Ee&&(window.singleSpaNavigate?console.warn(D(41,!1)):window.singleSpaNavigate=ke);var Re=!1;function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.jQuery;if(e||window.$&&window.$.fn&&window.$.fn.jquery&&(e=window.$),e&&!Re){var t=e.fn.on,n=e.fn.off;e.fn.on=function(e,n){return Be.call(this,t,window.addEventListener,e,n,arguments)},e.fn.off=function(e,t){return Be.call(this,n,window.removeEventListener,e,t,arguments)},Re=!0}}function Be(e,t,n,r,o){return"string"!=typeof n?e.apply(this,o):(n.split(/\s+/).forEach((function(e){Pe.indexOf(e)>=0&&(t(e,r),n=n.replace(e,""))})),""===n.trim()?this:e.apply(this,o))}var ze={};function Le(e){return Promise.resolve().then((function(){var t=ze[Y(e)];if(!t)return e;if(e.status===R)return Ke(e,t),e;if(e.status===H)return t.promise.then((function(){return e}));if(e.status!==L&&e.status!==q)return e;var n=e.status===q?Promise.resolve():we(e,"unload");return e.status=H,n.then((function(){return Ke(e,t),e})).catch((function(n){return function(e,t,n){delete ze[Y(e)],delete e.bootstrap,delete e.mount,delete e.unmount,delete e.unload,T(n,e,W),t.reject(n)}(e,t,n),e}))}))}function Ke(e,t){delete ze[Y(e)],delete e.bootstrap,delete e.mount,delete e.unmount,delete e.unload,e.status=R,t.resolve()}function Ue(e,t,n,r){ze[Y(e)]={app:e,resolve:n,reject:r},Object.defineProperty(ze[Y(e)],"promise",{get:t})}function Ve(e){return ze[e]}var Fe=[];function He(){return Fe.filter(G).map(Y)}function qe(){return Fe.map(Y)}function We(e){var t=Z(Fe,(function(t){return Y(t)===e}));return t?t.status:null}var Ge=!1;function $e(e,t,n,r){var o=function(e,t,n,r){var o,i={name:null,loadApp:null,activeWhen:null,customProps:null};return"object"==typeof e?(function(e){if(Array.isArray(e)||null===e)throw Error(D(39,!1));var t=["name","app","activeWhen","customProps"],n=Object.keys(e).reduce((function(e,n){return t.indexOf(n)>=0?e:e.concat(n)}),[]);if(0!==n.length)throw Error(D(38,!1,t.join(", "),n.join(", ")));if("string"!=typeof e.name||0===e.name.length)throw Error(D(20,!1));if("object"!=typeof e.app&&"function"!=typeof e.app)throw Error(D(20,!1));var r=function(e){return"string"==typeof e||"function"==typeof e};if(!(r(e.activeWhen)||Array.isArray(e.activeWhen)&&e.activeWhen.every(r)))throw Error(D(24,!1));if(!Ze(e.customProps))throw Error(D(22,!1))}(e),i.name=e.name,i.loadApp=e.app,i.activeWhen=e.activeWhen,i.customProps=e.customProps):(function(e,t,n,r){if("string"!=typeof e||0===e.length)throw Error(D(20,!1));if(!t)throw Error(D(23,!1));if("function"!=typeof n)throw Error(D(24,!1));if(!Ze(r))throw Error(D(22,!1))}(e,t,n,r),i.name=e,i.loadApp=t,i.activeWhen=n,i.customProps=r),i.loadApp="function"!=typeof(o=i.loadApp)?function(){return Promise.resolve(o)}:o,i.customProps=function(e){return e||{}}(i.customProps),i.activeWhen=function(e){var t=Array.isArray(e)?e:[e];return t=t.map((function(e){return"function"==typeof e?e:et(e)})),function(e){return t.some((function(t){return t(e)}))}}(i.activeWhen),i}(e,t,n,r);if(ct()||Ge||(Ge=!0,setTimeout((function(){ct()||console.warn(D(1,!1))}),5e3)),-1!==qe().indexOf(o.name))throw Error(D(21,!1,o.name));Fe.push(X({loadErrorTime:null,status:R,parcels:{},devtools:{overlays:{options:{},selectors:[]}}},o)),Ee&&(Ne(),it())}function Ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location;return Fe.filter((function(t){return t.activeWhen(e)})).map(Y)}function Qe(e){if(0===Fe.filter((function(t){return Y(t)===e})).length)throw Error(D(25,!1,e));return(Ee?Je(e,{waitForUnmount:!1}):Promise.resolve()).then((function(){var t=Fe.map(Y).indexOf(e);Fe.splice(t,1)}))}function Je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{waitForUnmount:!1};if("string"!=typeof e)throw Error(D(26,!1));var n=Z(Fe,(function(t){return Y(t)===e}));if(!n)throw Error(D(27,!1,e));var r,o=Ve(Y(n));if(t&&t.waitForUnmount){if(o)return o.promise;var i=new Promise((function(e,t){Ue(n,(function(){return i}),e,t)}));return i}return o?(r=o.promise,Xe(n,o.resolve,o.reject)):r=new Promise((function(e,t){Ue(n,(function(){return r}),e,t),Xe(n,e,t)})),r}function Xe(e,t,n){Promise.resolve().then((function(){if(Z(Ye(),(function(t){return t===Y(e)})))return ot()})).then((function(){return ie(e).then(Le).then((function(){t(),setTimeout((function(){it()}))}))})).catch(n)}function Ze(e){return!e||"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)}function et(e,t){var n=function(e,t){var n=function(n){var a=e.slice(r,n).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");if(i+=o?"[^/]+/?":a,n===e.length)if(o)t&&(i+="$");else{var s=t?"":".*";i="/"===i.charAt(i.length-1)?"".concat(i).concat(s,"$"):"".concat(i,"(/").concat(s,")?(#.*)?$")}o=!o,r=n},r=0,o=!1,i="^";"/"!==e[0]&&(e="/"+e);for(var a=0;a<e.length;a++){var s=e[a];(!o&&":"===s||o&&"/"===s)&&n(a)}return n(e.length),new RegExp(i,"i")}(e,t);return function(e){var t=e.origin;t||(t="".concat(e.protocol,"//").concat(e.host));var r=e.href.replace(t,"").replace(e.search,"").split("?")[0];return n.test(r)}}var tt=!1,nt=[],rt=Ee&&window.location.href;function ot(){return it()}function it(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t="function"==typeof(null==e?void 0:e.then)?e:Promise.resolve(e);p.push(t.catch((function(e){return console.warn(Error(D(42,!1))),console.warn(e),!1})))},o=function(){var t=He();e.forEach((function(e){return e.resolve(t)}));try{s(0===u.length?"no-app-change":"app-change",a()),s("routing-event",a())}catch(e){setTimeout((function(){throw e}))}if(tt=!1,nt.length>0){var n=nt;nt=[],it(n)}return t},i=function(){n||(e.forEach((function(e){je(e.eventArguments)})),je(t))},a=function(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1?arguments[1]:void 0,o={},i=(E(e={},U,[]),E(e,L,[]),E(e,R,[]),E(e,W,[]),e);n?(h.concat(d).forEach((function(e,t){s(e,U)})),l.forEach((function(e){s(e,R)})),f.forEach((function(e){s(e,L)}))):u.forEach((function(e){s(e)}));var a={detail:{newAppStatuses:o,appsByNewStatus:i,totalAppChanges:u.length,originalEvent:null==t?void 0:t[0],oldUrl:v,newUrl:y}};return r&&X(a.detail,r),a;function s(e,t){var n=Y(e);t=t||We(n),o[n]=t,(i[t]=i[t]||[]).push(n)}},s=function(e,t){n||window.dispatchEvent(new j("single-spa:".concat(e),t))};if(tt)return new Promise((function(e,n){nt.push({resolve:e,reject:n,eventArguments:t})}));var u,c=function(){var e=[],t=[],n=[],r=[],o=(new Date).getTime();return Fe.forEach((function(i){var a=i.status!==W&&$(i);switch(i.status){case q:a&&o-i.loadErrorTime>=200&&n.push(i);break;case R:case N:a&&n.push(i);break;case B:case L:!a&&Ve(Y(i))?e.push(i):a&&r.push(i);break;case U:a||t.push(i)}})),{appsToUnload:e,appsToUnmount:t,appsToLoad:n,appsToMount:r}}(),l=c.appsToUnload,f=c.appsToUnmount,h=c.appsToLoad,d=c.appsToMount,p=[],v=rt,y=rt=window.location.href;return ct()?(tt=!0,u=l.concat(h,f,d),Promise.resolve().then((function(){return s(0===u.length?"before-no-app-change":"before-app-change",a(!0)),s("before-routing-event",a(!0,{cancelNavigation:r})),Promise.all(p).then((function(n){if(n.some((function(e){return e})))return Me.call(window.history,history.state,"",v.substring(location.origin.length)),rt=location.href,tt=!1,it(e,t,!0);var r=l.map(Le),u=f.map(ie).map((function(e){return e.then(Le)})).concat(r),c=Promise.all(u);c.then((function(){s("before-mount-routing-event",a(!0))}),(function(e){throw e}));var p=h.map((function(e){return Se(e).then((function(e){return at(e,c)}))})),y=d.filter((function(e){return h.indexOf(e)<0})).map((function(e){return at(e,c)}));return c.catch((function(e){throw i(),e})).then((function(){return i(),Promise.all(p.concat(y)).catch((function(t){throw e.forEach((function(e){return e.reject(t)})),t})).then(o).then((function(){}),(function(e){throw e}))}))}))}))):(u=h,Promise.resolve().then((function(){var e=h.map(Se);return Promise.all(e).then(i).then((function(){return[]})).catch((function(e){throw i(),e})).finally((function(){}))})))}function at(e,t){return $(e)?oe(e).then((function(e){return t.then((function(){return $(e)?ue(e):e}))})):t.then((function(){return e}))}var st=!1;function ut(e){st=!0,Ee&&(De(e),it())}function ct(){return st}var lt={getRawAppData:function(){return function(e){if(Array.isArray(e))return O(e)}(e=Fe)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var e},reroute:it,NOT_LOADED:R,toLoadPromise:Se,toBootstrapPromise:oe,unregisterApplication:Qe,getProfilerData:function(){return re}};Ee&&window.__SINGLE_SPA_DEVTOOLS__&&(window.__SINGLE_SPA_DEVTOOLS__.exposedMethods=lt);var ft=d(685),ht=d(45);d(254),(0,ft.createGlobalStore)("modalState",{modalContainer:null,modalStack:[]}),window.getComputedStyle(document.body).overflow,d(513),d(901);(0,ft.createGlobalStore)("workspace",{context:"",openWorkspaces:[],prompt:null,workspaceWindowState:"normal"});var dt=null;try{dt=require("react").createContext()}catch(k){}function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){yt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mt(e){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var wt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}(r,c.Component);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mt(e);if(t){var o=mt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bt(e)}(this,n)}}(r);function r(e){var t;if(function(e,t){if(n=e,!(null!=(r=t)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](n):n instanceof r))throw new TypeError("Cannot call a class as a function");var n,r}(this,r),yt(bt(t=n.call(this,e)),"handleRef",(function(e){t.el=e})),yt(bt(t),"addThingToDo",(function(e,n){t.state.hasError&&"unmount"!==e||(t.nextThingToDo=(t.nextThingToDo||Promise.resolve()).then((function(){if(!t.unmounted||"unmount"===e)return n.apply(void 0,arguments)})).catch((function(n){throw t.nextThingToDo=Promise.resolve(),t.setState({hasError:!0}),n&&n.message&&(n.message="During '".concat(e,"', parcel threw an error: ").concat(n.message)),t.props.handleError?t.props.handleError(n):setTimeout((function(){throw n})),n})))})),yt(bt(t),"getParcelProps",(function(){var e=vt(vt({},t.props),{},{domElement:t.el});return delete e.mountParcel,delete e.config,delete e.wrapWith,delete e.wrapStyle,delete e.appendTo,delete e.handleError,delete e.parcelDidMount,e})),t.state={hasError:!1},!e.config)throw new Error("single-spa-react's Parcel component requires the 'config' prop to either be a parcel config or a loading function that returns a promise. See https://github.com/single-spa/single-spa-react");return t}return(t=[{key:"componentDidMount",value:function(){var e=this;this.addThingToDo("mount",(function(){var t,n=e.props.mountParcel||e.mountParcel;if(!n)throw new Error("\n\t\t\t\t  <Parcel /> was not passed a mountParcel prop, nor is it rendered where mountParcel is within the React context.\n\t\t\t\t  If you are using <Parcel /> within a module that is not a single-spa application, you will need to import mountRootParcel from single-spa and pass it into <Parcel /> as a mountParcel prop\t\n\t\t\t\t");return e.el?t=e.el:(e.createdDomElement=t=document.createElement(e.props.wrapWith),Object.keys(e.props.wrapStyle).forEach((function(n){t.style[n]=e.props.wrapStyle[n]})),e.props.appendTo.appendChild(t)),e.parcel=n(e.props.config,vt({domElement:t},e.getParcelProps())),e.parcel.mountPromise.then(e.props.parcelDidMount),e.parcel.mountPromise}))}},{key:"componentDidUpdate",value:function(){var e=this;this.addThingToDo("update",(function(){if(e.parcel&&e.parcel.update)return e.parcel.update(e.getParcelProps())}))}},{key:"componentWillUnmount",value:function(){var e=this;this.addThingToDo("unmount",(function(){if(e.parcel&&"MOUNTED"===e.parcel.getStatus())return e.parcel.unmount()})),this.createdDomElement&&this.createdDomElement.parentNode.removeChild(this.createdDomElement),this.unmounted=!0}},{key:"render",value:function(){var e=this;if(this.props.appendTo)return dt&&dt.Consumer?c.createElement(dt.Consumer,null,(function(t){return e.mountParcel=t?t.mountParcel:null,null})):null;var t=dt&&dt.Consumer?c.createElement(dt.Consumer,null,(function(t){return e.mountParcel=t?t.mountParcel:null,null})):void 0;return c.createElement(this.props.wrapWith,{ref:this.handleRef,style:this.props.wrapStyle,className:this.props.wrapClassName},t)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(r.prototype,t),r}();yt(wt,"defaultProps",{wrapWith:"div",wrapStyle:{},parcelDidMount:function(){}}),(0,ft.createGlobalStore)("left-nav",{slotName:null,basePath:window.spaBase});var _t=d(688);d(353);var St=d(921);const Ot=()=>{},Et=Ot(),xt=Object,Pt=e=>e===Et,kt=e=>"function"==typeof e,jt=(e,t)=>({...e,...t}),At=new WeakMap;let Tt=0;const Mt=e=>{const t=typeof e,n=e&&e.constructor,r=n==Date;let o,i;if(xt(e)!==e||r||n==RegExp)o=r?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(o=At.get(e),o)return o;if(o=++Tt+"~",At.set(e,o),n==Array){for(o="@",i=0;i<e.length;i++)o+=Mt(e[i])+",";At.set(e,o)}if(n==xt){o="#";const t=xt.keys(e).sort();for(;!Pt(i=t.pop());)Pt(e[i])||(o+=i+":"+Mt(e[i])+",");At.set(e,o)}}return o},Ct=new WeakMap,Dt={},It={},Rt="undefined",Nt=typeof window!=Rt,Bt=typeof document!=Rt,zt=(e,t)=>{const n=Ct.get(e);return[()=>!Pt(t)&&e.get(t)||Dt,r=>{if(!Pt(t)){const o=e.get(t);t in It||(It[t]=o),n[5](t,jt(o,r),o||Dt)}},n[6],()=>!Pt(t)&&t in It?It[t]:!Pt(t)&&e.get(t)||Dt]};let Lt=!0;const[Kt,Ut]=Nt&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Ot,Ot],Vt={isOnline:()=>Lt,isVisible:()=>{const e=Bt&&document.visibilityState;return Pt(e)||"hidden"!==e}},Ft={initFocus:e=>(Bt&&document.addEventListener("visibilitychange",e),Kt("focus",e),()=>{Bt&&document.removeEventListener("visibilitychange",e),Ut("focus",e)}),initReconnect:e=>{const t=()=>{Lt=!0,e()},n=()=>{Lt=!1};return Kt("online",t),Kt("offline",n),()=>{Ut("online",t),Ut("offline",n)}}},Ht=!c.default.useId,qt=!Nt||"Deno"in window,Wt=qt?c.useEffect:c.useLayoutEffect,Gt="undefined"!=typeof navigator&&navigator.connection,$t=!qt&&Gt&&(["slow-2g","2g"].includes(Gt.effectiveType)||Gt.saveData),Yt=e=>{if(kt(e))try{e=e()}catch(t){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?Mt(e):"",t]};let Qt=0;const Jt=()=>++Qt;async function Xt(...e){const[t,n,r,o]=e,i=jt({populateCache:!0,throwOnError:!0},"boolean"==typeof o?{revalidate:o}:o||{});let a=i.populateCache;const s=i.rollbackOnError;let u=i.optimisticData;const c=!1!==i.revalidate,l=i.throwOnError;if(kt(n)){const e=n,r=[],o=t.keys();for(const n of o)!/^\$(inf|sub)\$/.test(n)&&e(t.get(n)._k)&&r.push(n);return Promise.all(r.map(f))}return f(n);async function f(n){const[o]=Yt(n);if(!o)return;const[i,f]=zt(t,o),[h,d,p,v]=Ct.get(t),y=()=>{const e=h[o];return c&&(delete p[o],delete v[o],e&&e[0])?e[0](2).then((()=>i().data)):i().data};if(e.length<3)return y();let m,g=r;const b=Jt();d[o]=[b,0];const w=!Pt(u),_=i(),S=_.data,O=_._c,E=Pt(O)?S:O;if(w&&(u=kt(u)?u(E,S):u,f({data:u,_c:E})),kt(g))try{g=g(E)}catch(e){m=e}if(g&&(e=>kt(e.then))(g)){if(g=await g.catch((e=>{m=e})),b!==d[o][0]){if(m)throw m;return g}m&&w&&(e=>"function"==typeof s?s(e):!1!==s)(m)&&(a=!0,f({data:E,_c:Et}))}if(a&&!m)if(kt(a)){const e=a(g,E);f({data:e,error:Et,_c:Et})}else f({data:g,error:Et,_c:Et});if(d[o][1]=Jt(),Promise.resolve(y()).then((()=>{f({_c:Et})})),!m)return g;if(l)throw m}}const Zt=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},en=(e,t)=>{if(!Ct.has(e)){const n=jt(Ft,t),r={},o=Xt.bind(Et,e);let i=Ot;const a={},s=(e,t)=>{const n=a[e]||[];return a[e]=n,n.push(t),()=>n.splice(n.indexOf(t),1)},u=(t,n,r)=>{e.set(t,n);const o=a[t];if(o)for(const e of o)e(n,r)},c=()=>{if(!Ct.has(e)&&(Ct.set(e,[r,{},{},{},o,u,s]),!qt)){const t=n.initFocus(setTimeout.bind(Et,Zt.bind(Et,r,0))),o=n.initReconnect(setTimeout.bind(Et,Zt.bind(Et,r,1)));i=()=>{t&&t(),o&&o(),Ct.delete(e)}}};return c(),[e,o,c,i]}return[e,Ct.get(e)[4]]},[tn,nn]=en(new Map),rn=jt({onLoadingSlow:Ot,onSuccess:Ot,onError:Ot,onErrorRetry:(e,t,n,r,o)=>{const i=n.errorRetryCount,a=o.retryCount,s=~~((Math.random()+.5)*(1<<(a<8?a:8)))*n.errorRetryInterval;!Pt(i)&&a>i||setTimeout(r,s,o)},onDiscarded:Ot,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:$t?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:$t?5e3:3e3,compare:(e,t)=>Mt(e)==Mt(t),isPaused:()=>!1,cache:tn,mutate:nn,fallback:{}},Vt),on=(e,t)=>{const n=jt(e,t);if(t){const{use:r,fallback:o}=e,{use:i,fallback:a}=t;r&&i&&(n.use=r.concat(i)),o&&a&&(n.fallback=jt(o,a))}return n},an=(0,c.createContext)({}),sn="$inf$",un=Nt&&window.__SWR_DEVTOOLS_USE__,cn=un?window.__SWR_DEVTOOLS_USE__:[],ln=e=>kt(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],fn=cn.concat((e=>(t,n,r)=>e(t,n&&((...e)=>{const[r]=Yt(t),[,,,o]=Ct.get(tn);if(r.startsWith(sn))return n(...e);const i=o[r];return Pt(i)?n(...e):(delete o[r],i)}),r))),hn=(e,t)=>(...n)=>{const[r,o,i]=ln(n),a=(i.use||[]).concat(t);return e(r,o,{...i,use:a})};un&&(window.__SWR_DEVTOOLS_REACT__=c.default);const dn=c.default.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then((t=>{e.status="fulfilled",e.value=t}),(t=>{e.status="rejected",e.reason=t})),e)}),pn={dedupe:!0},vn=(xt.defineProperty((e=>{const{value:t}=e,n=(0,c.useContext)(an),r=kt(t),o=(0,c.useMemo)((()=>r?t(n):t),[r,n,t]),i=(0,c.useMemo)((()=>r?o:on(n,o)),[r,n,o]),a=o&&o.provider,s=(0,c.useRef)(Et);a&&!s.current&&(s.current=en(a(i.cache||tn),o));const u=s.current;return u&&(i.cache=u[0],i.mutate=u[1]),Wt((()=>{if(u)return u[2]&&u[2](),u[3]}),[]),(0,c.createElement)(an.Provider,jt(e,{value:i}))}),"defaultValue",{value:rn}),yn=(e,t,n)=>{const{cache:r,compare:o,suspense:i,fallbackData:a,revalidateOnMount:s,revalidateIfStale:u,refreshInterval:l,refreshWhenHidden:f,refreshWhenOffline:h,keepPreviousData:d}=n,[p,v,y,m]=Ct.get(r),[g,b]=Yt(e),w=(0,c.useRef)(!1),_=(0,c.useRef)(!1),S=(0,c.useRef)(g),O=(0,c.useRef)(t),E=(0,c.useRef)(n),x=()=>E.current,P=()=>x().isVisible()&&x().isOnline(),[k,j,A,T]=zt(r,g),M=(0,c.useRef)({}).current,C=Pt(a)?n.fallback[g]:a,D=(e,t)=>{for(const n in M){const r=n;if("data"===r){if(!o(e[r],t[r])){if(!Pt(e[r]))return!1;if(!o(V,t[r]))return!1}}else if(t[r]!==e[r])return!1}return!0},I=(0,c.useMemo)((()=>{const e=!!g&&!!t&&(Pt(s)?!x().isPaused()&&!i&&(!!Pt(u)||u):s),n=t=>{const n=jt(t);return delete n._k,e?{isValidating:!0,isLoading:!0,...n}:n},r=k(),o=T(),a=n(r),c=r===o?a:n(o);let l=a;return[()=>{const e=n(k());return D(e,l)?(l.data=e.data,l.isLoading=e.isLoading,l.isValidating=e.isValidating,l.error=e.error,l):(l=e,e)},()=>c]}),[r,g]),R=(0,St.useSyncExternalStore)((0,c.useCallback)((e=>A(g,((t,n)=>{D(n,t)||e()}))),[r,g]),I[0],I[1]),N=!w.current,B=p[g]&&p[g].length>0,z=R.data,L=Pt(z)?C:z,K=R.error,U=(0,c.useRef)(L),V=d?Pt(z)?U.current:z:L,F=!(B&&!Pt(K))&&(N&&!Pt(s)?s:!x().isPaused()&&(i?!Pt(L)&&u:Pt(L)||u)),H=!!(g&&t&&N&&F),q=Pt(R.isValidating)?H:R.isValidating,W=Pt(R.isLoading)?H:R.isLoading,G=(0,c.useCallback)((async e=>{const t=O.current;if(!g||!t||_.current||x().isPaused())return!1;let r,i,a=!0;const s=e||{},u=!y[g]||!s.dedupe,c=()=>Ht?!_.current&&g===S.current&&w.current:g===S.current,l={isValidating:!1,isLoading:!1},f=()=>{j(l)},h=()=>{const e=y[g];e&&e[1]===i&&delete y[g]},d={isValidating:!0};Pt(k().data)&&(d.isLoading=!0);try{if(u&&(j(d),n.loadingTimeout&&Pt(k().data)&&setTimeout((()=>{a&&c()&&x().onLoadingSlow(g,n)}),n.loadingTimeout),y[g]=[t(b),Jt()]),[r,i]=y[g],r=await r,u&&setTimeout(h,n.dedupingInterval),!y[g]||y[g][1]!==i)return u&&c()&&x().onDiscarded(g),!1;l.error=Et;const e=v[g];if(!Pt(e)&&(i<=e[0]||i<=e[1]||0===e[1]))return f(),u&&c()&&x().onDiscarded(g),!1;const s=k().data;l.data=o(s,r)?s:r,u&&c()&&x().onSuccess(r,g,n)}catch(e){h();const t=x(),{shouldRetryOnError:n}=t;t.isPaused()||(l.error=e,u&&c()&&(t.onError(e,g,t),(!0===n||kt(n)&&n(e))&&P()&&t.onErrorRetry(e,g,t,(e=>{const t=p[g];t&&t[0]&&t[0](3,e)}),{retryCount:(s.retryCount||0)+1,dedupe:!0})))}return a=!1,f(),!0}),[g,r]),$=(0,c.useCallback)(((...e)=>Xt(r,S.current,...e)),[]);if(Wt((()=>{O.current=t,E.current=n,Pt(z)||(U.current=z)})),Wt((()=>{if(!g)return;const e=G.bind(Et,pn);let t=0;const n=((e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const e=r.indexOf(n);e>=0&&(r[e]=r[r.length-1],r.pop())}})(g,p,((n,r={})=>{if(0==n){const n=Date.now();x().revalidateOnFocus&&n>t&&P()&&(t=n+x().focusThrottleInterval,e())}else if(1==n)x().revalidateOnReconnect&&P()&&e();else{if(2==n)return G();if(3==n)return G(r)}}));return _.current=!1,S.current=g,w.current=!0,j({_k:b}),F&&(Pt(L)||qt?e():(e=>{Nt&&typeof window.requestAnimationFrame!=Rt?window.requestAnimationFrame(e):setTimeout(e,1)})(e)),()=>{_.current=!0,n()}}),[g]),Wt((()=>{let e;function t(){const t=kt(l)?l(k().data):l;t&&-1!==e&&(e=setTimeout(n,t))}function n(){k().error||!f&&!x().isVisible()||!h&&!x().isOnline()?t():G(pn).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}}),[l,f,h,g]),(0,c.useDebugValue)(V),i&&Pt(L)&&g){if(!Ht&&qt)throw new Error("Fallback data is required when using suspense in SSR.");O.current=t,E.current=n,_.current=!1;const e=m[g];if(!Pt(e)){const t=$(e);dn(t)}if(!Pt(K))throw K;{const e=G(pn);Pt(V)||(e.status="fulfilled",e.value=!0),dn(e)}}return{mutate:$,get data(){return M.data=!0,V},get error(){return M.error=!0,K},get isValidating(){return M.isValidating=!0,q},get isLoading(){return M.isLoading=!0,W}}},function(...e){const t=jt(rn,(0,c.useContext)(an)),[n,r,o]=ln(e),i=on(t,o);let a=yn;const{use:s}=i,u=(s||[]).concat(fn);for(let e=u.length;e--;)a=u[e](a);return a(n,r||i.fetcher||null,i)});var yn,mn=d(641);function gn(e,t,n){return gn=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&wn(o,n.prototype),o},gn.apply(null,arguments)}function bn(e){return bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},bn(e)}function wn(e,t){return wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},wn(e,t)}function _n(e){var t="function"==typeof Map?new Map:void 0;return _n=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return gn(e,arguments,bn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),wn(n,e)},_n(e)}(0,ft.createGlobalStore)("breadcrumbs",[]);var Sn="/ws/rest/v1";"".concat(Sn,"/session"),_n(Error),"".concat(Sn,"/attachment"),(0,ft.createGlobalStore)("session",{loaded:!1,session:null}).subscribe((function(e){return e.session&&(t=e.session,i=null!==(o=null==t||null===(n=t.user)||void 0===n||null===(r=n.userProperties)||void 0===r?void 0:r.defaultLocale)&&void 0!==o?o:t.locale,a=document.documentElement.getAttribute("lang"),void(function(e){if(void 0===e||"string"!=typeof e)return!1;try{new Intl.Locale(e)}catch(e){return!1}return!0}(i)&&i!==a&&document.documentElement.setAttribute("lang",i)));var t,n,r,o,i,a})),d(593);var On,En,xn,Pn,kn=function(){try{return JSON.parse(localStorage.getItem("openmrs:visitStoreState")||"null")}catch(e){return null}}()||{patientUuid:null,manuallySetVisitUuid:null};function jn(e,t){return function(n){if(!e(n))return"function"==typeof t?t(n):t}}(0,ft.getGlobalStore)("visit",kn).subscribe((function(e){var t;t=e,localStorage.setItem("openmrs:visitStoreState",JSON.stringify(t))})),new l.BehaviorSubject(null),function(e){e.NEWVISIT="startVisit",e.EDITVISIT="editVisit",e.LOADING="loadingVisit"}(On||(On={})),function(e){e.NOTSTARTED="notStarted",e.ONGOING="ongoing"}(En||(En={})),(Pn=xn||(xn={})).Array="Array",Pn.Boolean="Boolean",Pn.ConceptUuid="ConceptUuid",Pn.Number="Number",Pn.Object="Object",Pn.String="String",Pn.UUID="UUID",Pn.PersonAttributeTypeUuid="PersonAttributeTypeUuid",Pn.PatientIdentifierTypeUuid="PatientIdentifierTypeUuid";var An;function Tn(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function Mn(e){return function t(n){return 0===arguments.length||Tn(n)?t:e.apply(this,arguments)}}function Cn(e){return function t(n,r){switch(arguments.length){case 0:return t;case 1:return Tn(n)?t:Mn((function(t){return e(n,t)}));default:return Tn(n)&&Tn(r)?t:Tn(n)?Mn((function(t){return e(t,r)})):Tn(r)?Mn((function(t){return e(n,t)})):e(n,r)}}}function Dn(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function In(e,t,n){for(var r=0,o=n.length;r<o;){if(e(t,n[r]))return!0;r+=1}return!1}function Rn(e,t){return Object.prototype.hasOwnProperty.call(t,e)}jn((function(e){if(!e||"string"!=typeof e)return!1;for(var t=/\${(.*?)}/g,n=t.exec(e);n;){if(!An.includes(n[1]))return!1;n=t.exec(e)}return!0}),"Should be a URL or path. The allowed template parameters are "+(An=[].concat(["openmrsBase","openmrsSpaBase"])).map((function(e){return"${"+e+"}"})).join(", "));const Nn="function"==typeof Object.is?Object.is:function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};var Bn=Object.prototype.toString,zn=function(){return"[object Arguments]"===Bn.call(arguments)?function(e){return"[object Arguments]"===Bn.call(e)}:function(e){return Rn("callee",e)}}();const Ln=zn;var Kn=!{toString:null}.propertyIsEnumerable("toString"),Un=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Vn=function(){return arguments.propertyIsEnumerable("length")}(),Fn=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1};const Hn="function"!=typeof Object.keys||Vn?Mn((function(e){if(Object(e)!==e)return[];var t,n,r=[],o=Vn&&Ln(e);for(t in e)!Rn(t,e)||o&&"length"===t||(r[r.length]=t);if(Kn)for(n=Un.length-1;n>=0;)Rn(t=Un[n],e)&&!Fn(r,t)&&(r[r.length]=t),n-=1;return r})):Mn((function(e){return Object(e)!==e?[]:Object.keys(e)})),qn=Mn((function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}));function Wn(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function Gn(e,t,n,r){var o=function(e,t){return $n(e,t,n.slice(),r.slice())},i=Dn(e);return!In((function(e,t){return!In(o,t,e)}),Dn(t),i)}function $n(e,t,n,r){if(Nn(e,t))return!0;var o=qn(e);if(o!==qn(t))return!1;if(null==e||null==t)return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(o){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===function(e){var t=String(e).match(/^function (\w*)/);return null==t?"":t[1]}(e.constructor))return e===t;break;case"Boolean":case"Number":case"String":if((void 0===e?"undefined":Wn(e))!==(void 0===t?"undefined":Wn(t))||!Nn(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!Nn(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1}for(var i=n.length-1;i>=0;){if(n[i]===e)return r[i]===t;i-=1}switch(o){case"Map":return e.size===t.size&&Gn(e.entries(),t.entries(),n.concat([e]),r.concat([t]));case"Set":return e.size===t.size&&Gn(e.values(),t.values(),n.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=Hn(e);if(a.length!==Hn(t).length)return!1;var s=n.concat([e]),u=r.concat([t]);for(i=a.length-1;i>=0;){var c=a[i];if(!Rn(c,t)||!$n(t[c],e[c],s,u))return!1;i-=1}return!0}var Yn=Cn((function(e,t){return $n(e,t,[],[])}));const Qn=Yn;function Jn(e,t,n,r){var o,i=function(o){for(var i=t.length,a=0;a<i;){if(e===t[a])return n[a];a+=1}for(var s in t[a+1]=e,n[a+1]=o,e)o[s]=r?Jn(e[s],t,n,!0):e[s];return o};switch(qn(e)){case"Object":return i({});case"Array":return i([]);case"Date":return new Date(e.valueOf());case"RegExp":return o=e,new RegExp(o.source,(o.global?"g":"")+(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.sticky?"y":"")+(o.unicode?"u":""));default:return e}}const Xn=Mn((function(e){return null!=e&&"function"==typeof e.clone?e.clone():Jn(e,[],[],!0)}));function Zn(e){return function t(n,r,o){switch(arguments.length){case 0:return t;case 1:return Tn(n)?t:Cn((function(t,r){return e(n,t,r)}));case 2:return Tn(n)&&Tn(r)?t:Tn(n)?Cn((function(t,n){return e(t,r,n)})):Tn(r)?Cn((function(t,r){return e(n,t,r)})):Mn((function(t){return e(n,r,t)}));default:return Tn(n)&&Tn(r)&&Tn(o)?t:Tn(n)&&Tn(r)?Cn((function(t,n){return e(t,n,o)})):Tn(n)&&Tn(o)?Cn((function(t,n){return e(t,r,n)})):Tn(r)&&Tn(o)?Cn((function(t,r){return e(n,t,r)})):Tn(n)?Mn((function(t){return e(t,r,o)})):Tn(r)?Mn((function(t){return e(n,t,o)})):Tn(o)?Mn((function(t){return e(n,r,t)})):e(n,r,o)}}}const er=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};var tr=Mn((function(e){return!!er(e)||!!e&&"object"==typeof e&&!function(e){return"[object String]"===Object.prototype.toString.call(e)}(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1))}));const nr=tr;var rr=function(){var e=function(e){this.f=e};return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}(),or=Cn((function(e,t){return function(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,o){return t.apply(this,arguments)};case 5:return function(e,n,r,o,i){return t.apply(this,arguments)};case 6:return function(e,n,r,o,i,a){return t.apply(this,arguments)};case 7:return function(e,n,r,o,i,a,s){return t.apply(this,arguments)};case 8:return function(e,n,r,o,i,a,s,u){return t.apply(this,arguments)};case 9:return function(e,n,r,o,i,a,s,u,c){return t.apply(this,arguments)};case 10:return function(e,n,r,o,i,a,s,u,c,l){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}(e.length,(function(){return e.apply(t,arguments)}))}));const ir=or;function ar(e,t,n){for(var r=n.next();!r.done;){if((t=e["@@transducer/step"](t,r.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=n.next()}return e["@@transducer/result"](t)}function sr(e,t,n,r){return e["@@transducer/result"](n[r](ir(e["@@transducer/step"],e),t))}var ur="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function cr(e,t,n){if("function"==typeof e&&(e=function(e){return new rr(e)}(e)),nr(n))return function(e,t,n){for(var r=0,o=n.length;r<o;){if((t=e["@@transducer/step"](t,n[r]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}(e,t,n);if("function"==typeof n["fantasy-land/reduce"])return sr(e,t,n,"fantasy-land/reduce");if(null!=n[ur])return ar(e,t,n[ur]());if("function"==typeof n.next)return ar(e,t,n);if("function"==typeof n.reduce)return sr(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}const lr=Zn(cr);function fr(e){return"[object Object]"===Object.prototype.toString.call(e)}var hr=Zn((function(e,t,n){var r,o={};for(r in t)Rn(r,t)&&(o[r]=Rn(r,n)?e(r,t[r],n[r]):t[r]);for(r in n)Rn(r,n)&&!Rn(r,o)&&(o[r]=n[r]);return o}));const dr=hr;var pr=Zn((function e(t,n,r){return dr((function(n,r,o){return fr(r)&&fr(o)?e(t,r,o):t(n,r,o)}),n,r)}));const vr=pr,yr=Cn((function(e,t){return vr((function(e,t,n){return n}),e,t)}));var mr=jn((function(e){return Array.isArray(e)}),"must be an array"),gr=jn((function(e){return"boolean"==typeof e}),"must be a boolean"),br=jn((function(e){return"number"==typeof e}),"must be a number"),wr=jn((function(e){return"string"==typeof e}),"must be a string"),_r=jn((function(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}),"must be an object (not an array or null)"),Sr=jn((function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)||/^[0-9a-f]{36}$/i.test(e)}),"must be a valid UUID or a 36-character hexadecimal string"),Or=(0,ft.createGlobalStore)("config-internal",{providedConfigs:[],schemas:{},moduleLoaded:{}}),Er=(0,ft.createGlobalStore)("temporary-config",{config:function(){try{return JSON.parse(localStorage.getItem("openmrs:temporaryConfig")||"{}")}catch(e){return{}}}()});Er.subscribe((function(e){var t;t=e.config,localStorage.setItem("openmrs:temporaryConfig",JSON.stringify(t))}));var xr=(0,ft.createGlobalStore)("config-store-of-extension-state",{mountedExtensions:[]});function Pr(e){return(0,ft.getGlobalStore)("config-module-".concat(e),{config:null,loaded:!1,translationOverridesLoaded:!1})}var kr=(0,ft.createGlobalStore)("config-implementer-tools",{config:{}});function jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ar(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ar(e,t,n[t])}))}return e}function Mr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||Ir(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dr(e){return function(e){if(Array.isArray(e))return jr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ir(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ir(e,t){if(e){if("string"==typeof e)return jr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jr(e,t):void 0}}function Rr(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=Object.keys(e.schemas)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,u=Pr(s);if(e.moduleLoaded[s]){var c=Hr(s,e,t);u.setState({translationOverridesLoaded:!0,loaded:!0,config:c})}else{var l=qr(s,e,t);u.setState({translationOverridesLoaded:!0,loaded:!1,config:l})}}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}function Nr(e,t){var n,r,o=(n=Gr(Fr(e,t)),function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=Object.entries(e)[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=Cr(o.value,2),s=a[0],u=a[1],c=!0,l=!1,f=void 0;try{for(var h,d=Object.entries(u)[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=Cr(h.value,2),v=p[0];Vr(p[1],s,v)}}catch(e){l=!0,f=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}(r=Object.keys(n).reduce((function(e,t){var r,o;return(null===(r=n[t])||void 0===r?void 0:r.extensionSlots)&&(e[t]=null===(o=n[t])||void 0===o?void 0:o.extensionSlots),e}),{})),Object.keys(r).reduce((function(e,t){return Tr({},e,r[t])}),{})),i=Object.fromEntries(Object.entries(o).map((function(e){var t=Cr(e,2);return[t[0],{loaded:!0,config:t[1]}]}))),a=(0,ft.getGlobalStore)("config-extension-slots",{slots:{}}),s=a.getState(),u={slots:Tr({},s.slots,i)};Qn(s,u)||a.setState(u)}function Br(e,t){var n=function(e,t){var n=Kr(Xn(e.schemas)),r=Dr(e.providedConfigs.map((function(e){return[e.config,e.source]}))).concat([[t.config,"temporary config"]]),o=!0,i=!1,a=void 0;try{for(var s,u=r[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=Cr(s.value,2);n=Gr([n,Ur(c[0],c[1])])}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t);kr.setState({config:n})}function zr(e,t,n){var r={},o=!0,i=!1,a=void 0;try{for(var s,u=t.mountedExtensions[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=s.value,l=Lr(c.slotModuleName,c.extensionModuleName,c.slotName,c.extensionId,e,n);r[c.slotName]=Mr(Tr({},r[c.slotName]),Ar({},c.extensionId,{config:l,loaded:!0}))}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}(0,ft.getGlobalStore)("config-extensions",{configs:{}}).setState({configs:r})}function Lr(e,t,n,r,o,i){var a,s,u,c,l=function(e){return Cr(e.split("#"),1)[0]}(r),f=o.schemas[l],h=f?l:t,d=Fr(o,i),p=Wr(e,d),v=null!==(c=null==p||null===(a=p.extensionSlots)||void 0===a||null===(s=a[n])||void 0===s||null===(u=s.configure)||void 0===u?void 0:u[r])&&void 0!==c?c:{},y=Gr([Wr(h,d),v]),m=null!=f?f:o.schemas[t];$r(m,y,h);var g=Zr(m,y);return Qr(m,g,h),delete g.extensionSlots,g}function Kr(e){return e.hasOwnProperty("_default")?Mr(Tr({},e),{_value:e._default,_source:"default"}):to(e)?Object.keys(e).reduce((function(t,n){return t[n]=Kr(e[n]),t}),{}):{}}function Ur(e,t){return to(e)?Object.keys(e).reduce((function(n,r){return n[r]=Ur(e[r],t),n}),{}):{_value:e,_source:t}}function Vr(e,t,n){var r="".concat(t,".extensionSlots.").concat(n),o="Extension slot config '".concat(r,"'"),i=Object.keys(e).filter((function(e){return!["add","remove","order","configure"].includes(e)}));i.length&&ro(r,o+"' contains invalid keys '".concat(i.join("', '"),"'")),e.add&&(Array.isArray(e.add)&&e.add.every((function(e){return"string"==typeof e}))||ro(r,o+".add' is invalid. Must be an array of strings (extension IDs)")),e.remove&&(Array.isArray(e.remove)&&e.remove.every((function(e){return"string"==typeof e}))||ro(r,o+".remove' is invalid. Must be an array of strings (extension IDs)")),e.order&&(Array.isArray(e.order)&&e.order.every((function(e){return"string"==typeof e}))||ro(r,o+".order' is invalid. Must be an array of strings (extension IDs)")),e.configure&&(to(e.configure)||ro(r,o+".configure' is invalid. Must be an object with extension IDs for keys"))}function Fr(e,t){return Dr(e.providedConfigs.map((function(e){return e.config}))).concat([t.config])}function Hr(e,t,n){var r=t.schemas[e],o=Wr(e,Fr(t,n));$r(r,o,e);var i=Zr(r,o);return Qr(r,i,e),delete i.extensionSlots,i}function qr(e,t,n){var r=Wr(e,Fr(t,n)),o=Zr(io,r);return Qr(io,o,e),delete o.extensionSlots,o}function Wr(e,t){var n=t.map((function(t){return t[e]})).filter((function(e){return!!e}));return Gr(n)}function Gr(e){return lr(yr)({},e)}function $r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=!0,o=!1,i=void 0;try{for(var a,s=Object.keys(t)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,c=t[u],l=n+"."+u,f=e[u];e.hasOwnProperty(u)?Yr(f,c,l):"extensionSlots"===u&&""!==n||ro(l,"Unknown config key '".concat(l,"' provided. Ignoring."))}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}function Yr(e,t,n){Jr(n,e._type,t),to(t)?e._type===xn.Object?function(e,t,n){if(e._elements){var r=!0,o=!1,i=void 0;try{for(var a,s=Object.keys(t)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,c=t[u];$r(e._elements,c,"".concat(n,".").concat(u))}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}}(e,t,n):e.hasOwnProperty("_default")||e.hasOwnProperty("_type")||$r(e,t,n):e._type===xn.Array&&function(e,t,n){if(Jr(n,xn.Array,t)){if(eo(e._elements))for(var r=0;r<t.length;r++)Yr(e._elements,t[r],"".concat(n,"[").concat(r,"]"));for(var o=0;o<t.length;o++){var i;Jr("".concat(n,"[").concat(o,"]"),null===(i=e._elements)||void 0===i?void 0:i._type,t[o])}}}(e,t,n)}function Qr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(e)if(t!==e._default&&Xr(n,e._validators,t),to(t)){var r=!0,o=!1,i=void 0;try{for(var a,s=Object.keys(t)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,c=t[u],l=n+"."+u,f=e[u];e._type===xn.Object&&e._elements?Qr(e._elements,c,l):Qr(f,c,l)}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}else if(Array.isArray(t)&&e._elements)for(var h=0;h<t.length;h++)Qr(e._elements,t[h],"".concat(n,"[").concat(h,"]"))}function Jr(e,t,n){return!t||Xr(e,[{Array:mr,Boolean:gr,ConceptUuid:Sr,Number:br,Object:_r,String:wr,UUID:Sr,PersonAttributeTypeUuid:Sr,PatientIdentifierTypeUuid:Sr}[t]],n)}function Xr(e,t,n){var r=!0;if(t)try{var o=!0,i=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=(0,s.value)(n);"string"==typeof c&&(ro(e,"object"==typeof n?"Invalid configuration for ".concat(e,": ").concat(c):"Invalid configuration value ".concat(n," for ").concat(e,": ").concat(c)),r=!1)}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}}catch(t){console.error('Skipping invalid validator at "'.concat(e,'". Encountered error\n\t').concat(t))}return r}Rr(Or.getState(),Er.getState()),Or.subscribe((function(e){return Rr(e,Er.getState())})),Er.subscribe((function(e){return Rr(Or.getState(),e)})),Br(Or.getState(),Er.getState()),Or.subscribe((function(e){return Br(e,Er.getState())})),Er.subscribe((function(e){return Br(Or.getState(),e)})),Nr(Or.getState(),Er.getState()),Or.subscribe((function(e){return Nr(e,Er.getState())})),Er.subscribe((function(e){return Nr(Or.getState(),e)})),zr(Or.getState(),xr.getState(),Er.getState()),Or.subscribe((function(e){zr(e,xr.getState(),Er.getState())})),xr.subscribe((function(e){zr(Or.getState(),e,Er.getState())})),Er.subscribe((function(e){zr(Or.getState(),xr.getState(),e)}));var Zr=function(e,t){var n=Xn(t);if(!e)return n;var r=!0,o=!1,i=void 0;try{for(var a,s=function(){var t=a.value,r=n[t],o=e[t];if(o&&(o.hasOwnProperty("_type")||o.hasOwnProperty("_default"))){n.hasOwnProperty(t)||(n[t]=o._default);var i=o._elements;if(r&&eo(i))if(o._type===xn.Array&&Array.isArray(r)){var s=r.map((function(e){return Zr(i,e)}));n[t]=s}else if(o._type===xn.Object){var u=!0,c=!1,l=void 0;try{for(var f,h=Object.keys(r)[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value;r[d]=Zr(i,r[d])}}catch(e){c=!0,l=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}}}else if(to(o)){var p=null!=r?r:{};to(p)&&(n[t]=Zr(o,p))}},u=Object.keys(e)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)s()}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n};function eo(e){return!!e&&Object.keys(e).filter((function(e){return!["_default","_validators"].includes(e)})).length>0}function to(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}var no=new Set;function ro(e,t){var n="".concat(e,":::").concat(t);no.has(n)||(console.error(t),no.add(n))}var oo={"Translation overrides":{_description:"Per-language overrides for frontend translations should be keyed by language code and each language dictionary contains the translation key and the display value",_type:xn.Object,_default:{},_validators:[jn((function(e){return Object.keys(e).every((function(e){return/^[a-z]{2,3}(-[A-Z]{2,3})?$/.test(e)}))}),(function(e){var t=Object.keys(e).filter((function(e){return!/^[a-z]{2,3}(-[A-Z]{2,3})?$/.test(e)}));return"The 'Translation overrides' object should have language codes for keys. Language codes must be in the form of a two-to-three letter language code optionally followed by a hyphen and a two-to-three letter country code. The following keys do not conform: ".concat(t.join(", "),".")}))]}},io=Tr({"Display conditions":{privileges:{_description:"The privilege(s) the user must have to use this extension",_type:xn.Array,_default:[]}}},oo);d(570);const ao=function(e,t){return e===t||e!=e&&t!=t},so=function(e,t){for(var n=e.length;n--;)if(ao(e[n][0],t))return n;return-1};var uo=Array.prototype.splice;function co(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}co.prototype.clear=function(){this.__data__=[],this.size=0},co.prototype.delete=function(e){var t=this.__data__,n=so(t,e);return!(n<0||(n==t.length-1?t.pop():uo.call(t,n,1),--this.size,0))},co.prototype.get=function(e){var t=this.__data__,n=so(t,e);return n<0?void 0:t[n][1]},co.prototype.has=function(e){return so(this.__data__,e)>-1},co.prototype.set=function(e,t){var n=this.__data__,r=so(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};const lo=co,fo="object"==typeof global&&global&&global.Object===Object&&global;var ho="object"==typeof self&&self&&self.Object===Object&&self;const po=fo||ho||Function("return this")(),vo=po.Symbol;var yo=Object.prototype,mo=yo.hasOwnProperty,go=yo.toString,bo=vo?vo.toStringTag:void 0;var wo=Object.prototype.toString;var _o=vo?vo.toStringTag:void 0;const So=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":_o&&_o in Object(e)?function(e){var t=mo.call(e,bo),n=e[bo];try{e[bo]=void 0;var r=!0}catch(e){}var o=go.call(e);return r&&(t?e[bo]=n:delete e[bo]),o}(e):function(e){return wo.call(e)}(e)},Oo=function(e){var t,n=void 0===e?"undefined":(t=e)&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t;return null!=e&&("object"==n||"function"==n)},Eo=function(e){if(!Oo(e))return!1;var t=So(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},xo=po["__core-js_shared__"];var Po,ko=(Po=/[^.]+$/.exec(xo&&xo.keys&&xo.keys.IE_PROTO||""))?"Symbol(src)_1."+Po:"";var jo=Function.prototype.toString;const Ao=function(e){if(null!=e){try{return jo.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var To=/^\[object .+?Constructor\]$/,Mo=Function.prototype,Co=Object.prototype,Do=Mo.toString,Io=Co.hasOwnProperty,Ro=RegExp("^"+Do.call(Io).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const No=function(e){return!(!Oo(e)||(t=e,ko&&ko in t))&&(Eo(e)?Ro:To).test(Ao(e));var t},Bo=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return No(n)?n:void 0},zo=Bo(po,"Map"),Lo=Bo(Object,"create");var Ko=Object.prototype.hasOwnProperty;var Uo=Object.prototype.hasOwnProperty;function Vo(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Vo.prototype.clear=function(){this.__data__=Lo?Lo(null):{},this.size=0},Vo.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Vo.prototype.get=function(e){var t=this.__data__;if(Lo){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Ko.call(t,e)?t[e]:void 0},Vo.prototype.has=function(e){var t=this.__data__;return Lo?void 0!==t[e]:Uo.call(t,e)},Vo.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Lo&&void 0===t?"__lodash_hash_undefined__":t,this};const Fo=Vo,Ho=function(e,t){var n,r,o,i=e.__data__;return("string"==(o=void 0===(n=t)?"undefined":(r=n)&&"undefined"!=typeof Symbol&&r.constructor===Symbol?"symbol":typeof r)||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map};function qo(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}qo.prototype.clear=function(){this.size=0,this.__data__={hash:new Fo,map:new(zo||lo),string:new Fo}},qo.prototype.delete=function(e){var t=Ho(this,e).delete(e);return this.size-=t?1:0,t},qo.prototype.get=function(e){return Ho(this,e).get(e)},qo.prototype.has=function(e){return Ho(this,e).has(e)},qo.prototype.set=function(e,t){var n=Ho(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};const Wo=qo;function Go(e){var t=this.__data__=new lo(e);this.size=t.size}Go.prototype.clear=function(){this.__data__=new lo,this.size=0},Go.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Go.prototype.get=function(e){return this.__data__.get(e)},Go.prototype.has=function(e){return this.__data__.has(e)},Go.prototype.set=function(e,t){var n,r,o=this.__data__;if(n=o,null!=(r=lo)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](n):n instanceof r){var i=o.__data__;if(!zo||i.length<199)return i.push([e,t]),this.size=++o.size,this;o=this.__data__=new Wo(i)}return o.set(e,t),this.size=o.size,this};const $o=Go;function Yo(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Wo;++t<n;)this.add(e[t])}Yo.prototype.add=Yo.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Yo.prototype.has=function(e){return this.__data__.has(e)};const Qo=Yo,Jo=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},Xo=function(e,t){return e.has(t)},Zo=function(e,t,n,r,o,i){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=i.get(e),l=i.get(t);if(c&&l)return c==t&&l==e;var f=-1,h=!0,d=2&n?new Qo:void 0;for(i.set(e,t),i.set(t,e);++f<s;){var p=e[f],v=t[f];if(r)var y=a?r(v,p,f,t,e,i):r(p,v,f,e,t,i);if(void 0!==y){if(y)continue;h=!1;break}if(d){if(!Jo(t,(function(e,t){if(!Xo(d,t)&&(p===e||o(p,e,n,r,i)))return d.push(t)}))){h=!1;break}}else if(p!==v&&!o(p,v,n,r,i)){h=!1;break}}return i.delete(e),i.delete(t),h},ei=po.Uint8Array,ti=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},ni=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n};var ri=vo?vo.prototype:void 0,oi=ri?ri.valueOf:void 0;const ii=Array.isArray;var ai=Object.prototype.propertyIsEnumerable,si=Object.getOwnPropertySymbols;const ui=si?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}(si(e),(function(t){return ai.call(e,t)})))}:function(){return[]},ci=function(e){return null!=e&&"object"==typeof e},li=function(e){return ci(e)&&"[object Arguments]"==So(e)};var fi=Object.prototype,hi=fi.hasOwnProperty,di=fi.propertyIsEnumerable,pi=li(function(){return arguments}())?li:function(e){return ci(e)&&hi.call(e,"callee")&&!di.call(e,"callee")};const vi=pi;var yi="object"==typeof exports&&exports&&!exports.nodeType&&exports,mi=yi&&"object"==typeof module&&module&&!module.nodeType&&module,gi=mi&&mi.exports===yi?po.Buffer:void 0;const bi=(gi?gi.isBuffer:void 0)||function(){return!1};var wi=/^(?:0|[1-9]\d*)$/;const _i=function(e,t){var n,r=void 0===e?"undefined":(n=e)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&wi.test(e))&&e>-1&&e%1==0&&e<t},Si=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var Oi={};Oi["[object Float32Array]"]=Oi["[object Float64Array]"]=Oi["[object Int8Array]"]=Oi["[object Int16Array]"]=Oi["[object Int32Array]"]=Oi["[object Uint8Array]"]=Oi["[object Uint8ClampedArray]"]=Oi["[object Uint16Array]"]=Oi["[object Uint32Array]"]=!0,Oi["[object Arguments]"]=Oi["[object Array]"]=Oi["[object ArrayBuffer]"]=Oi["[object Boolean]"]=Oi["[object DataView]"]=Oi["[object Date]"]=Oi["[object Error]"]=Oi["[object Function]"]=Oi["[object Map]"]=Oi["[object Number]"]=Oi["[object Object]"]=Oi["[object RegExp]"]=Oi["[object Set]"]=Oi["[object String]"]=Oi["[object WeakMap]"]=!1;var Ei="object"==typeof exports&&exports&&!exports.nodeType&&exports,xi=Ei&&"object"==typeof module&&module&&!module.nodeType&&module,Pi=xi&&xi.exports===Ei&&fo.process,ki=function(){try{return xi&&xi.require&&xi.require("util").types||Pi&&Pi.binding&&Pi.binding("util")}catch(e){}}(),ji=ki&&ki.isTypedArray;const Ai=ji?(Ti=ji,function(e){return Ti(e)}):function(e){return ci(e)&&Si(e.length)&&!!Oi[So(e)]};var Ti,Mi=Object.prototype.hasOwnProperty;const Ci=function(e,t){var n=ii(e),r=!n&&vi(e),o=!n&&!r&&bi(e),i=!n&&!r&&!o&&Ai(e),a=n||r||o||i,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=s.length;for(var c in e)!t&&!Mi.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_i(c,u))||s.push(c);return s};var Di=Object.prototype;const Ii=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object);var Ri=Object.prototype.hasOwnProperty;const Ni=function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||Di))return Ii(e);var t,n,r=[];for(var o in Object(e))Ri.call(e,o)&&"constructor"!=o&&r.push(o);return r},Bi=function(e){return null!=(t=e)&&Si(t.length)&&!Eo(t)?Ci(e):Ni(e);var t},zi=function(e){return function(e,t,n){var r=t(e);return ii(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,Bi,ui)};function Li(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var Ki=Object.prototype.hasOwnProperty;const Ui=Bo(po,"DataView"),Vi=Bo(po,"Promise"),Fi=Bo(po,"Set"),Hi=Bo(po,"WeakMap");var qi="[object Map]",Wi="[object Promise]",Gi="[object Set]",$i="[object WeakMap]",Yi="[object DataView]",Qi=Ao(Ui),Ji=Ao(zo),Xi=Ao(Vi),Zi=Ao(Fi),ea=Ao(Hi),ta=So;(Ui&&ta(new Ui(new ArrayBuffer(1)))!=Yi||zo&&ta(new zo)!=qi||Vi&&ta(Vi.resolve())!=Wi||Fi&&ta(new Fi)!=Gi||Hi&&ta(new Hi)!=$i)&&(ta=function(e){var t=So(e),n="[object Object]"==t?e.constructor:void 0,r=n?Ao(n):"";if(r)switch(r){case Qi:return Yi;case Ji:return qi;case Xi:return Wi;case Zi:return Gi;case ea:return $i}return t});const na=ta;var ra="[object Arguments]",oa="[object Array]",ia="[object Object]",aa=Object.prototype.hasOwnProperty;const sa=function(e,t,n,r,o,i){var a=ii(e),s=ii(t),u=a?oa:na(e),c=s?oa:na(t),l=(u=u==ra?ia:u)==ia,f=(c=c==ra?ia:c)==ia,h=u==c;if(h&&bi(e)){if(!bi(t))return!1;a=!0,l=!1}if(h&&!l)return i||(i=new $o),a||Ai(e)?Zo(e,t,n,r,o,i):function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new ei(e),new ei(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ao(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=ti;case"[object Set]":var u=1&r;if(s||(s=ni),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var l=Zo(s(e),s(t),r,o,i,a);return a.delete(e),l;case"[object Symbol]":if(oi)return oi.call(e)==oi.call(t)}return!1}(e,t,u,n,r,o,i);if(!(1&n)){var d=l&&aa.call(e,"__wrapped__"),p=f&&aa.call(t,"__wrapped__");if(d||p){var v=d?e.value():e,y=p?t.value():t;return i||(i=new $o),o(v,y,n,r,i)}}return!!h&&(i||(i=new $o),function(e,t,n,r,o,i){var a=1&n,s=zi(e),u=s.length;if(u!=zi(t).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in t:Ki.call(t,l)))return!1}var f=i.get(e),h=i.get(t);if(f&&h)return f==t&&h==e;var d=!0;i.set(e,t),i.set(t,e);for(var p=a;++c<u;){var v=e[l=s[c]],y=t[l];if(r)var m=a?r(y,v,l,t,e,i):r(v,y,l,e,t,i);if(!(void 0===m?v===y||o(v,y,n,r,i):m)){d=!1;break}p||(p="constructor"==l)}if(d&&!p){var g=e.constructor,b=t.constructor;g==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&Li(g,g)&&"function"==typeof b&&Li(b,b)||(d=!1)}return i.delete(e),i.delete(t),d}(e,t,n,r,o,i))},ua=function e(t,n,r,o,i){return t===n||(null==t||null==n||!ci(t)&&!ci(n)?t!=t&&n!=n:sa(t,n,r,o,e,i))},ca=function(e,t){return ua(e,t)},la=function(e){return void 0===e};var fa=(0,ft.createGlobalStore)("extensionsInternal",{slots:{},extensions:{}}),ha=function(){return(0,ft.getGlobalStore)("extensionsInternal",{slots:{},extensions:{}})};function da(t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=Object.values(t.extensions)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,c=!0,l=!1,f=void 0;try{for(var h,d=u.instances[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;n.push({slotModuleName:p.slotModuleName,extensionModuleName:u.moduleName,slotName:p.slotName,extensionId:p.id})}}catch(e){l=!0,f=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}ca(e.configExtensionStore.getState().mountedExtensions,n)||e.configExtensionStore.setState({mountedExtensions:n})}function pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function va(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||ma(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ya(e){return function(e){if(Array.isArray(e))return pa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ma(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ma(e,t){if(e){if("string"==typeof e)return pa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pa(e,t):void 0}}da(fa.getState()),fa.subscribe(da),(0,ft.createGlobalStore)("modalRegistry",{modals:{}}),(0,ft.createGlobalStore)("workspaceRegistrations",{workspaces:{}}),new Set,ha();var ga=ha(),ba=(0,ft.getGlobalStore)("extensions",{slots:{}}),wa=(0,e.getExtensionSlotsConfigStore)(),_a=(0,e.getExtensionsConfigStore)();function Sa(t,n,r){var o={},i=!0,a=!1,s=void 0;try{for(var u,c=Object.entries(t.slots)[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var l=va(u.value,2),f=l[0],h=l[1],d=xa(f,t,(0,e.getExtensionSlotConfigFromStore)(n,h.name).config,r);o[f]={moduleName:h.moduleName,assignedExtensions:d}}}catch(e){a=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw s}}ca(ba.getState().slots,o)||ba.setState({slots:o})}function Oa(e){return va(e.split("#"),1)[0]}function Ea(e,t,n,r){var o=t.indexOf(e);if(-1!==o)return o;if(void 0!==n)return 1e3+n;var i=r.indexOf(e);return-1!==i?2e3+i:-1}function xa(t,n,r,o){var i=function(e,t){var n=e.add||[],r=e.remove||[],o=e.order||[],i=ga.getState().extensions;return ya(t).concat(ya(n)).filter((function(e){return!r.includes(e)})).sort((function(e,n){var r,a,s=Ea(e,o,null===(r=i[Oa(e)])||void 0===r?void 0:r.order,t),u=Ea(n,o,null===(a=i[Oa(n)])||void 0===a?void 0:a.order,t);return-1===u?-1:-1===s?1:s-u}))}(r,n.slots[t].attachedIds),a=[],s=void 0,u=!0,c=!1,l=void 0;try{for(var f,h=i[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value,p=(0,e.getExtensionConfigFromStore)(o,t,d).config,v=Oa(d),y=n.extensions[v];if(y){var m,g,b,w,_,S,O,E,x,P=null!==(_=null!==(w=null==p||null===(m=p["Display conditions"])||void 0===m?void 0:m.privileges)&&void 0!==w?w:y.privileges)&&void 0!==_?_:[];if(P&&("string"==typeof P||Array.isArray(P)&&P.length>0)){var k;if(la(s)&&(s=null===(k=(0,mn.getSessionStore)().getState().session)||void 0===k?void 0:k.user),!s)continue;if(!(0,mn.userHasAccess)(P,s))continue}a.push({id:d,name:v,moduleName:y.moduleName,config:p,featureFlag:y.featureFlag,meta:y.meta,online:null===(O=null!==(S=null==p||null===(g=p["Display conditions"])||void 0===g?void 0:g.online)&&void 0!==S?S:y.online)||void 0===O||O,offline:null!==(x=null!==(E=null==p||null===(b=p["Display conditions"])||void 0===b?void 0:b.offline)&&void 0!==E?E:y.offline)&&void 0!==x&&x})}}}catch(e){c=!0,l=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}return a}function Pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ka(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ka(e,t,n[t])}))}return e}function Aa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pa(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}ga.subscribe((function(e){Sa(e,wa.getState(),_a.getState())})),wa.subscribe((function(e){Sa(ga.getState(),e,_a.getState())})),_a.subscribe((function(e){Sa(ga.getState(),wa.getState(),e)}));var Ta={flags:function(){var e={},t=!0,n=!1,r=void 0;try{for(var o,i=Object.keys(localStorage)[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(a.startsWith("openmrs:feature-flag:")){var s=a.replace("openmrs:feature-flag:",""),u=JSON.parse(localStorage.getItem("openmrs:feature-flag-meta:".concat(s))||"{}");e[s]=ja({enabled:"true"===localStorage.getItem(a)},u)}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}()};(0,ft.getGlobalStore)("feature-flags",Ta).subscribe((function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=Object.entries(e.flags)[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=Aa(o.value,2),s=a[0],u=a[1];localStorage.setItem("openmrs:feature-flag:".concat(s),u.enabled.toString()),localStorage.setItem("openmrs:feature-flag-meta:".concat(s),JSON.stringify({label:u.label,description:u.description}))}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}));const Ma="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Ca=Object.keys,Da=Array.isArray;function Ia(e,t){return"object"!=typeof t||Ca(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||Ma.Promise||(Ma.Promise=Promise);const Ra=Object.getPrototypeOf,Na={}.hasOwnProperty;function Ba(e,t){return Na.call(e,t)}function za(e,t){"function"==typeof t&&(t=t(Ra(e))),("undefined"==typeof Reflect?Ca:Reflect.ownKeys)(t).forEach((n=>{Ka(e,n,t[n])}))}const La=Object.defineProperty;function Ka(e,t,n,r){La(e,t,Ia(n&&Ba(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Ua(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Ka(e.prototype,"constructor",e),{extend:za.bind(null,e.prototype)}}}}const Va=Object.getOwnPropertyDescriptor;function Fa(e,t){let n;return Va(e,t)||(n=Ra(e))&&Fa(n,t)}const Ha=[].slice;function qa(e,t,n){return Ha.call(e,t,n)}function Wa(e,t){return t(e)}function Ga(e){if(!e)throw new Error("Assertion Failed")}function $a(e){Ma.setImmediate?setImmediate(e):setTimeout(e,0)}function Ya(e,t){return e.reduce(((e,n,r)=>{var o=t(n,r);return o&&(e[o[0]]=o[1]),e}),{})}function Qa(e,t){if(Ba(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,o=t.length;r<o;++r){var i=Qa(e,t[r]);n.push(i)}return n}var a=t.indexOf(".");if(-1!==a){var s=e[t.substr(0,a)];return void 0===s?void 0:Qa(s,t.substr(a+1))}}function Ja(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){Ga("string"!=typeof n&&"length"in n);for(var r=0,o=t.length;r<o;++r)Ja(e,t[r],n[r])}else{var i=t.indexOf(".");if(-1!==i){var a=t.substr(0,i),s=t.substr(i+1);if(""===s)void 0===n?Da(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var u=e[a];u&&Ba(e,a)||(u=e[a]={}),Ja(u,s,n)}}else void 0===n?Da(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Xa(e){var t={};for(var n in e)Ba(e,n)&&(t[n]=e[n]);return t}const Za=[].concat;function es(e){return Za.apply([],e)}const ts="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(es([8,16,32,64].map((e=>["Int","Uint","Float"].map((t=>t+e+"Array")))))).filter((e=>Ma[e])),ns=ts.map((e=>Ma[e]));Ya(ts,(e=>[e,!0]));let rs=null;function os(e){rs="undefined"!=typeof WeakMap&&new WeakMap;const t=is(e);return rs=null,t}function is(e){if(!e||"object"!=typeof e)return e;let t=rs&&rs.get(e);if(t)return t;if(Da(e)){t=[],rs&&rs.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(is(e[n]))}else if(ns.indexOf(e.constructor)>=0)t=e;else{const n=Ra(e);for(var o in t=n===Object.prototype?{}:Object.create(n),rs&&rs.set(e,t),e)Ba(e,o)&&(t[o]=is(e[o]))}return t}const{toString:as}={};function ss(e){return as.call(e).slice(8,-1)}const us="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",cs="symbol"==typeof us?function(e){var t;return null!=e&&(t=e[us])&&t.apply(e)}:function(){return null},ls={};function fs(e){var t,n,r,o;if(1===arguments.length){if(Da(e))return e.slice();if(this===ls&&"string"==typeof e)return[e];if(o=cs(e)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const hs="undefined"!=typeof Symbol?e=>"AsyncFunction"===e[Symbol.toStringTag]:()=>!1;var ds="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ps(e,t){ds=e,vs=t}var vs=()=>!0;const ys=!new Error("").stack;function ms(){if(ys)try{throw ms.arguments,new Error}catch(e){return e}return new Error}function gs(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(vs).map((e=>"\n"+e)).join("")):""}var bs=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ws=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(bs),_s={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ss(e,t){this._e=ms(),this.name=e,this.message=t}function Os(e,t){return e+". Errors: "+Object.keys(t).map((e=>t[e].toString())).filter(((e,t,n)=>n.indexOf(e)===t)).join("\n")}function Es(e,t,n,r){this._e=ms(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Os(e,t)}function xs(e,t){this._e=ms(),this.name="BulkError",this.failures=Object.keys(t).map((e=>t[e])),this.failuresByPos=t,this.message=Os(e,t)}Ua(Ss).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+gs(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Ua(Es).from(Ss),Ua(xs).from(Ss);var Ps=ws.reduce(((e,t)=>(e[t]=t+"Error",e)),{});const ks=Ss;var js=ws.reduce(((e,t)=>{var n=t+"Error";function r(e,r){this._e=ms(),this.name=n,e?"string"==typeof e?(this.message=`${e}${r?"\n "+r:""}`,this.inner=r||null):"object"==typeof e&&(this.message=`${e.name} ${e.message}`,this.inner=e):(this.message=_s[t]||n,this.inner=null)}return Ua(r).from(ks),e[t]=r,e}),{});js.Syntax=SyntaxError,js.Type=TypeError,js.Range=RangeError;var As=bs.reduce(((e,t)=>(e[t+"Error"]=js[t],e)),{}),Ts=ws.reduce(((e,t)=>(-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=js[t]),e)),{});function Ms(){}function Cs(e){return e}function Ds(e,t){return null==e||e===Cs?t:function(n){return t(e(n))}}function Is(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Rs(e,t){return e===Ms?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Is(r,this.onsuccess):r),o&&(this.onerror=this.onerror?Is(o,this.onerror):o),void 0!==i?i:n}}function Ns(e,t){return e===Ms?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Is(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Is(r,this.onerror):r)}}function Bs(e,t){return e===Ms?t:function(n){var r=e.apply(this,arguments);Ia(n,r);var o=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?Is(o,this.onsuccess):o),i&&(this.onerror=this.onerror?Is(i,this.onerror):i),void 0===r?void 0===a?void 0:a:Ia(r,a)}}function zs(e,t){return e===Ms?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function Ls(e,t){return e===Ms?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return n.then((function(){return t.apply(r,i)}))}return t.apply(this,arguments)}}Ts.ModifyError=Es,Ts.DexieError=Ss,Ts.BulkError=xs;var Ks={};const[Us,Vs,Fs]="undefined"==typeof Promise?[]:(()=>{let e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,Ra(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Ra(t),e]})(),Hs=Vs&&Vs.then,qs=Us&&Us.constructor,Ws=!!Fs;var Gs=!1,$s=Fs?()=>{Fs.then(mu)}:Ma.setImmediate?setImmediate.bind(null,mu):Ma.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver((()=>{mu(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(mu,0)},Ys=function(e,t){ou.push([e,t]),Js&&($s(),Js=!1)},Qs=!0,Js=!0,Xs=[],Zs=[],eu=null,tu=Cs,nu={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Uu,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((e=>{try{Uu(e[0],e[1])}catch(e){}}))}},ru=nu,ou=[],iu=0,au=[];function su(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Ms,this._lib=!1;var t=this._PSD=ru;if(ds&&(this._stackHolder=ms(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==Ks)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&fu(this,this._value))}this._state=null,this._value=null,++t.ref,lu(this,e)}const uu={get:function(){var e=ru,t=ku;function n(n,r){var o=!e.global&&(e!==ru||t!==ku);const i=o&&!Mu();var a=new su(((t,a)=>{du(this,new cu(Lu(n,e,o,i),Lu(r,e,o,i),t,a,e))}));return ds&&yu(a,this),a}return n.prototype=Ks,n},set:function(e){Ka(this,"then",e&&e.prototype===Ks?uu:{get:function(){return e},set:uu.set})}};function cu(e,t,n,r,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=o}function lu(e,t){try{t((t=>{if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&gu();t&&"function"==typeof t.then?lu(e,((e,n)=>{t instanceof su?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,hu(e)),n&&bu()}}),fu.bind(null,e))}catch(t){fu(e,t)}}function fu(e,t){if(Zs.push(t),null===e._state){var n=e._lib&&gu();t=tu(t),e._state=!1,e._value=t,ds&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,void 0)}catch(e){}}((()=>{var n=Fa(t,"stack");t._promise=e,Ka(t,"stack",{get:()=>Gs?n&&(n.get?n.get.apply(t):n.value):e.stack})})),function(e){Xs.some((t=>t._value===e._value))||Xs.push(e)}(e),hu(e),n&&bu()}}function hu(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)du(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),0===iu&&(++iu,Ys((()=>{0==--iu&&wu()}),[]))}function du(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++iu,Ys(pu,[n,e,t])}else e._listeners.push(t)}function pu(e,t,n){try{eu=t;var r,o=t._value;t._state?r=e(o):(Zs.length&&(Zs=[]),r=e(o),-1===Zs.indexOf(o)&&function(e){for(var t=Xs.length;t;)if(Xs[--t]._value===e._value)return void Xs.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{eu=null,0==--iu&&wu(),--n.psd.ref||n.psd.finalize()}}function vu(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var o,i,a=e._value;null!=a?(o=a.name||"Error",i=a.message||a,r=gs(a,0)):(o=a,i=""),t.push(o+(i?": "+i:"")+r)}return ds&&((r=gs(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&vu(e._prev,t,n)),t}function yu(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function mu(){gu()&&bu()}function gu(){var e=Qs;return Qs=!1,Js=!1,e}function bu(){var e,t,n;do{for(;ou.length>0;)for(e=ou,ou=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(ou.length>0);Qs=!0,Js=!0}function wu(){var e=Xs;Xs=[],e.forEach((e=>{e._PSD.onunhandled.call(null,e._value,e)}));for(var t=au.slice(0),n=t.length;n;)t[--n]()}function _u(e){return new su(Ks,!1,e)}function Su(e,t){var n=ru;return function(){var r=gu(),o=ru;try{return Ru(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{Ru(o,!1),r&&bu()}}}za(su.prototype,{then:uu,_then:function(e,t){du(this,new cu(null,null,e,t,ru))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(e=>e instanceof t?n(e):_u(e))):this.then(null,(e=>e&&e.name===t?n(e):_u(e)))},finally:function(e){return this.then((t=>(e(),t)),(t=>(e(),_u(t))))},stack:{get:function(){if(this._stack)return this._stack;try{Gs=!0;var e=vu(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Gs=!1}}},timeout:function(e,t){return e<1/0?new su(((n,r)=>{var o=setTimeout((()=>r(new js.Timeout(t))),e);this.then(n,r).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&Ka(su.prototype,Symbol.toStringTag,"Dexie.Promise"),nu.env=Nu(),za(su,{all:function(){var e=fs.apply(null,arguments).map(Cu);return new su((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(((o,i)=>su.resolve(o).then((n=>{e[i]=n,--r||t(e)}),n)))}))},resolve:e=>{if(e instanceof su)return e;if(e&&"function"==typeof e.then)return new su(((t,n)=>{e.then(t,n)}));var t=new su(Ks,!0,e);return yu(t,eu),t},reject:_u,race:function(){var e=fs.apply(null,arguments).map(Cu);return new su(((t,n)=>{e.map((e=>su.resolve(e).then(t,n)))}))},PSD:{get:()=>ru,set:e=>ru=e},totalEchoes:{get:()=>ku},newPSD:Au,usePSD:Bu,scheduler:{get:()=>Ys,set:e=>{Ys=e}},rejectionMapper:{get:()=>tu,set:e=>{tu=e}},follow:(e,t)=>new su(((n,r)=>Au(((t,n)=>{var r=ru;r.unhandleds=[],r.onunhandled=n,r.finalize=Is((function(){!function(e){au.push((function t(){e(),au.splice(au.indexOf(t),1)})),++iu,Ys((()=>{0==--iu&&wu()}),[])}((()=>{0===this.unhandleds.length?t():n(this.unhandleds[0])}))}),r.finalize),e()}),t,n,r)))}),qs&&(qs.allSettled&&Ka(su,"allSettled",(function(){const e=fs.apply(null,arguments).map(Cu);return new su((t=>{0===e.length&&t([]);let n=e.length;const r=new Array(n);e.forEach(((e,o)=>su.resolve(e).then((e=>r[o]={status:"fulfilled",value:e}),(e=>r[o]={status:"rejected",reason:e})).then((()=>--n||t(r)))))}))})),qs.any&&"undefined"!=typeof AggregateError&&Ka(su,"any",(function(){const e=fs.apply(null,arguments).map(Cu);return new su(((t,n)=>{0===e.length&&n(new AggregateError([]));let r=e.length;const o=new Array(r);e.forEach(((e,i)=>su.resolve(e).then((e=>t(e)),(e=>{o[i]=e,--r||n(new AggregateError(o))}))))}))})));const Ou={awaits:0,echoes:0,id:0};var Eu=0,xu=[],Pu=0,ku=0,ju=0;function Au(e,t,n,r){var o=ru,i=Object.create(o);i.parent=o,i.ref=0,i.global=!1,i.id=++ju;var a=nu.env;i.env=Ws?{Promise:su,PromiseProp:{value:su,configurable:!0,writable:!0},all:su.all,race:su.race,allSettled:su.allSettled,any:su.any,resolve:su.resolve,reject:su.reject,nthen:Ku(a.nthen,i),gthen:Ku(a.gthen,i)}:{},t&&Ia(i,t),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=Bu(i,e,n,r);return 0===i.ref&&i.finalize(),s}function Tu(){return Ou.id||(Ou.id=++Eu),++Ou.awaits,Ou.echoes+=100,Ou.id}function Mu(){return!!Ou.awaits&&(0==--Ou.awaits&&(Ou.id=0),Ou.echoes=100*Ou.awaits,!0)}function Cu(e){return Ou.echoes&&e&&e.constructor===qs?(Tu(),e.then((e=>(Mu(),e)),(e=>(Mu(),Vu(e))))):e}function Du(e){++ku,Ou.echoes&&0!=--Ou.echoes||(Ou.echoes=Ou.id=0),xu.push(ru),Ru(e,!0)}function Iu(){var e=xu[xu.length-1];xu.pop(),Ru(e,!1)}function Ru(e,t){var n=ru;if((t?!Ou.echoes||Pu++&&e===ru:!Pu||--Pu&&e===ru)||zu(t?Du.bind(null,e):Iu),e!==ru&&(ru=e,n===nu&&(nu.env=Nu()),Ws)){var r=nu.env.Promise,o=e.env;Vs.then=o.nthen,r.prototype.then=o.gthen,(n.global||e.global)&&(Object.defineProperty(Ma,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}}function Nu(){var e=Ma.Promise;return Ws?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Ma,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Vs.then,gthen:e.prototype.then}:{}}function Bu(e,t,n,r,o){var i=ru;try{return Ru(e,!0),t(n,r,o)}finally{Ru(i,!1)}}function zu(e){Hs.call(Us,e)}function Lu(e,t,n,r){return"function"!=typeof e?e:function(){var o=ru;n&&Tu(),Ru(t,!0);try{return e.apply(this,arguments)}finally{Ru(o,!1),r&&zu(Mu)}}}function Ku(e,t){return function(n,r){return e.call(this,Lu(n,t),Lu(r,t))}}function Uu(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,o={promise:t,reason:e};if(Ma.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),Ia(r,o)):Ma.CustomEvent&&Ia(r=new CustomEvent("unhandledrejection",{detail:o}),o),r&&Ma.dispatchEvent&&(dispatchEvent(r),!Ma.PromiseRejectionEvent&&Ma.onunhandledrejection))try{Ma.onunhandledrejection(r)}catch(e){}ds&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch(e){}}-1===(""+Hs).indexOf("[native code]")&&(Tu=Mu=Ms);var Vu=su.reject;function Fu(e,t,n,r){if(e.idbdb&&(e._state.openComplete||ru.letThrough||e._vip)){var o=e._createTransaction(t,n,e._dbSchema);try{o.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===Ps.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>Fu(e,t,n,r)))):Vu(o)}return o._promise(t,((e,t)=>Au((()=>(ru.trans=o,r(e,t,o)))))).then((e=>o._completion.then((()=>e))))}if(e._state.openComplete)return Vu(new js.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Vu(new js.DatabaseClosed);e.open().catch(Ms)}return e._state.dbReadyPromise.then((()=>Fu(e,t,n,r)))}const Hu=String.fromCharCode(65535),qu="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Wu=[],Gu="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),$u=Gu,Yu=Gu,Qu=e=>!/(dexie\.js|dexie\.min\.js)/.test(e);function Ju(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const Xu={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Zu(e){return"string"!=typeof e||/\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=os(t))[e],t)}class ec{_trans(e,t,n){const r=this._tx||ru.trans,o=this.name;function i(e,n,r){if(!r.schema[o])throw new js.NotFound("Table "+o+" not part of transaction");return t(r.idbtrans,r)}const a=gu();try{return r&&r.db===this.db?r===ru.trans?r._promise(e,i,n):Au((()=>r._promise(e,i,n)),{trans:r,transless:ru.transless||ru}):Fu(this.db,e,[this.name],i)}finally{a&&bu()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(t=>this.core.get({trans:t,key:e}).then((e=>this.hook.reading.fire(e))))).then(t)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(Da(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const t=Ca(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter((e=>e.compound&&t.every((t=>e.keyPath.indexOf(t)>=0))&&e.keyPath.every((e=>t.indexOf(e)>=0))))[0];if(n&&this.db._maxKey!==Hu)return this.where(n.name).equals(n.keyPath.map((t=>e[t])));!n&&ds&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:r}=this.schema,o=this.db._deps.indexedDB;function i(e,t){try{return 0===o.cmp(e,t)}catch(e){return!1}}const[a,s]=t.reduce((([t,n],o)=>{const a=r[o],s=e[o];return[t||a,t||!a?Ju(n,a&&a.multi?e=>{const t=Qa(e,o);return Da(t)&&t.some((e=>i(s,e)))}:e=>i(s,Qa(e,o))):n]}),[null,null]);return a?this.where(a.name).equals(e[a.keyPath]).filter(s):n?this.filter(s):this.where(t).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,Da(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=t=>{if(!t)return t;const n=Object.create(e.prototype);for(var r in t)if(Ba(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}defineClass(){return this.mapToClass((function(e){Ia(this,e)}))}add(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let o=e;return r&&n&&(o=Zu(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[o]}))).then((e=>e.numFailures?su.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{Ja(e,r,t)}catch(e){}return t}))}update(e,t){if("object"!=typeof e||Da(e))return this.where(":id").equals(e).modify(t);{const n=Qa(e,this.schema.primKey.keyPath);if(void 0===n)return Vu(new js.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?Ca(t).forEach((n=>{Ja(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)}}put(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let o=e;return r&&n&&(o=Zu(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"put",values:[o],keys:null!=t?[t]:null}))).then((e=>e.numFailures?su.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{Ja(e,r,t)}catch(e){}return t}))}delete(e){return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:[e]}))).then((e=>e.numFailures?su.reject(e.failures[0]):void 0))}clear(){return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"deleteRange",range:Xu}))).then((e=>e.numFailures?su.reject(e.failures[0]):void 0))}bulkGet(e){return this._trans("readonly",(t=>this.core.getMany({keys:e,trans:t}).then((e=>e.map((e=>this.hook.reading.fire(e)))))))}bulkAdd(e,t,n){const r=Array.isArray(t)?t:void 0,o=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:i}=this.schema.primKey;if(i&&r)throw new js.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new js.InvalidArgument("Arguments objects and keys must have the same length");const a=e.length;let s=i&&n?e.map(Zu(i)):e;return this.core.mutate({trans:t,type:"add",keys:r,values:s,wantResults:o}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return o?t:n;throw new xs(`${this.name}.bulkAdd(): ${e} of ${a} operations failed`,r)}))}))}bulkPut(e,t,n){const r=Array.isArray(t)?t:void 0,o=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:i}=this.schema.primKey;if(i&&r)throw new js.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new js.InvalidArgument("Arguments objects and keys must have the same length");const a=e.length;let s=i&&n?e.map(Zu(i)):e;return this.core.mutate({trans:t,type:"put",keys:r,values:s,wantResults:o}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return o?t:n;throw new xs(`${this.name}.bulkPut(): ${e} of ${a} operations failed`,r)}))}))}bulkDelete(e){const t=e.length;return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:e}))).then((({numFailures:e,lastResult:n,failures:r})=>{if(0===e)return n;throw new xs(`${this.name}.bulkDelete(): ${e} of ${t} operations failed`,r)}))}}function tc(e){var t={},n=function(n,r){if(r){for(var o=arguments.length,i=new Array(o-1);--o;)i[o-1]=arguments[o];return t[n].subscribe.apply(null,i),e}if("string"==typeof n)return t[n]};n.addEventType=i;for(var r=1,o=arguments.length;r<o;++r)i(arguments[r]);return n;function i(e,r,o){if("object"==typeof e)return function(e){Ca(e).forEach((function(t){var n=e[t];if(Da(n))i(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new js.InvalidArgument("Invalid event config");var r=i(t,Cs,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){$a((function(){e.apply(null,t)}))}))}))}}))}(e);r||(r=zs),o||(o=Ms);var a={subscribers:[],fire:o,subscribe:function(e){-1===a.subscribers.indexOf(e)&&(a.subscribers.push(e),a.fire=r(a.fire,e))},unsubscribe:function(e){a.subscribers=a.subscribers.filter((function(t){return t!==e})),a.fire=a.subscribers.reduce(r,o)}};return t[e]=n[e]=a,a}}function nc(e,t){return Ua(t).from({prototype:e}),t}function rc(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function oc(e,t){e.filter=Ju(e.filter,t)}function ic(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>Ju(r(),t()):t,e.justLimit=n&&!r}function ac(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new js.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function sc(e,t,n){const r=ac(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function uc(e,t,n,r){const o=e.replayFilter?Ju(e.filter,e.replayFilter()):e.filter;if(e.or){const i={},a=(e,n,r)=>{if(!o||o(n,r,(e=>n.stop(e)),(e=>n.fail(e)))){var a=n.primaryKey,s=""+a;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(a)),Ba(i,s)||(i[s]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),cc(sc(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return cc(sc(e,r,n),Ju(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function cc(e,t,n,r){var o=Su(r?(e,t,o)=>n(r(e),t,o):n);return e.then((e=>{if(e)return e.start((()=>{var n=()=>e.continue();t&&!t(e,(e=>n=e),(t=>{e.stop(t),n=Ms}),(t=>{e.fail(t),n=Ms}))||o(e.value,e,(e=>n=e)),n()}))}))}function lc(e,t){try{const n=fc(e),r=fc(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){const n=e.length,r=t.length,o=n<r?n:r;for(let n=0;n<o;++n)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return n===r?0:n<r?-1:1}(hc(e),hc(t));case"Array":return function(e,t){const n=e.length,r=t.length,o=n<r?n:r;for(let n=0;n<o;++n){const r=lc(e[n],t[n]);if(0!==r)return r}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function fc(e){const t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";const n=ss(e);return"ArrayBuffer"===n?"binary":n}function hc(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class dc{_read(e,t){var n=this._ctx;return n.error?n.table._trans(null,Vu.bind(null,n.error)):n.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,Vu.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=Ju(t.algorithm,e)}_iterate(e,t){return uc(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&Ia(n,e),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read((n=>uc(t,e,n,t.table.core)))}count(e){return this._read((e=>{const t=this._ctx,n=t.table.core;if(rc(t,!0))return n.count({trans:e,query:{index:ac(t,n.schema),range:t.range}}).then((e=>Math.min(e,t.limit)));var r=0;return uc(t,(()=>(++r,!1)),e,n).then((()=>r))})).then(e)}sortBy(e,t){const n=e.split(".").reverse(),r=n[0],o=n.length-1;function i(e,t){return t?i(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function s(e,t){var n=i(e,o),r=i(t,o);return n<r?-a:n>r?a:0}return this.toArray((function(e){return e.sort(s)})).then(t)}toArray(e){return this._read((e=>{var t=this._ctx;if("next"===t.dir&&rc(t,!0)&&t.limit>0){const{valueMapper:n}=t,r=ac(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:r,range:t.range}}).then((({result:e})=>n?e.map(n):e))}{const n=[];return uc(t,(e=>n.push(e)),e,t.table.core).then((()=>n))}}),e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,rc(t)?ic(t,(()=>{var t=e;return(e,n)=>0===t||(1===t?(--t,!1):(n((()=>{e.advance(t),t=0})),!1))})):ic(t,(()=>{var t=e;return()=>--t<0}))),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),ic(this._ctx,(()=>{var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this}until(e,t){return oc(this._ctx,(function(n,r,o){return!e(n.value)||(r(o),t)})),this}first(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,n;return oc(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=Ju(t.isMatch,n),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}primaryKeys(e){var t=this._ctx;if("next"===t.dir&&rc(t,!0)&&t.limit>0)return this._read((e=>{var n=ac(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((({result:e})=>e)).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return oc(this._ctx,(function(e){var t=e.primaryKey.toString(),r=Ba(n,t);return n[t]=!0,!r})),this}modify(e){var t=this._ctx;return this._write((n=>{var r;if("function"==typeof e)r=e;else{var o=Ca(e),i=o.length;r=function(t){for(var n=!1,r=0;r<i;++r){var a=o[r],s=e[a];Qa(t,a)!==s&&(Ja(t,a,s),n=!0)}return n}}const a=t.table.core,{outbound:s,extractKey:u}=a.schema.primaryKey,c=this.db._options.modifyChunkSize||200,l=[];let f=0;const h=[],d=(e,t)=>{const{failures:n,numFailures:r}=t;f+=e-r;for(let e of Ca(n))l.push(n[e])};return this.clone().primaryKeys().then((o=>{const i=l=>{const f=Math.min(c,o.length-l);return a.getMany({trans:n,keys:o.slice(l,l+f),cache:"immutable"}).then((h=>{const p=[],v=[],y=s?[]:null,m=[];for(let e=0;e<f;++e){const t=h[e],n={value:os(t),primKey:o[l+e]};!1!==r.call(n,n.value,n)&&(null==n.value?m.push(o[l+e]):s||0===lc(u(t),u(n.value))?(v.push(n.value),s&&y.push(o[l+e])):(m.push(o[l+e]),p.push(n.value)))}const g=rc(t)&&t.limit===1/0&&("function"!=typeof e||e===pc)&&{index:t.index,range:t.range};return Promise.resolve(p.length>0&&a.mutate({trans:n,type:"add",values:p}).then((e=>{for(let t in e.failures)m.splice(parseInt(t),1);d(p.length,e)}))).then((()=>(v.length>0||g&&"object"==typeof e)&&a.mutate({trans:n,type:"put",keys:y,values:v,criteria:g,changeSpec:"function"!=typeof e&&e}).then((e=>d(v.length,e))))).then((()=>(m.length>0||g&&e===pc)&&a.mutate({trans:n,type:"delete",keys:m,criteria:g}).then((e=>d(m.length,e))))).then((()=>o.length>l+f&&i(l+c)))}))};return i(0).then((()=>{if(l.length>0)throw new Es("Error modifying one or more objects",l,f,h);return o.length}))}))}))}delete(){var e=this._ctx,t=e.range;return rc(e)&&(e.isPrimKey&&!Yu||3===t.type)?this._write((n=>{const{primaryKey:r}=e.table.core.schema,o=t;return e.table.core.count({trans:n,query:{index:r,range:o}}).then((t=>e.table.core.mutate({trans:n,type:"deleteRange",range:o}).then((({failures:e,lastResult:n,results:r,numFailures:o})=>{if(o)throw new Es("Could not delete some values",Object.keys(e).map((t=>e[t])),t-o);return t-o}))))})):this.modify(pc)}}const pc=(e,t)=>t.value=null;function vc(e,t){return e<t?-1:e===t?0:1}function yc(e,t){return e>t?-1:e===t?0:1}function mc(e,t,n){var r=e instanceof Oc?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function gc(e){return new e.Collection(e,(()=>Sc(""))).limit(0)}function bc(e,t,n,r,o,i){for(var a=Math.min(e.length,r.length),s=-1,u=0;u<a;++u){var c=t[u];if(c!==r[u])return o(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):o(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;o(e[u],c)<0&&(s=u)}return a<r.length&&"next"===i?e+n.substr(e.length):a<e.length&&"prev"===i?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function wc(e,t,n,r){var o,i,a,s,u,c,l,f=n.length;if(!n.every((e=>"string"==typeof e)))return mc(e,"String expected.");function h(e){o=function(e){return"next"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),i=function(e){return"next"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),a="next"===e?vc:yc;var t=n.map((function(e){return{lower:i(e),upper:o(e)}})).sort((function(e,t){return a(e.lower,t.lower)}));s=t.map((function(e){return e.upper})),u=t.map((function(e){return e.lower})),c=e,l="next"===e?"":r}h("next");var d=new e.Collection(e,(()=>_c(s[0],u[f-1]+r)));d._ondirectionchange=function(e){h(e)};var p=0;return d._addAlgorithm((function(e,n,r){var o=e.key;if("string"!=typeof o)return!1;var h=i(o);if(t(h,u,p))return!0;for(var d=null,v=p;v<f;++v){var y=bc(o,h,s[v],u[v],a,c);null===y&&null===d?p=v+1:(null===d||a(d,y)>0)&&(d=y)}return n(null!==d?function(){e.continue(d+l)}:r),!1})),d}function _c(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Sc(e){return{type:1,lower:e,upper:e}}class Oc{get Collection(){return this._ctx.table.db.Collection}between(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?gc(this):new this.Collection(this,(()=>_c(e,t,!n,!r)))}catch(e){return mc(this,qu)}}equals(e){return null==e?mc(this,qu):new this.Collection(this,(()=>Sc(e)))}above(e){return null==e?mc(this,qu):new this.Collection(this,(()=>_c(e,void 0,!0)))}aboveOrEqual(e){return null==e?mc(this,qu):new this.Collection(this,(()=>_c(e,void 0,!1)))}below(e){return null==e?mc(this,qu):new this.Collection(this,(()=>_c(void 0,e,!1,!0)))}belowOrEqual(e){return null==e?mc(this,qu):new this.Collection(this,(()=>_c(void 0,e)))}startsWith(e){return"string"!=typeof e?mc(this,"String expected."):this.between(e,e+Hu,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):wc(this,((e,t)=>0===e.indexOf(t[0])),[e],Hu)}equalsIgnoreCase(e){return wc(this,((e,t)=>e===t[0]),[e],"")}anyOfIgnoreCase(){var e=fs.apply(ls,arguments);return 0===e.length?gc(this):wc(this,((e,t)=>-1!==t.indexOf(e)),e,"")}startsWithAnyOfIgnoreCase(){var e=fs.apply(ls,arguments);return 0===e.length?gc(this):wc(this,((e,t)=>t.some((t=>0===e.indexOf(t)))),e,Hu)}anyOf(){const e=fs.apply(ls,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return mc(this,qu)}if(0===e.length)return gc(this);const n=new this.Collection(this,(()=>_c(e[0],e[e.length-1])));n._ondirectionchange=n=>{t="next"===n?this._ascending:this._descending,e.sort(t)};let r=0;return n._addAlgorithm(((n,o,i)=>{const a=n.key;for(;t(a,e[r])>0;)if(++r,r===e.length)return o(i),!1;return 0===t(a,e[r])||(o((()=>{n.continue(e[r])})),!1)})),n}notEqual(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=fs.apply(ls,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return mc(this,qu)}const t=e.reduce(((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const n=this._cmp,r=this._ascending,o=this._descending,i=this._min,a=this._max;if(0===e.length)return gc(this);if(!e.every((e=>void 0!==e[0]&&void 0!==e[1]&&r(e[0],e[1])<=0)))return mc(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",js.InvalidArgument);const s=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers;let c,l=r;function f(e,t){return l(e[0],t[0])}try{c=e.reduce((function(e,t){let r=0,o=e.length;for(;r<o;++r){const o=e[r];if(n(t[0],o[1])<0&&n(t[1],o[0])>0){o[0]=i(o[0],t[0]),o[1]=a(o[1],t[1]);break}}return r===o&&e.push(t),e}),[]),c.sort(f)}catch(e){return mc(this,qu)}let h=0;const d=u?e=>r(e,c[h][1])>0:e=>r(e,c[h][1])>=0,p=s?e=>o(e,c[h][0])>0:e=>o(e,c[h][0])>=0;let v=d;const y=new this.Collection(this,(()=>_c(c[0][0],c[c.length-1][1],!s,!u)));return y._ondirectionchange=e=>{"next"===e?(v=d,l=r):(v=p,l=o),c.sort(f)},y._addAlgorithm(((e,t,n)=>{for(var o=e.key;v(o);)if(++h,h===c.length)return t(n),!1;return!!function(e){return!d(e)&&!p(e)}(o)||(0===this._cmp(o,c[h][1])||0===this._cmp(o,c[h][0])||t((()=>{l===r?e.continue(c[h][0]):e.continue(c[h][1])})),!1)})),y}startsWithAnyOf(){const e=fs.apply(ls,arguments);return e.every((e=>"string"==typeof e))?0===e.length?gc(this):this.inAnyRange(e.map((e=>[e,e+Hu]))):mc(this,"startsWithAnyOf() only works with strings")}}function Ec(e){return Su((function(t){return xc(t),e(t.target.error),!1}))}function xc(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Pc=tc(null,"storagemutated");class kc{_lock(){return Ga(!ru.global),++this._reculock,1!==this._reculock||ru.global||(ru.lockOwnerFor=this),this}_unlock(){if(Ga(!ru.global),0==--this._reculock)for(ru.global||(ru.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Bu(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&ru.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(Ga(!this.idbtrans),!e&&!t)switch(n&&n.name){case"DatabaseClosedError":throw new js.DatabaseClosed(n);case"MissingAPIError":throw new js.MissingAPI(n.message,n);default:throw new js.OpenFailed(n)}if(!this.active)throw new js.TransactionInactive;return Ga(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Su((t=>{xc(t),this._reject(e.error)})),e.onabort=Su((t=>{xc(t),this.active&&this._reject(new js.Abort(e.error)),this.active=!1,this.on("abort").fire(t)})),e.oncomplete=Su((()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Pc.storagemutated.fire(e.mutatedParts)})),this}_promise(e,t,n){if("readwrite"===e&&"readwrite"!==this.mode)return Vu(new js.ReadOnly("Transaction is readonly"));if(!this.active)return Vu(new js.TransactionInactive);if(this._locked())return new su(((r,o)=>{this._blockedFuncs.push([()=>{this._promise(e,t,n).then(r,o)},ru])}));if(n)return Au((()=>{var e=new su(((e,n)=>{this._lock();const r=t(e,n,this);r&&r.then&&r.then(e,n)}));return e.finally((()=>this._unlock())),e._lib=!0,e}));var r=new su(((e,n)=>{var r=t(e,n,this);r&&r.then&&r.then(e,n)}));return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const n=su.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((()=>n));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var o=t._waitingFor;return new su(((e,r)=>{n.then((n=>t._waitingQueue.push(Su(e.bind(null,n)))),(e=>t._waitingQueue.push(Su(r.bind(null,e))))).finally((()=>{t._waitingFor===o&&(t._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new js.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(Ba(t,e))return t[e];const n=this.schema[e];if(!n)throw new js.NotFound("Table "+e+" not part of transaction");const r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}function jc(e,t,n,r,o,i,a){return{name:e,keyPath:t,unique:n,multi:r,auto:o,compound:i,src:(n&&!a?"&":"")+(r?"*":"")+(o?"++":"")+Ac(t)}}function Ac(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Tc(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Ya(n,(e=>[e.name,e]))}}let Mc=e=>{try{return e.only([[]]),Mc=()=>[[]],[[]]}catch(e){return Mc=()=>Hu,Hu}};function Cc(e){return null==e?()=>{}:"string"==typeof e?function(e){return 1===e.split(".").length?t=>t[e]:t=>Qa(t,e)}(e):t=>Qa(t,e)}function Dc(e){return[].slice.call(e)}let Ic=0;function Rc(e){return null==e?":id":"string"==typeof e?e:`[${e.join("+")}]`}function Nc({_novip:e},t){const n=t.db,r=function(e,t,{IDBKeyRange:n,indexedDB:r},o){const i=function(e,t){return t.reduce(((e,{create:t})=>({...e,...t(e)})),e)}(function(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:n,upper:r,lowerOpen:o,upperOpen:i}=e;return void 0===n?void 0===r?null:t.upperBound(r,!!i):void 0===r?t.lowerBound(n,!!o):t.bound(n,r,!!o,!!i)}const{schema:o,hasGetAll:i}=function(e,t){const n=Dc(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((e=>t.objectStore(e))).map((e=>{const{keyPath:t,autoIncrement:n}=e,r=Da(t),o=null==t,i={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:o,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Cc(t)},indexes:Dc(e.indexNames).map((t=>e.index(t))).map((e=>{const{name:t,unique:n,multiEntry:r,keyPath:o}=e,a={name:t,compound:Da(o),keyPath:o,unique:n,multiEntry:r,extractKey:Cc(o)};return i[Rc(o)]=a,a})),getIndexByKeyPath:e=>i[Rc(e)]};return i[":id"]=a.primaryKey,null!=t&&(i[Rc(t)]=a.primaryKey),a}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),a=o.tables.map((e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function({trans:e,type:n,keys:o,values:i,range:a}){return new Promise(((s,u)=>{s=Su(s);const c=e.objectStore(t),l=null==c.keyPath,f="put"===n||"add"===n;if(!f&&"delete"!==n&&"deleteRange"!==n)throw new Error("Invalid operation type: "+n);const{length:h}=o||i||{length:1};if(o&&i&&o.length!==i.length)throw new Error("Given keys array must have same length as given values array.");if(0===h)return s({numFailures:0,failures:{},results:[],lastResult:void 0});let d;const p=[],v=[];let y=0;const m=e=>{++y,xc(e)};if("deleteRange"===n){if(4===a.type)return s({numFailures:y,failures:v,results:[],lastResult:void 0});3===a.type?p.push(d=c.clear()):p.push(d=c.delete(r(a)))}else{const[e,t]=f?l?[i,o]:[i,null]:[o,null];if(f)for(let r=0;r<h;++r)p.push(d=t&&void 0!==t[r]?c[n](e[r],t[r]):c[n](e[r])),d.onerror=m;else for(let t=0;t<h;++t)p.push(d=c[n](e[t])),d.onerror=m}const g=e=>{const t=e.target.result;p.forEach(((e,t)=>null!=e.error&&(v[t]=e.error))),s({numFailures:y,failures:v,results:"delete"===n?o:p.map((e=>e.result)),lastResult:t})};d.onerror=e=>{m(e),g(e)},d.onsuccess=g}))},getMany:({trans:e,keys:n})=>new Promise(((r,o)=>{r=Su(r);const i=e.objectStore(t),a=n.length,s=new Array(a);let u,c=0,l=0;const f=e=>{const t=e.target;s[t._pos]=t.result,++l===c&&r(s)},h=Ec(o);for(let e=0;e<a;++e)null!=n[e]&&(u=i.get(n[e]),u._pos=e,u.onsuccess=f,u.onerror=h,++c);0===c&&r(s)})),get:({trans:e,key:n})=>new Promise(((r,o)=>{r=Su(r);const i=e.objectStore(t).get(n);i.onsuccess=e=>r(e.target.result),i.onerror=Ec(o)})),query:function(e){return n=>new Promise(((o,i)=>{o=Su(o);const{trans:a,values:s,limit:u,query:c}=n,l=u===1/0?void 0:u,{index:f,range:h}=c,d=a.objectStore(t),p=f.isPrimaryKey?d:d.index(f.name),v=r(h);if(0===u)return o({result:[]});if(e){const e=s?p.getAll(v,l):p.getAllKeys(v,l);e.onsuccess=e=>o({result:e.target.result}),e.onerror=Ec(i)}else{let e=0;const t=s||!("openKeyCursor"in p)?p.openCursor(v):p.openKeyCursor(v),n=[];t.onsuccess=r=>{const i=t.result;return i?(n.push(s?i.value:i.primaryKey),++e===u?o({result:n}):void i.continue()):o({result:n})},t.onerror=Ec(i)}}))}(i),openCursor:function({trans:e,values:n,query:o,reverse:i,unique:a}){return new Promise(((s,u)=>{s=Su(s);const{index:c,range:l}=o,f=e.objectStore(t),h=c.isPrimaryKey?f:f.index(c.name),d=i?a?"prevunique":"prev":a?"nextunique":"next",p=n||!("openKeyCursor"in h)?h.openCursor(r(l),d):h.openKeyCursor(r(l),d);p.onerror=Ec(u),p.onsuccess=Su((t=>{const n=p.result;if(!n)return void s(null);n.___id=++Ic,n.done=!1;const r=n.continue.bind(n);let o=n.continuePrimaryKey;o&&(o=o.bind(n));const i=n.advance.bind(n),a=()=>{throw new Error("Cursor not stopped")};n.trans=e,n.stop=n.continue=n.continuePrimaryKey=n.advance=()=>{throw new Error("Cursor not started")},n.fail=Su(u),n.next=function(){let e=1;return this.start((()=>e--?this.continue():this.stop())).then((()=>this))},n.start=e=>{const t=new Promise(((e,t)=>{e=Su(e),p.onerror=Ec(t),n.fail=t,n.stop=t=>{n.stop=n.continue=n.continuePrimaryKey=n.advance=a,e(t)}})),s=()=>{if(p.result)try{e()}catch(e){n.fail(e)}else n.done=!0,n.start=()=>{throw new Error("Cursor behind last entry")},n.stop()};return p.onsuccess=Su((e=>{p.onsuccess=s,s()})),n.continue=r,n.continuePrimaryKey=o,n.advance=i,s(),t},s(n)}),u)}))},count({query:e,trans:n}){const{index:o,range:i}=e;return new Promise(((e,a)=>{const s=n.objectStore(t),u=o.isPrimaryKey?s:s.index(o.name),c=r(i),l=c?u.count(c):u.count();l.onsuccess=Su((t=>e(t.target.result))),l.onerror=Ec(a)}))}}}(e))),s={};return a.forEach((e=>s[e.name]=e)),{stack:"dbcore",transaction:e.transaction.bind(e),table(e){if(!s[e])throw new Error(`Table '${e}' not found`);return s[e]},MIN_KEY:-1/0,MAX_KEY:Mc(t),schema:o}}(t,n,o),e.dbcore);return{dbcore:i}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((t=>{const n=t.name;e.core.schema.tables.some((e=>e.name===n))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function Bc({_novip:e},t,n,r){n.forEach((n=>{const o=r[n];t.forEach((t=>{const r=Fa(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?Ka(t,n,{get(){return this.table(n)},set(e){La(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,o))}))}))}function zc({_novip:e},t){t.forEach((t=>{for(let n in t)t[n]instanceof e.Table&&delete t[n]}))}function Lc(e,t){return e._cfg.version-t._cfg.version}function Kc(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const o=e[r],i=t[r];if(o){const e={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||o.primKey.auto!==i.primKey.auto&&!Gu)e.recreate=!0,n.change.push(e);else{const t=o.idxByName,r=i.idxByName;let a;for(a in t)r[a]||e.del.push(a);for(a in r){const n=t[a],o=r[a];n?n.src!==o.src&&e.change.push(o):e.add.push(o)}(e.del.length>0||e.add.length>0||e.change.length>0)&&n.change.push(e)}}else n.add.push([r,i])}return n}function Uc(e,t,n,r){const o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((e=>Vc(o,e))),o}function Vc(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Fc(e,t,n){const r={};return qa(t.objectStoreNames,0).forEach((e=>{const t=n.objectStore(e);let o=t.keyPath;const i=jc(Ac(o),o||"",!1,!1,!!t.autoIncrement,o&&"string"!=typeof o,!0),a=[];for(let e=0;e<t.indexNames.length;++e){const n=t.index(t.indexNames[e]);o=n.keyPath;var s=jc(n.name,o,!!n.unique,!!n.multiEntry,!1,o&&"string"!=typeof o,!1);a.push(s)}r[e]=Tc(e,i,a)})),r}function Hc({_novip:e},t,n){const r=n.db.objectStoreNames;for(let o=0;o<r.length;++o){const i=r[o],a=n.objectStore(i);e._hasGetAll="getAll"in a;for(let e=0;e<a.indexNames.length;++e){const n=a.indexNames[e],r=a.index(n).keyPath,o="string"==typeof r?r:"["+qa(r).join("+")+"]";if(t[i]){const e=t[i].idxByName[o];e&&(e.name=n,delete t[i].idxByName[o],t[i].idxByName[n]=e)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Ma.WorkerGlobalScope&&Ma instanceof Ma.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class qc{_parseStoresSpec(e,t){Ca(e).forEach((n=>{if(null!==e[n]){var r=e[n].split(",").map(((e,t)=>{const n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return jc(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),Da(r),0===t)})),o=r.shift();if(o.multi)throw new js.Schema("Primary key cannot be multi-valued");r.forEach((e=>{if(e.auto)throw new js.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new js.Schema("Index must have a name and cannot be an empty string")})),t[n]=Tc(n,o,r)}}))}stores(e){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?Ia(this._cfg.storesSource,e):e;const n=t._versions,r={};let o={};return n.forEach((e=>{Ia(r,e._cfg.storesSource),o=e._cfg.dbschema={},e._parseStoresSpec(r,o)})),t._dbSchema=o,zc(t,[t._allTables,t,t.Transaction.prototype]),Bc(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],Ca(o),o),t._storeNames=Ca(o),this}upgrade(e){return this._cfg.contentUpgrade=Ls(this._cfg.contentUpgrade||Ms,e),this}}function Wc(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new dl("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Gc(e){return e&&"function"==typeof e.databases}function $c(e){return Au((function(){return ru.letThrough=!0,e()}))}function Yc(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function Qc(e){var t=t=>e.next(t),n=o(t),r=o((t=>e.throw(t)));function o(e){return t=>{var o=e(t),i=o.value;return o.done?i:i&&"function"==typeof i.then?i.then(n,r):Da(i)?Promise.all(i).then(n,r):n(i)}}return o(t)()}function Jc(e,t,n){var r=arguments.length;if(r<2)throw new js.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];return n=o.pop(),[e,es(o),n]}function Xc(e,t,n,r,o){return su.resolve().then((()=>{const i=ru.transless||ru,a=e._createTransaction(t,n,e._dbSchema,r),s={trans:a,transless:i};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===Ps.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>Xc(e,t,n,null,o)))):Vu(r)}const u=hs(o);let c;u&&Tu();const l=su.follow((()=>{if(c=o.call(a,a),c)if(u){var e=Mu.bind(null,null);c.then(e,e)}else"function"==typeof c.next&&"function"==typeof c.throw&&(c=Qc(c))}),s);return(c&&"function"==typeof c.then?su.resolve(c).then((e=>a.active?e:Vu(new js.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")))):l.then((()=>c))).then((e=>(r&&a._resolve(),a._completion.then((()=>e))))).catch((e=>(a._reject(e),Vu(e))))}))}function Zc(e,t,n){const r=Da(e)?e.slice():[e];for(let e=0;e<n;++e)r.push(t);return r}const el={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,o={},i=[];function a(e,t,n){const r=Rc(e),s=o[r]=o[r]||[],u=null==e?0:"string"==typeof e?1:e.length,c=t>0,l={...n,isVirtual:c,keyTail:t,keyLength:u,extractKey:Cc(e),unique:!c&&n.unique};return s.push(l),l.isPrimaryKey||i.push(l),u>1&&a(2===u?e[0]:e.slice(0,u-1),t+1,n),s.sort(((e,t)=>e.keyTail-t.keyTail)),l}const s=a(r.primaryKey.keyPath,0,r.primaryKey);o[":id"]=[s];for(const e of r.indexes)a(e.keyPath,0,e);function u(t){const n=t.query.index;return n.isVirtual?{...t,query:{index:n,range:(r=t.query.range,o=n.keyTail,{type:1===r.type?2:r.type,lower:Zc(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,o),lowerOpen:!0,upper:Zc(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,o),upperOpen:!0})}}:t;var r,o}const c={...n,schema:{...r,primaryKey:s,indexes:i,getIndexByKeyPath:function(e){const t=o[Rc(e)];return t&&t[0]}},count:e=>n.count(u(e)),query:e=>n.query(u(e)),openCursor(t){const{keyTail:r,isVirtual:o,keyLength:i}=t.query.index;return o?n.openCursor(u(t)).then((n=>n&&function(n){const o=Object.create(n,{continue:{value:function(o){null!=o?n.continue(Zc(o,t.reverse?e.MAX_KEY:e.MIN_KEY,r)):t.unique?n.continue(n.key.slice(0,i).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,r)):n.continue()}},continuePrimaryKey:{value(t,o){n.continuePrimaryKey(Zc(t,e.MAX_KEY,r),o)}},primaryKey:{get:()=>n.primaryKey},key:{get(){const e=n.key;return 1===i?e[0]:e.slice(0,i)}},value:{get:()=>n.value}});return o}(n))):n.openCursor(t)}};return c}}}};function tl(e,t,n,r){return n=n||{},r=r||"",Ca(e).forEach((o=>{if(Ba(t,o)){var i=e[o],a=t[o];if("object"==typeof i&&"object"==typeof a&&i&&a){const e=ss(i);e!==ss(a)?n[r+o]=t[o]:"Object"===e?tl(i,a,n,r+o+"."):i!==a&&(n[r+o]=t[o])}else i!==a&&(n[r+o]=t[o])}else n[r+o]=void 0})),Ca(t).forEach((o=>{Ba(e,o)||(n[r+o]=t[o])})),n}const nl={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema,o={...n,mutate(e){const o=ru.trans,{deleting:i,creating:a,updating:s}=o.table(t).hook;switch(e.type){case"add":if(a.fire===Ms)break;return o._promise("readwrite",(()=>u(e)),!0);case"put":if(a.fire===Ms&&s.fire===Ms)break;return o._promise("readwrite",(()=>u(e)),!0);case"delete":if(i.fire===Ms)break;return o._promise("readwrite",(()=>u(e)),!0);case"deleteRange":if(i.fire===Ms)break;return o._promise("readwrite",(()=>function(e){return c(e.trans,e.range,1e4)}(e)),!0)}return n.mutate(e);function u(e){const t=ru.trans,o=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!o)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?{...e,keys:o}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,o).then((u=>{const c=o.map(((n,o)=>{const c=u[o],l={onerror:null,onsuccess:null};if("delete"===e.type)i.fire.call(l,n,c,t);else if("add"===e.type||void 0===c){const i=a.fire.call(l,n,e.values[o],t);null==n&&null!=i&&(n=i,e.keys[o]=n,r.outbound||Ja(e.values[o],r.keyPath,n))}else{const r=tl(c,e.values[o]),i=s.fire.call(l,r,n,c,t);if(i){const t=e.values[o];Object.keys(i).forEach((e=>{Ba(t,e)?t[e]=i[e]:Ja(t,e,i[e])}))}}return l}));return n.mutate(e).then((({failures:t,results:n,numFailures:r,lastResult:i})=>{for(let r=0;r<o.length;++r){const i=n?n[r]:o[r],a=c[r];null==i?a.onerror&&a.onerror(t[r]):a.onsuccess&&a.onsuccess("put"===e.type&&u[r]?e.values[r]:i)}return{failures:t,results:n,numFailures:r,lastResult:i}})).catch((e=>(c.forEach((t=>t.onerror&&t.onerror(e))),Promise.reject(e))))}))}function c(e,t,o){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:o}).then((({result:n})=>u({type:"delete",keys:n,trans:e}).then((r=>r.numFailures>0?Promise.reject(r.failures[0]):n.length<o?{failures:[],numFailures:0,lastResult:void 0}:c(e,{...t,lower:n[n.length-1],lowerOpen:!0},o)))))}}};return o}})};function rl(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;const r=[];for(let o=0,i=0;o<t.keys.length&&i<e.length;++o)0===lc(t.keys[o],e[i])&&(r.push(n?os(t.values[o]):t.values[o]),++i);return r.length===e.length?r:null}catch(e){return null}}const ol={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:e=>{if(!e.cache)return n.getMany(e);const t=rl(e.keys,e.trans._cache,"clone"===e.cache);return t?su.resolve(t):n.getMany(e).then((t=>(e.trans._cache={keys:e.keys,values:"clone"===e.cache?os(t):t},t)))},mutate:e=>("add"!==e.type&&(e.trans._cache=null),n.mutate(e))}}})};function il(e){return!("from"in e)}const al=function(e,t){if(!this){const t=new al;return e&&"d"in e&&Ia(t,e),t}Ia(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function sl(e,t,n){const r=lc(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(il(e))return Ia(e,{from:t,to:n,d:1});const o=e.l,i=e.r;if(lc(n,e.from)<0)return o?sl(o,t,n):e.l={from:t,to:n,d:1,l:null,r:null},ll(e);if(lc(t,e.to)>0)return i?sl(i,t,n):e.r={from:t,to:n,d:1,l:null,r:null},ll(e);lc(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),lc(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const a=!e.r;o&&!e.l&&ul(e,o),i&&a&&ul(e,i)}function ul(e,t){il(t)||function e(t,{from:n,to:r,l:o,r:i}){sl(t,n,r),o&&e(t,o),i&&e(t,i)}(e,t)}function cl(e){let t=il(e)?null:{s:0,n:e};return{next(e){const n=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&lc(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||lc(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function ll(e){var t,n;const r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),o=r>1?"r":r<-1?"l":"";if(o){const t="r"===o?"l":"r",n={...e},r=e[o];e.from=r.from,e.to=r.to,e[o]=r[o],n[o]=r[t],e[t]=n,n.d=fl(n)}e.d=fl(e)}function fl({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}za(al.prototype,{add(e){return ul(this,e),this},addKey(e){return sl(this,e,e),this},addKeys(e){return e.forEach((e=>sl(this,e,e))),this},[us](){return cl(this)}});const hl={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new al(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const o=e.table(r),{schema:i}=o,{primaryKey:a}=i,{extractKey:s,outbound:u}=a,c={...o,mutate:e=>{const a=e.trans,s=a.mutatedParts||(a.mutatedParts={}),u=e=>{const n=`idb://${t}/${r}/${e}`;return s[n]||(s[n]=new al)},c=u(""),l=u(":dels"),{type:f}=e;let[h,d]="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const p=e.trans._cache;return o.mutate(e).then((e=>{if(Da(h)){"delete"!==f&&(h=e.results),c.addKeys(h);const t=rl(h,p);t||"add"===f||l.addKeys(h),(t||d)&&function(e,t,n,r){t.indexes.forEach((function(t){const o=e(t.name||"");function i(e){return null!=e?t.extractKey(e):null}const a=e=>t.multiEntry&&Da(e)?e.forEach((e=>o.addKey(e))):o.addKey(e);(n||r).forEach(((e,t)=>{const o=n&&i(n[t]),s=r&&i(r[t]);0!==lc(o,s)&&(null!=o&&a(o),null!=s&&a(s))}))}))}(u,i,t,d)}else if(h){const e={from:h.lower,to:h.upper};l.add(e),c.add(e)}else c.add(n),l.add(n),i.indexes.forEach((e=>u(e.name).add(n)));return e}))}},l=({query:{index:t,range:n}})=>{var r,o;return[t,new al(null!==(r=n.lower)&&void 0!==r?r:e.MIN_KEY,null!==(o=n.upper)&&void 0!==o?o:e.MAX_KEY)]},f={get:e=>[a,new al(e.key)],getMany:e=>[a,(new al).addKeys(e.keys)],count:l,query:l,openCursor:l};return Ca(f).forEach((e=>{c[e]=function(i){const{subscr:a}=ru;if(a){const c=e=>{const n=`idb://${t}/${r}/${e}`;return a[n]||(a[n]=new al)},l=c(""),h=c(":dels"),[d,p]=f[e](i);if(c(d.name||"").add(p),!d.isPrimaryKey){if("count"!==e){const t="query"===e&&u&&i.values&&o.query({...i,values:!1});return o[e].apply(this,arguments).then((n=>{if("query"===e){if(u&&i.values)return t.then((({result:e})=>(l.addKeys(e),n)));const e=i.values?n.result.map(s):n.result;i.values?l.addKeys(e):h.addKeys(e)}else if("openCursor"===e){const e=n,t=i.values;return e&&Object.create(e,{key:{get:()=>(h.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return h.addKey(t),t}},value:{get:()=>(t&&l.addKey(e.primaryKey),e.value)}})}return n}))}h.add(n)}}return o[e].apply(this,arguments)}})),c}}}};class dl{constructor(e,t){this._middlewares={},this.verno=0;const n=dl.dependencies;this._options=t={addons:dl.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:r}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ms,dbReadyPromise:null,cancelOpen:Ms,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var i;o.dbReadyPromise=new su((e=>{o.dbReadyResolve=e})),o.openCanceller=new su(((e,t)=>{o.cancelOpen=t})),this._state=o,this.name=e,this.on=tc(this,"populate","blocked","versionchange","close",{ready:[Ls,Ms]}),this.on.ready.subscribe=Wa(this.on.ready.subscribe,(e=>(t,n)=>{dl.vip((()=>{const r=this._state;if(r.openComplete)r.dbOpenError||su.resolve().then(t),n&&e(t);else if(r.onReadyBeingFired)r.onReadyBeingFired.push(t),n&&e(t);else{e(t);const r=this;n||e((function e(){r.on.ready.unsubscribe(t),r.on.ready.unsubscribe(e)}))}}))})),this.Collection=(i=this,nc(dc.prototype,(function(e,t){this.db=i;let n=Xu,r=null;if(t)try{n=t()}catch(e){r=e}const o=e._ctx,a=o.table,s=a.hook.reading.fire;this._ctx={table:a,index:o.index,isPrimKey:!o.index||a.schema.primKey.keyPath&&o.index===a.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:o.or,valueMapper:s!==Cs?s:null}}))),this.Table=function(e){return nc(ec.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:tc(null,{creating:[Rs,Ms],reading:[Ds,Cs],updating:[Bs,Ms],deleting:[Ns,Ms]})}))}(this),this.Transaction=function(e){return nc(kc.prototype,(function(t,n,r,o,i){this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=tc(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new su(((e,t)=>{this._resolve=e,this._reject=t})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),Vu(e)}))}))}(this),this.Version=function(e){return nc(qc.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return nc(Oc.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};const o=e._deps.indexedDB;if(!o)throw new js.MissingAPI;this._cmp=this._ascending=o.cmp.bind(o),this._descending=(e,t)=>o.cmp(t,e),this._max=(e,t)=>o.cmp(e,t)>0?e:t,this._min=(e,t)=>o.cmp(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(e=>{e.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()})),this.on("blocked",(e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${e.oldVersion/10}`)})),this._maxKey=Mc(t.IDBKeyRange),this._createTransaction=(e,t,n,r)=>new this.Transaction(e,t,n,this._options.chromeTransactionDurability,r),this._fireOnBlocked=e=>{this.on("blocked").fire(e),Wu.filter((e=>e.name===this.name&&e!==this&&!e._state.vcFired)).map((t=>t.on("versionchange").fire(e)))},this.use(el),this.use(nl),this.use(hl),this.use(ol),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach((e=>e(this)))}version(e){if(isNaN(e)||e<.1)throw new js.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new js.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const t=this._versions;var n=t.filter((t=>t._cfg.version===e))[0];return n||(n=new this.Version(e),t.push(n),t.sort(Lc),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||ru.letThrough||this._vip)?e():new su(((e,t)=>{if(this._state.openComplete)return t(new js.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new js.DatabaseClosed);this.open().catch(Ms)}this._state.dbReadyPromise.then(e,t)})).then(e)}use({stack:e,create:t,level:n,name:r}){r&&this.unuse({stack:e,name:r});const o=this._middlewares[e]||(this._middlewares[e]=[]);return o.push({stack:e,create:t,level:null==n?10:n,name:r}),o.sort(((e,t)=>e.level-t.level)),this}unuse({stack:e,name:t,create:n}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((e=>n?e.create!==n:!!t&&e.name!==t))),this}open(){return function(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((()=>t.dbOpenError?Vu(t.dbOpenError):e));ds&&(t.openCanceller._stackHolder=ms()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function o(){if(t.openCanceller!==r)throw new js.DatabaseClosed("db.open() was cancelled")}let i=t.dbReadyResolve,a=null,s=!1;return su.race([r,("undefined"==typeof navigator?su.resolve():Yc()).then((()=>new su(((r,i)=>{if(o(),!n)throw new js.MissingAPI;const u=e.name,c=t.autoSchema?n.open(u):n.open(u,Math.round(10*e.verno));if(!c)throw new js.MissingAPI;c.onerror=Ec(i),c.onblocked=Su(e._fireOnBlocked),c.onupgradeneeded=Su((r=>{if(a=c.transaction,t.autoSchema&&!e._options.allowEmptyDB){c.onerror=xc,a.abort(),c.result.close();const e=n.deleteDatabase(u);e.onsuccess=e.onerror=Su((()=>{i(new js.NoSuchDatabase(`Database ${u} doesnt exist`))}))}else{a.onerror=Ec(i);var o=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;s=o<1,e._novip.idbdb=c.result,function(e,t,n,r){const o=e._dbSchema,i=e._createTransaction("readwrite",e._storeNames,o);i.create(n),i._completion.catch(r);const a=i._reject.bind(i),s=ru.transless||ru;Au((()=>{ru.trans=i,ru.transless=s,0===t?(Ca(o).forEach((e=>{Uc(n,e,o[e].primKey,o[e].indexes)})),Nc(e,n),su.follow((()=>e.on.populate.fire(i))).catch(a)):function({_novip:e},t,n,r){const o=[],i=e._versions;let a=e._dbSchema=Fc(0,e.idbdb,r),s=!1;return i.filter((e=>e._cfg.version>=t)).forEach((i=>{o.push((()=>{const o=a,u=i._cfg.dbschema;Hc(e,o,r),Hc(e,u,r),a=e._dbSchema=u;const c=Kc(o,u);c.add.forEach((e=>{Uc(r,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((e=>{if(e.recreate)throw new js.Upgrade("Not yet support for changing primary key");{const t=r.objectStore(e.name);e.add.forEach((e=>Vc(t,e))),e.change.forEach((e=>{t.deleteIndex(e.name),Vc(t,e)})),e.del.forEach((e=>t.deleteIndex(e)))}}));const l=i._cfg.contentUpgrade;if(l&&i._cfg.version>t){Nc(e,r),n._memoizedTables={},s=!0;let t=Xa(u);c.del.forEach((e=>{t[e]=o[e]})),zc(e,[e.Transaction.prototype]),Bc(e,[e.Transaction.prototype],Ca(t),t),n.schema=t;const i=hs(l);let a;i&&Tu();const f=su.follow((()=>{if(a=l(n),a&&i){var e=Mu.bind(null,null);a.then(e,e)}}));return a&&"function"==typeof a.then?su.resolve(a):f.then((()=>a))}})),o.push((t=>{s&&$u||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((n=>null==e[n]&&t.db.deleteObjectStore(n)))}(i._cfg.dbschema,t),zc(e,[e.Transaction.prototype]),Bc(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}))})),function e(){return o.length?su.resolve(o.shift()(n.idbtrans)).then(e):su.resolve()}().then((()=>{var e,t;t=r,Ca(e=a).forEach((n=>{t.db.objectStoreNames.contains(n)||Uc(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,i,n).catch(a)}))}(e,o/10,a,i)}}),i),c.onsuccess=Su((()=>{a=null;const n=e._novip.idbdb=c.result,o=qa(n.objectStoreNames);if(o.length>0)try{const r=n.transaction(1===(i=o).length?i[0]:i,"readonly");t.autoSchema?function({_novip:e},t,n){e.verno=t.version/10;const r=e._dbSchema=Fc(0,t,n);e._storeNames=qa(t.objectStoreNames,0),Bc(e,[e._allTables],Ca(r),r)}(e,n,r):(Hc(e,e._dbSchema,r),function(e,t){const n=Kc(Fc(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((e=>e.add.length||e.change.length)))}(e,r)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Nc(e,r)}catch(e){}var i;Wu.push(e),n.onversionchange=Su((n=>{t.vcFired=!0,e.on("versionchange").fire(n)})),n.onclose=Su((t=>{e.on("close").fire(t)})),s&&function({indexedDB:e,IDBKeyRange:t},n){!Gc(e)&&"__dbnames"!==n&&Wc(e,t).put({name:n}).catch(Ms)}(e._deps,u),r()}),i)}))))]).then((()=>(o(),t.onReadyBeingFired=[],su.resolve($c((()=>e.on.ready.fire(e.vip)))).then((function n(){if(t.onReadyBeingFired.length>0){let r=t.onReadyBeingFired.reduce(Ls,Ms);return t.onReadyBeingFired=[],su.resolve($c((()=>r(e.vip)))).then(n)}}))))).finally((()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((()=>e)).catch((n=>{t.dbOpenError=n;try{a&&a.abort()}catch(e){}return r===t.openCanceller&&e._close(),Vu(n)})).finally((()=>{t.openComplete=!0,i()}))}(this)}_close(){const e=this._state,t=Wu.indexOf(this);if(t>=0&&Wu.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new su((t=>{e.dbReadyResolve=t})),e.openCanceller=new su(((t,n)=>{e.cancelOpen=n}))}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new js.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new su(((n,r)=>{const o=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=Su((()=>{!function({indexedDB:e,IDBKeyRange:t},n){!Gc(e)&&"__dbnames"!==n&&Wc(e,t).delete(n).catch(Ms)}(this._deps,this.name),n()})),e.onerror=Ec(r),e.onblocked=this._fireOnBlocked};if(e)throw new js.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(o):o()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Ca(this._allTables).map((e=>this._allTables[e]))}transaction(){const e=Jc.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,n){let r=ru.trans;r&&r.db===this&&-1===e.indexOf("!")||(r=null);const o=-1!==e.indexOf("?");let i,a;e=e.replace("!","").replace("?","");try{if(a=t.map((e=>{var t=e instanceof this.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||"readonly"===e)i="readonly";else{if("rw"!=e&&"readwrite"!=e)throw new js.InvalidArgument("Invalid transaction mode: "+e);i="readwrite"}if(r){if("readonly"===r.mode&&"readwrite"===i){if(!o)throw new js.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&a.forEach((e=>{if(r&&-1===r.storeNames.indexOf(e)){if(!o)throw new js.SubTransaction("Table "+e+" not included in parent transaction.");r=null}})),o&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,((t,n)=>{n(e)})):Vu(e)}const s=Xc.bind(null,this,i,a,r,n);return r?r._promise(i,s,"lock"):ru.trans?Bu(ru.transless,(()=>this._whenReady(s))):this._whenReady(s)}table(e){if(!Ba(this._allTables,e))throw new js.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const pl="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";class vl{constructor(e){this._subscribe=e}subscribe(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})}[pl](){return this}}function yl(e,t){return Ca(t).forEach((n=>{ul(e[n]||(e[n]=new al),t[n])})),e}let ml;try{ml={indexedDB:Ma.indexedDB||Ma.mozIndexedDB||Ma.webkitIndexedDB||Ma.msIndexedDB,IDBKeyRange:Ma.IDBKeyRange||Ma.webkitIDBKeyRange}}catch(k){ml={indexedDB:null,IDBKeyRange:null}}const gl=dl;function bl(e){let t=wl;try{wl=!0,Pc.storagemutated.fire(e)}finally{wl=t}}za(gl,{...Ts,delete:e=>new gl(e,{addons:[]}).delete(),exists:e=>new gl(e,{addons:[]}).open().then((e=>(e.close(),!0))).catch("NoSuchDatabaseError",(()=>!1)),getDatabaseNames(e){try{return function({indexedDB:e,IDBKeyRange:t}){return Gc(e)?Promise.resolve(e.databases()).then((e=>e.map((e=>e.name)).filter((e=>"__dbnames"!==e)))):Wc(e,t).toCollection().primaryKeys()}(gl.dependencies).then(e)}catch(e){return Vu(new js.MissingAPI)}},defineClass:()=>function(e){Ia(this,e)},ignoreTransaction:e=>ru.trans?Bu(ru.transless,e):e(),vip:$c,async:function(e){return function(){try{var t=Qc(e.apply(this,arguments));return t&&"function"==typeof t.then?t:su.resolve(t)}catch(e){return Vu(e)}}},spawn:function(e,t,n){try{var r=Qc(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:su.resolve(r)}catch(e){return Vu(e)}},currentTransaction:{get:()=>ru.trans||null},waitFor:function(e,t){const n=su.resolve("function"==typeof e?gl.ignoreTransaction(e):e).timeout(t||6e4);return ru.trans?ru.trans.waitFor(n):n},Promise:su,debug:{get:()=>ds,set:e=>{ps(e,"dexie"===e?()=>!0:Qu)}},derive:Ua,extend:Ia,props:za,override:Wa,Events:tc,on:Pc,liveQuery:function(e){return new vl((t=>{const n=hs(e);let r=!1,o={},i={};const a={get closed(){return r},unsubscribe:()=>{r=!0,Pc.storagemutated.unsubscribe(l)}};t.start&&t.start(a);let s=!1,u=!1;function c(){return Ca(i).some((e=>o[e]&&function(e,t){const n=cl(t);let r=n.next();if(r.done)return!1;let o=r.value;const i=cl(e);let a=i.next(o.from),s=a.value;for(;!r.done&&!a.done;){if(lc(s.from,o.to)<=0&&lc(s.to,o.from)>=0)return!0;lc(o.from,s.from)<0?o=(r=n.next(s.from)).value:s=(a=i.next(o.from)).value}return!1}(o[e],i[e])))}const l=e=>{yl(o,e),c()&&f()},f=()=>{if(s||r)return;o={};const h={},d=function(t){n&&Tu();const r=()=>Au(e,{subscr:t,trans:null}),o=ru.trans?Bu(ru.transless,r):r();return n&&o.then(Mu,Mu),o}(h);u||(Pc("storagemutated",l),u=!0),s=!0,Promise.resolve(d).then((e=>{s=!1,r||(c()?f():(o={},i=h,t.next&&t.next(e)))}),(e=>{s=!1,t.error&&t.error(e),a.unsubscribe()}))};return f(),a}))},extendObservabilitySet:yl,getByKeyPath:Qa,setByKeyPath:Ja,delByKeyPath:function(e,t){"string"==typeof t?Ja(e,t,void 0):"length"in t&&[].map.call(t,(function(t){Ja(e,t,void 0)}))},shallowClone:Xa,deepClone:os,getObjectDiff:tl,cmp:lc,asap:$a,minKey:-1/0,addons:[],connections:Wu,errnames:Ps,dependencies:ml,semVer:"3.2.3",version:"3.2.3".split(".").map((e=>parseInt(e))).reduce(((e,t,n)=>e+t/Math.pow(10,2*n)))}),gl.maxKey=Mc(gl.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Pc("storagemutated",(e=>{if(!wl){let t;Gu?(t=document.createEvent("CustomEvent"),t.initCustomEvent("x-storagemutated-1",!0,!0,e)):t=new CustomEvent("x-storagemutated-1",{detail:e}),wl=!0,dispatchEvent(t),wl=!1}})),addEventListener("x-storagemutated-1",(({detail:e})=>{wl||bl(e)})));let wl=!1;if("undefined"!=typeof BroadcastChannel){const e=new BroadcastChannel("x-storagemutated-1");"function"==typeof e.unref&&e.unref(),Pc("storagemutated",(t=>{wl||e.postMessage(t)})),e.onmessage=e=>{e.data&&bl(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){Pc("storagemutated",(e=>{try{wl||("undefined"!=typeof localStorage&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((t=>t.postMessage({type:"x-storagemutated-1",changedParts:e}))))}catch(e){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(e=>{if("x-storagemutated-1"===e.key){const t=JSON.parse(e.newValue);t&&bl(t.changedParts)}}));const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",(function({data:e}){e&&"x-storagemutated-1"===e.type&&bl(e.changedParts)}))}function _l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ol(e){return Ol=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ol(e)}function El(e,t){return El=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},El(e,t)}function xl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ol(e);if(t){var o=Ol(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?_l(e):t;var n}(this,n)}}su.rejectionMapper=function(e,t){if(!e||e instanceof Ss||e instanceof TypeError||e instanceof SyntaxError||!e.name||!As[e.name])return e;var n=new As[e.name](t||e.message,e);return"stack"in e&&Ka(n,"stack",{get:function(){return this.inner.stack}}),n},ps(ds,Qu);var Pl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&El(e,t)}(n,e);var t=xl(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Sl(_l(e=t.call(this,"EsmOffline")),"syncQueue",void 0),Sl(_l(e),"dynamicOfflineData",void 0),e.version(4).stores({syncQueue:"++id,userId,type,[userId+type]",dynamicOfflineData:"++id,type,identifier,*users,&[type+identifier]"}),e.syncQueue=e.table("syncQueue"),e.dynamicOfflineData=e.table("dynamicOfflineData"),e}return n}(dl);(0,ft.createGlobalStore)("offline-patients",{offlinePatientDataSyncState:{},handlers:{}});try{self["workbox:window:6.5.4"]&&_()}catch(j){}function kl(e,t){return new Promise((function(n){var r=new MessageChannel;r.port1.onmessage=function(e){n(e.data)},e.postMessage(t,[r.port2])}))}function jl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}try{self["workbox:core:6.5.4"]&&_()}catch(j){}var Al=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};function Tl(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var Ml=function(e,t){this.type=e,Object.assign(this,t)};function Cl(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Dl(){}var Il,Rl={type:"SKIP_WAITING"};function Nl(e,t){if(!t)return e&&e.then?e.then(Dl):Promise.resolve()}function Bl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ll(e){return function(e){if(Array.isArray(e))return Bl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Kl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kl(e,t){if(e){if("string"==typeof e)return Bl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bl(e,t):void 0}}function Ul(e){return function(t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||Kl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,c.useState)(e.getState()),2),r=n[0],o=n[1];return(0,c.useEffect)((function(){return e.subscribe((function(e){return o(e)}))}),[]),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){zl(e,t,n[t])}))}return e}({},r,(0,c.useMemo)((function(){return t?function(e,t){var n=function(n){r[n]=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];e.setState((function(e){var r,i=[e].concat(Ll(o));return(r=t)[n].apply(r,Ll(i))}))}};"function"==typeof t&&(t=t(e));var r={};for(var o in t)n(o);return r}(e,t):{}}),[t]))}}!function(e){var t,n;function r(t,n){var r,o;return void 0===n&&(n={}),(r=e.call(this)||this).nn={},r.tn=0,r.rn=new Al,r.en=new Al,r.on=new Al,r.un=0,r.an=new Set,r.cn=function(){var e=r.fn,t=e.installing;r.tn>0||!Tl(t.scriptURL,r.sn.toString())||performance.now()>r.un+6e4?(r.vn=t,e.removeEventListener("updatefound",r.cn)):(r.hn=t,r.an.add(t),r.rn.resolve(t)),++r.tn,t.addEventListener("statechange",r.ln)},r.ln=function(e){var t=r.fn,n=e.target,o=n.state,i=n===r.vn,a={sw:n,isExternal:i,originalEvent:e};!i&&r.mn&&(a.isUpdate=!0),r.dispatchEvent(new Ml(o,a)),"installed"===o?r.wn=self.setTimeout((function(){"installed"===o&&t.waiting===n&&r.dispatchEvent(new Ml("waiting",a))}),200):"activating"===o&&(clearTimeout(r.wn),i||r.en.resolve(n))},r.dn=function(e){var t=r.hn,n=t!==navigator.serviceWorker.controller;r.dispatchEvent(new Ml("controlling",{isExternal:n,originalEvent:e,sw:t,isUpdate:r.mn})),n||r.on.resolve(t)},r.gn=(o=function(e){var t=e.data,n=e.ports,o=e.source;return Cl(r.getSW(),(function(){r.an.has(o)&&r.dispatchEvent(new Ml("message",{data:t,originalEvent:e,ports:n,sw:o}))}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(o.apply(this,e))}catch(e){return Promise.reject(e)}}),r.sn=t,r.nn=n,navigator.serviceWorker.addEventListener("message",r.gn),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o,i=r.prototype;i.register=function(e){var t=(void 0===e?{}:e).immediate,n=void 0!==t&&t;try{var r=this;return function(e,t){var n=e();return n&&n.then?n.then(t):t()}((function(){if(!n&&"complete"!==document.readyState)return Nl(new Promise((function(e){return window.addEventListener("load",e)})))}),(function(){return r.mn=Boolean(navigator.serviceWorker.controller),r.yn=r.pn(),Cl(r.bn(),(function(e){r.fn=e,r.yn&&(r.hn=r.yn,r.en.resolve(r.yn),r.on.resolve(r.yn),r.yn.addEventListener("statechange",r.ln,{once:!0}));var t=r.fn.waiting;return t&&Tl(t.scriptURL,r.sn.toString())&&(r.hn=t,Promise.resolve().then((function(){r.dispatchEvent(new Ml("waiting",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),r.hn&&(r.rn.resolve(r.hn),r.an.add(r.hn)),r.fn.addEventListener("updatefound",r.cn),navigator.serviceWorker.addEventListener("controllerchange",r.dn),r.fn}))}))}catch(e){return Promise.reject(e)}},i.update=function(){try{return this.fn?Nl(this.fn.update()):void 0}catch(e){return Promise.reject(e)}},i.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},i.messageSW=function(e){try{return Cl(this.getSW(),(function(t){return kl(t,e)}))}catch(e){return Promise.reject(e)}},i.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&kl(this.fn.waiting,Rl)},i.pn=function(){var e=navigator.serviceWorker.controller;return e&&Tl(e.scriptURL,this.sn.toString())?e:void 0},i.bn=function(){try{var e=this;return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return Cl(navigator.serviceWorker.register(e.sn,e.nn),(function(t){return e.un=performance.now(),t}))}),(function(e){throw e}))}catch(e){return Promise.reject(e)}},(o=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(r.prototype,o)}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(e,t){this.Sn(e).add(t)},t.removeEventListener=function(e,t){this.Sn(e).delete(t)},t.dispatchEvent=function(e){e.target=this;for(var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jl(e,t):void 0}}(e))){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}(this.Sn(e.type));!(t=n()).done;)(0,t.value)(e)},t.Sn=function(e){return this.Pn.has(e)||this.Pn.set(e,new Set),this.Pn.get(e)},e}()),new Pl,(0,ft.createGlobalStore)("offline-synchronization",{}),c.default.createContext({moduleName:"",featureName:""}),d(103),Ul((0,ht.getExtensionStore)()),mn.openmrsFetch,Ul((0,ht.getExtensionInternalStore)()),function(e){e.loadPatient="loadPatient",e.newPatient="newPatient",e.loadError="patientLoadError"}(Il||(Il={}));var Vl=d(701),Fl=d.n(Vl);_t.default.extend(Fl());const Hl=Promise.resolve();hn(vn,(e=>(t,n,r)=>{const o=(0,c.useRef)(!1),{cache:i,initialSize:a=1,revalidateAll:s=!1,persistSize:u=!1,revalidateFirstPage:l=!0,revalidateOnMount:f=!1,parallel:h=!1}=r,[,,,d]=Ct.get(tn);let p;try{p=(e=>Yt(e?e(0,null):null)[0])(t),p&&(p=sn+p)}catch(e){}const[v,y,m]=zt(i,p),g=(0,c.useCallback)((()=>Pt(v()._l)?a:v()._l),[i,p,a]);(0,St.useSyncExternalStore)((0,c.useCallback)((e=>p?m(p,(()=>{e()})):()=>{}),[i,p]),g,g);const b=(0,c.useCallback)((()=>{const e=v()._l;return Pt(e)?a:e}),[p,a]),w=(0,c.useRef)(b());Wt((()=>{o.current?p&&y({_l:u?w.current:b()}):o.current=!0}),[p,i]);const _=f&&!o.current,S=e(p,(async e=>{const o=v()._i,a=[],u=b(),[c]=zt(i,e),f=c().data,p=[];let m=null;for(let e=0;e<u;++e){const[u,c]=Yt(t(e,h?null:m));if(!u)break;const[v,y]=zt(i,u);let g=v().data;const b=s||o||Pt(g)||l&&!e&&!Pt(f)||_||f&&!Pt(f[e])&&!r.compare(f[e],g);if(n&&b){const t=async()=>{if(u in d){const e=d[u];delete d[u],g=await e}else g=await n(c);y({data:g,_k:c}),a[e]=g};h?p.push(t):await t()}else a[e]=g;h||(m=g)}return h&&await Promise.all(p.map((e=>e()))),y({_i:Et}),a}),r),O=(0,c.useCallback)((function(e,t){const n="boolean"==typeof t?{revalidate:t}:t||{},r=!1!==n.revalidate;return p?(r&&(Pt(e)?y({_i:!0}):y({_i:!1})),arguments.length?S.mutate(e,{...n,revalidate:r}):S.mutate()):Hl}),[p,i]),E=(0,c.useCallback)((e=>{if(!p)return Hl;const[,n]=zt(i,p);let r;if(kt(e)?r=e(b()):"number"==typeof e&&(r=e),"number"!=typeof r)return Hl;n({_l:r}),w.current=r;const o=[],[a]=zt(i,p);let s=null;for(let e=0;e<r;++e){const[n]=Yt(t(e,s)),[r]=zt(i,n),u=n?r().data:Et;if(Pt(u))return O(a().data);o.push(u),s=u}return O(o)}),[p,i,O,b]);return{size:b(),setSize:E,mutate:O,get data(){return S.data},get error(){return S.error},get isValidating(){return S.isValidating},get isLoading(){return S.isLoading}}}));var ql={};function Wl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}setTimeout((function(){"development"===window.spaEnv&&(window.stores=ql)}),1e3),Gl=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Wl(e,t,n[t])}))}return e}({},{address1:"Address line 1",address2:"Address line 2",address3:"Address line 3",address4:"Address line 4",address5:"Address line 5",address6:"Address line 6",city:"City",cityVillage:"City",country:"Country",countyDistrict:"District",postalCode:"Postal code",state:"State",stateProvince:"State"},{closeAllOpenedWorkspaces:"Discard changes in {{count}} workspaces",closingAllWorkspacesPromptBody:"There are unsaved changes in the following workspaces. Do you want to discard changes in the following workspaces? {{workspaceNames}}",closingAllWorkspacesPromptTitle:"You have unsaved changes",discard:"Discard",hide:"Hide",maximize:"Maximize",minimize:"Minimize",openAnyway:"Open anyway",unsavedChangesInOpenedWorkspace:"You have unsaved changes in the opened workspace. Do you want to discard these changes?",unsavedChangesInWorkspace:"There are unsaved changes in {{workspaceName}}. Please save them before opening another workspace.",unsavedChangesTitleText:"Unsaved changes",workspaceHeader:"Workspace header"}),$l=null!=($l={actions:"Actions",address:"Address",age:"Age",cancel:"Cancel",change:"Change",close:"Close",confirm:"Confirm",contactAdministratorIfIssuePersists:"Contact your system administrator if the problem persists.",contactDetails:"Contact details",error:"Error",errorCopy:"Sorry, there was a problem displaying this information. You can try to reload this page, or contact the site administrator and quote the error code above.",female:"Female",hideDetails:"Hide details",loading:"Loading",male:"Male",other:"Other",patientIdentifierSticker:"Patient identifier sticker",patientLists:"Patient lists",print:"Print",printError:"Print error",printErrorExplainer:"An error occurred in {{errorLocation}}",printIdentifierSticker:"Print identifier sticker",printing:"Printing",relationships:"Relationships",resetOverrides:"Reset overrides",scriptLoadingFailed:"Error: Script failed to load",scriptLoadingError:"Failed to load overridden script from {{url}}. Please check that the bundled script is available at the expected URL. Click the button below to reset all import map overrides.",seeMoreLists:"See {{count}} more lists",sex:"Sex",showDetails:"Show details",unknown:"Unknown"})?$l:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Gl,Object.getOwnPropertyDescriptors($l)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object($l)).forEach((function(e){Object.defineProperty(Gl,e,Object.getOwnPropertyDescriptor($l,e))}));var Gl,$l,Yl,Ql=d(64);(Ql.default.default||Ql.default).on("initialized",(function(){window.i18next.loadNamespaces(["core"])})),hn(vn,(e=>(t,n,r)=>(r.revalidateOnFocus=!1,r.revalidateIfStale=!1,r.revalidateOnReconnect=!1,e(t,n,r)))),(0,e.defineConfigSchema)("@openmrs/esm-styleguide",u),Yl=function(e,t){document.documentElement.style.setProperty(e,t)},(0,e.getConfigStore)("@openmrs/esm-styleguide").subscribe((function(e){e.loaded&&e.config&&(Yl("--brand-01",e.config["Brand color #1"]),Yl("--brand-02",e.config["Brand color #2"]),Yl("--brand-03",e.config["Brand color #3"]))})),a("omrs-logo-full-color",t),a("omrs-logo-full-mono",t),a("omrs-logo-full-grey",t),a("omrs-logo-partial-color",n),a("omrs-logo-partial-mono",n),a("omrs-logo-partial-grey",n),a("omrs-logo-icon-color",r),a("omrs-logo-icon-mono",r),a("omrs-logo-icon-grey",r),a("omrs-logo-white",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 380 119"><path fill="var(--logo-white)" fill-rule="evenodd" d="M40.29 40.328a27.76 27.76 0 0 1 19.688-8.154c7.669 0 14.613 3.102 19.647 8.116l.02-18.54A42.84 42.84 0 0 0 59.978 17c-7.089 0-13.813 1.93-19.709 4.968zM79.645 79.671a27.74 27.74 0 0 1-19.684 8.154c-7.67 0-14.614-3.101-19.651-8.116l-.02 18.54A42.86 42.86 0 0 0 59.96 103a42.8 42.8 0 0 0 19.672-4.751z" clip-rule="evenodd"/><path fill="var(--logo-grey)" fill-rule="evenodd" d="M40.328 79.696c-5.038-5.037-8.154-11.995-8.154-19.685 0-7.669 3.102-14.612 8.116-19.65l-18.54-.02A42.85 42.85 0 0 0 17 60.012a42.8 42.8 0 0 0 4.752 19.672zM79.634 40.289a27.75 27.75 0 0 1 8.154 19.688 27.74 27.74 0 0 1-8.117 19.646l18.542.02a42.84 42.84 0 0 0 4.749-19.666c0-7.09-1.714-13.779-4.751-19.675z" clip-rule="evenodd"/><path fill="var(--logo-white)" fill-rule="evenodd" d="M156.184 60.003c0-8.749-6.118-15.777-15.025-15.777-8.909 0-15.025 7.028-15.025 15.776s6.116 15.78 15.025 15.78c8.907 0 15.025-7.031 15.025-15.78m-34.881 0c0-11.483 8.318-19.96 19.856-19.96 11.536 0 19.855 8.478 19.855 19.96 0 11.484-8.319 19.964-19.855 19.964-11.538 0-19.856-8.48-19.856-19.964M179.514 75.54c5.507 0 9.05-4.14 9.05-9.482s-3.543-9.483-9.05-9.483c-5.505 0-9.046 4.142-9.046 9.483s3.541 9.482 9.046 9.482M166.22 53.306h4.248v3.704h.11c2.344-2.725 5.449-4.36 9.154-4.36 8.014 0 13.408 5.67 13.408 13.408 0 7.63-5.613 13.406-12.752 13.406-4.58 0-8.231-2.29-9.81-5.178h-.11V90.87h-4.248zM217.773 63.768c-.163-4.305-3-7.193-7.686-7.193-4.685 0-7.79 2.888-8.335 7.193zm3.653 10.412c-3.001 3.868-6.596 5.284-11.339 5.284-8.01 0-12.914-5.993-12.914-13.406 0-7.901 5.559-13.407 13.08-13.407 7.196 0 12.096 4.906 12.096 13.354v1.362h-20.597c.325 4.413 3.704 8.173 8.335 8.173 3.65 0 6.105-1.307 8.12-3.868zM227.854 59.357c0-2.347-.216-4.361-.216-6.05h4.031c0 1.362.11 2.776.11 4.194h.11c1.144-2.505 4.306-4.85 8.5-4.85 6.705 0 9.699 4.252 9.699 10.41v15.748h-4.248v-15.31c0-4.253-1.856-6.924-5.833-6.924-5.503 0-7.903 3.979-7.903 9.811V78.81h-4.25zM259.211 41.009h6.708L278.8 70.79h.107l12.982-29.782h6.549v37.99h-4.506V47.124h-.106L280.192 79h-2.738l-13.629-31.875h-.107V79h-4.507zM312.392 57.752h4.023c4.992 0 11.487 0 11.487-6.282 0-5.47-4.776-6.276-9.177-6.276h-6.333zm-4.506-16.744h9.711c7.352 0 15.132 1.072 15.132 10.462 0 5.527-3.594 9.125-9.495 10.037L334.018 79h-5.525l-10.304-17.063h-5.797V79h-4.506zM358.123 47.713c-1.506-2.414-4.187-3.487-6.926-3.487-3.973 0-8.1 1.88-8.1 6.385 0 3.49 1.931 5.047 7.994 6.98 5.903 1.878 11.377 3.809 11.377 11.267 0 7.567-6.495 11.11-13.36 11.11-4.402 0-9.125-1.45-11.7-5.262l3.862-3.165c1.61 2.794 4.83 4.24 8.105 4.24 3.862 0 8.263-2.253 8.263-6.601 0-4.669-3.165-5.474-9.928-7.728-5.366-1.771-9.442-4.134-9.442-10.463 0-7.298 6.277-10.945 12.929-10.945 4.241 0 7.836 1.178 10.625 4.45z" clip-rule="evenodd"/></svg>'),a("omrs-icon-activity",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M6 14.5a.5.5 0 0 1-.46-.31L3.165 8.5H1v-1h2.5a.5.5 0 0 1 .46.31L6 12.64l4.03-10.815a.5.5 0 0 1 .47-.325.5.5 0 0 1 .465.34L12.86 7.5H15v1h-2.5a.5.5 0 0 1-.475-.34L10.5 3.5 6.47 14.175A.5.5 0 0 1 6 14.5"/></svg>'),a("omrs-icon-add",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M8.5 7.5V4h-1v3.5H4v1h3.5V12h1V8.5H12v-1z"/></svg>'),a("omrs-icon-arrow-down",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M12.295 8.295 8.5 12.085V2h-1v10.085l-3.795-3.79L3 9l5 5 5-5z"/></svg>'),a("omrs-icon-arrow-left",'<svg xmlns="http://www.w3.org/2000/svg"><path d="m7 13 .705-.705L3.915 8.5H14v-1H3.915l3.79-3.795L7 3 2 8z"/></svg>'),a("omrs-icon-arrow-right",'<svg xmlns="http://www.w3.org/2000/svg"><path d="m9 3-.715.696 3.79 3.804H2v1h10.075l-3.79 3.787L9 13l5-5z"/></svg>'),a("omrs-icon-arrow-up",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M8 2 3 7l.705.705L7.5 3.915V14h1V3.915l3.795 3.79L13 7z"/></svg>'),a("omrs-icon-calendar-heat-map",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M13 2h-2V1h-1v1H6V1H5v1H3a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1M3 3h2v1h1V3h4v1h1V3h2v2H3zm0 3h2.5v3H3zm6.5 7h-3v-3h3zm0-4h-3V6h3zm1 4v-3H13v3z"/></svg>'),a("omrs-icon-calendar",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M13 2h-2V1h-1v1H6V1H5v1H3c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h10c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1m0 11H3V6h10zm0-8H3V3h2v1h1V3h4v1h1V3h2z"/></svg>'),a("omrs-icon-caret-down",'<svg xmlns="http://www.w3.org/2000/svg"><path d="m12 6-4 5-4-5z"/></svg>'),a("omrs-icon-caret-left",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M10 12 5 8l5-4z"/></svg>'),a("omrs-icon-caret-right",'<svg xmlns="http://www.w3.org/2000/svg"><path d="m6 4 5 4-5 4z"/></svg>'),a("omrs-icon-caret-up",'<svg xmlns="http://www.w3.org/2000/svg"><path d="m4 10 4-5 4 5z"/></svg>'),a("omrs-icon-chart-average",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M11.5 12c-1.8 0-2.515-2.088-3.206-4.107C7.638 5.979 6.96 4 5.5 4a1.72 1.72 0 0 0-1.527 1.16l-.947-.318C3.05 4.767 3.66 3 5.5 3c2.175 0 3.006 2.427 3.74 4.569C9.844 9.333 10.415 11 11.5 11a1.72 1.72 0 0 0 1.527-1.16l.947.318C13.95 10.233 13.34 12 11.5 12"/><path d="M2 14V8.5h1v-1H2V1H1v13a1 1 0 0 0 1 1h13v-1z"/><path d="M5 7.5H4v1h1zM7 7.5H6v1h1zM11 7.5h-1v1h1zM13 7.5h-1v1h1zM15 7.5h-1v1h1z"/></svg>'),a("omrs-icon-chemistry",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M13.616 11.81 10 6.836V2h1V1H5v1h1v4.837L2.384 11.81A2.009 2.009 0 0 0 4.01 15h7.982a2.01 2.01 0 0 0 1.625-3.19M7 7.162V2h2v5.163L10.336 9H5.664zM11.99 14H4.01a1.01 1.01 0 0 1-.817-1.603L4.936 10h6.128l1.743 2.397A1.011 1.011 0 0 1 11.991 14"/></svg>'),a("omrs-icon-chevron-down",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M8 11 3 6l.7-.7L8 9.6l4.3-4.3.7.7z"/></svg>'),a("omrs-icon-chevron-left",'<svg xmlns="http://www.w3.org/2000/svg"><path d="m5 8 5-5 .7.7L6.4 8l4.3 4.3-.7.7z"/></svg>'),a("omrs-icon-chevron-right",'<svg xmlns="http://www.w3.org/2000/svg"><path d="m11 8-5 5-.7-.7L9.6 8 5.3 3.7 6 3z"/></svg>'),a("omrs-icon-chevron-up",'<svg xmlns="http://www.w3.org/2000/svg"><path d="m8 5 5 5-.7.7L8 6.4l-4.3 4.3L3 10z"/></svg>'),a("omrs-icon-close",'<svg xmlns="http://www.w3.org/2000/svg"><path d="m12 4.7-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8z"/></svg>'),a("omrs-icon-close-filled",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M8 1C4.1 1 1 4.1 1 8s3.1 7 7 7 7-3.1 7-7-3.1-7-7-7m2.7 10.5L8 8.8l-2.7 2.7-.8-.8L7.2 8 4.5 5.3l.8-.8L8 7.2l2.7-2.7.8.8L8.8 8l2.7 2.7z"/></svg>'),a("omrs-icon-close-outline",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M8 1C4.1 1 1 4.1 1 8s3.1 7 7 7 7-3.1 7-7-3.1-7-7-7m0 13c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6"/><path d="M10.7 11.5 8 8.8l-2.7 2.7-.8-.8L7.2 8 4.5 5.3l.8-.8L8 7.2l2.7-2.7.8.8L8.8 8l2.7 2.7z"/></svg>'),a("omrs-icon-document",'<svg xmlns="http://www.w3.org/2000/svg"><path d="m12.85 4.65-3.5-3.5C9.25 1.05 9.15 1 9 1H4c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h8c.55 0 1-.45 1-1V5c0-.15-.05-.25-.15-.35M9 2.2 11.8 5H9zM12 14H4V2h4v3c0 .55.45 1 1 1h3z"/><path d="M11 11H5v1h6zM11 8H5v1h6z"/></svg>'),a("omrs-icon-document-attachment",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M13 15H5.5a1 1 0 0 1-1-1v-3h1v3H13V3H8.5V2H13a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1"/><path d="M12 5H8.5v1H12zM12 7.5H8v1h4zM12 10H7.5v1H12zM4.5 9.5A2.503 2.503 0 0 1 2 7V1.5h1V7a1.5 1.5 0 0 0 3 0V2.5a.5.5 0 1 0-1 0v5H4v-5a1.5 1.5 0 0 1 3 0V7a2.503 2.503 0 0 1-2.5 2.5"/></svg>'),a("omrs-icon-download",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M13 12v2H3v-2H2v2a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-2zM13 7l-.705-.705-3.795 3.79V1h-1v9.085l-3.795-3.79L3 7l5 5z"/></svg>'),a("omrs-icon-edit",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M15 13H1v1h14zM12.7 4.5c.4-.4.4-1 0-1.4l-1.8-1.8c-.4-.4-1-.4-1.4 0L2 8.8V12h3.2zM10.2 2 12 3.8l-1.5 1.5-1.8-1.8zM3 11V9.2l5-5L9.8 6l-5 5z"/></svg>'),a("omrs-icon-event-schedule",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M10.5 15a4 4 0 1 1 0-8 4 4 0 0 1 0 8m0-7a3 3 0 1 0 0 6 3 3 0 0 0 0-6"/><path d="M11.295 12.5 10 11.205V9h1v1.795l1 1z"/><path d="M14 3a1 1 0 0 0-1-1h-2V1h-1v1H6V1H5v1H3a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h2v-1H3V3h2v1h1V3h4v1h1V3h2v3h1z"/></svg>'),a("omrs-icon-events",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M13 7h-1v1h1a1.5 1.5 0 0 1 1.5 1.5v2h1v-2A2.503 2.503 0 0 0 13 7M12 2a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3m0-1a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M11.5 15h-1v-1A1.5 1.5 0 0 0 9 12.5H7A1.5 1.5 0 0 0 5.5 14v1h-1v-1A2.503 2.503 0 0 1 7 11.5h2a2.503 2.503 0 0 1 2.5 2.5zM8 6.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3m0-1a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4 7H3A2.503 2.503 0 0 0 .5 9.5v2h1v-2A1.5 1.5 0 0 1 3 8h1zM4 2a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3m0-1a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5"/></svg>'),a("omrs-icon-group",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M15.5 15h-1v-1.5A1.5 1.5 0 0 0 13 12h-2a1.5 1.5 0 0 0-1.5 1.5V15h-1v-1.5A2.5 2.5 0 0 1 11 11h2a2.5 2.5 0 0 1 2.5 2.5zM12 6a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3m0-1a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M7.5 11h-1V9.5A1.5 1.5 0 0 0 5 8H3a1.5 1.5 0 0 0-1.5 1.5V11h-1V9.5A2.5 2.5 0 0 1 3 7h2a2.5 2.5 0 0 1 2.5 2.5zM4 2a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3m0-1a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5"/></svg>'),a("omrs-icon-group-access",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M4 9.5H3v-1A1.5 1.5 0 0 1 4.5 7H7v1H4.5a.5.5 0 0 0-.5.5zM6 6.5a2 2 0 1 1 0-4 2 2 0 0 1 0 4m0-3a1 1 0 1 0 0 2 1 1 0 0 0 0-2M10 10a2 2 0 1 1 0-4 2 2 0 0 1 0 4m0-3a1 1 0 1 0 0 2 1 1 0 0 0 0-2M13 13h-1v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1H7v-1a1.5 1.5 0 0 1 1.5-1.5h3A1.5 1.5 0 0 1 13 12z"/><path d="M4 15H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h2v1H2v12h2zM14 15h-2v-1h2V2h-2V1h2a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1"/></svg>'),a("omrs-icon-hospital-bed",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M12.5 8h-4a1 1 0 0 0-1 1v3H2V7H1v8h1v-2h12v2h1v-4.5A2.503 2.503 0 0 0 12.5 8m1.5 4H8.5V9h4a1.5 1.5 0 0 1 1.5 1.5z"/><path d="M4.75 8.5a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5m0-1a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5M10.5 3h-2V1h-1v2h-2v1h2v2h1V4h2z"/></svg>'),a("omrs-icon-image-medical",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M13 3v10H3V3zm0-1H3a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1"/><path d="M11 8V7H8.5V6H10V5H8.5V4h-1v1H6v1h1.5v1H5v1h2.5v1H5v1h2.5v1H6v1h4v-1H8.5v-1H11V9H8.5V8z"/></svg>'),a("omrs-icon-inventory-management",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M11.5 12h-2v2h2zM15 12h-2v2h2zM11.5 8.5h-2v2h2zM15 8.5h-2v2h2z"/><path d="M8.5 12H2V5h12v2.5h1V5a1 1 0 0 0-1-1h-3V2a1 1 0 0 0-1-1H6a1 1 0 0 0-1 1v2H2a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h6.5zM6 2h4v2H6z"/></svg>'),a("omrs-icon-list-checked",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M15 4H8v1h7zM3 5.295 1.705 4 1 4.705l2 2 4-4L6.295 2zM15 11H8v1h7zM3 12.295 1.705 11 1 11.705l2 2 4-4L6.295 9z"/></svg>'),a("omrs-icon-location",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M8 9a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5m0-4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3"/><path d="m8 15-4.218-4.974-.174-.226A5.44 5.44 0 0 1 2.5 6.5a5.5 5.5 0 1 1 11 0 5.44 5.44 0 0 1-1.107 3.299h-.001s-.15.198-.172.225zM4.406 9.198s.117.154.144.187L8 13.454l3.455-4.075.14-.183A4.45 4.45 0 0 0 12.5 6.5a4.5 4.5 0 1 0-9 0 4.45 4.45 0 0 0 .906 2.698"/></svg>'),a("omrs-icon-maximize",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M10 1v1h3.293L9 6.291 9.707 7 14 2.707V6h1V1zM7 9.708 6.296 9 2 13.293V10H1v5h5v-1H2.707z"/></svg>'),a("omrs-icon-medication",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M12 1H4a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1v9a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1M5 7h1.5v5H5zm6 7H5v-1h2.5V6H5V5h6zM4 4V2h8v2z"/></svg>'),a("omrs-icon-message-queue",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M14 14H2a1 1 0 0 1-1-1v-2.5h1V13h12v-2.5h1V13a1 1 0 0 1-1 1"/><path d="M12.5 10.5h-9v1h9zM12.5 8h-9v1h9zM12.5 5.5h-9v1h9zM12.5 3h-9v1h9z"/></svg>'),a("omrs-icon-microscope",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M12.697 12a3.94 3.94 0 0 0-.835-4.284 1.96 1.96 0 0 0-.542-2.207l1.388-1.388a1 1 0 0 0 0-1.415l-1.415-1.414a1 1 0 0 0-1.414 0L3.293 7.88a1 1 0 0 0 0 1.414l1.414 1.414a1 1 0 0 0 1.414 0L8.51 8.319a1.966 1.966 0 0 0 2.757.217A2.97 2.97 0 0 1 11.589 12H8v2H2v1h12v-3zm-7.283-2L4 8.586l.94-.94L6.353 9.06zM8 7q0 .19.038.376l-.977.977L5.646 6.94 10.586 2l1.415 1.414-1.625 1.625A1.99 1.99 0 0 0 8 7m2 1a1 1 0 1 1 0-2 1 1 0 0 1 0 2m3 6H9v-1h4z"/></svg>'),a("omrs-icon-money",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M15 11H1v1h14zM15 13H1v1h14zM12 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4m0-3a1 1 0 1 0 0 2 1 1 0 0 0 0-2M4 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2"/><path d="M14 10H2a1.003 1.003 0 0 1-1-1V3a1.003 1.003 0 0 1 1-1h12a1.003 1.003 0 0 1 1 1v6a1 1 0 0 1-1 1m0-7H2v6h12z"/></svg>'),a("omrs-icon-movement",'<svg xmlns="http://www.w3.org/2000/svg"><path d="m12 10-.705.705 1.79 1.795H5a2 2 0 1 1 0-4h6a3 3 0 0 0 0-6H2.915L4.705.705 4 0 1 3l3 3 .705-.705L2.915 3.5H11a2 2 0 0 1 0 4H5a3 3 0 1 0 0 6h8.085l-1.79 1.795L12 16l3-3z"/></svg>'),a("omrs-icon-overflow-menu--horizontal",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M4 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2M8 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2M12 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/></svg>'),a("omrs-icon-overflow-menu--vertical",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M8 5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M8 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2M8 13a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/></svg>'),a("omrs-icon-pedestrian-family",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M10 15H8.5a1 1 0 0 1-1-1v-2.5h1V14H10v-2.5h1v-2a.5.5 0 0 0-.5-.5H6.14l-1-3H2a.5.5 0 0 0-.5.5v3h1V14h2v-3.5h1V14a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-3.5a1 1 0 0 1-1-1v-3A1.5 1.5 0 0 1 2 5h3.14a1 1 0 0 1 .948.684L6.86 8h3.64A1.5 1.5 0 0 1 12 9.5v2a1 1 0 0 1-1 1V14a1 1 0 0 1-1 1M14 15h-1V9.5h1.5v-3A.5.5 0 0 0 14 6h-2V5h2a1.5 1.5 0 0 1 1.5 1.5v3a1 1 0 0 1-1 1H14zM3.5 4.5a2 2 0 1 1 0-4 2 2 0 0 1 0 4m0-3a1 1 0 1 0 0 2 1 1 0 0 0 0-2M12.5 4.5a2 2 0 1 1 0-4 2 2 0 0 1 0 4m0-3a1 1 0 1 0 0 2 1 1 0 0 0 0-2"/><path d="M9.25 7.5a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5m0-2.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5"/></svg>'),a("omrs-icon-pen",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M13.654 3.053 15 1.707 14.293 1l-1.346 1.346L12.4 1.8a.967.967 0 0 0-1.4 0l-9 9V14h3.2l9-9a.967.967 0 0 0 0-1.4zM4.8 13H3v-1.8l8.7-8.7 1.8 1.8zM8.293 2 4.5 5.793l.707.707L9 2.707z"/></svg>'),a("omrs-icon-printer",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M14 4.5h-1.5v-3h-9v3H2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h1.5v3h9v-3H14a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1m-9.5-2h7v2h-7zm7 11h-7v-5h7zm2.5-3h-1.5v-3h-9v3H2v-5h12z"/></svg>'),a("omrs-icon-renew",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M6 5H3.39A5.5 5.5 0 0 1 13.5 8h1A6.5 6.5 0 0 0 3 3.84V2H2v4h4zM10 11h2.61A5.5 5.5 0 0 1 2.5 8h-1A6.5 6.5 0 0 0 13 12.16V14h1v-4h-4z"/></svg>'),a("omrs-icon-password",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M10.5 1a4.5 4.5 0 0 0-4.306 5.806L1 12v3h3l5.194-5.194A4.5 4.5 0 1 0 10.5 1m0 8c-.344 0-.687-.051-1.016-.151l-.573-.174-2.015 2.014L6.207 10l-.707.707.69.69-.794.792-.689-.689-.707.707.69.69L3.585 14H2v-1.586L7.325 7.09l-.174-.573A3.5 3.5 0 1 1 10.5 9"/><path d="M11 6a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/></svg>'),a("omrs-icon-reset",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none"><path fill="#161616" d="M9 14a6 6 0 1 0-6-6v3.1L1.2 9.3l-.7.7 3 3 3-3-.7-.7L4 11.1V8a5 5 0 1 1 5 5z"/></svg>'),a("omrs-icon-search",'<svg xmlns="http://www.w3.org/2000/svg"><path d="m14.5 13.793-3.776-3.776a5.508 5.508 0 1 0-.707.707l3.776 3.776zM2 6.5a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0"/></svg>'),a("omrs-icon-save",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none"><path fill="#161616" d="m13.855 4.645-2.5-2.5A.5.5 0 0 0 11 2H3a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V5a.5.5 0 0 0-.145-.355M6 3h4v2H6zm4 10H6V9h4zm1 0V9a1 1 0 0 0-1-1H6a1 1 0 0 0-1 1v4H3V3h2v2a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V3.205l2 2V13z"/></svg>'),a("omrs-icon-shopping-cart",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M5 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2M12 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2M14 3.5H2.91L2.5 1.4A.5.5 0 0 0 2 1H0v1h1.59l1.91 9.6a.5.5 0 0 0 .5.4h9v-1H4.41L4 9h9a.5.5 0 0 0 .5-.39l1-4.5a.5.5 0 0 0-.5-.61M12.6 8H3.81l-.7-3.5h10.265z"/></svg>'),a("omrs-icon-shopping-cart--arrow-down",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M5 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2M12 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2M2.49 1.402A.5.5 0 0 0 2 1H0v1h1.59l1.92 9.598A.5.5 0 0 0 4 12h9v-1H4.41l-.4-2H13a.5.5 0 0 0 .488-.392L14.622 3.5h-1.024L12.6 8H3.81z"/><path d="M10.793 3.293 9 5.086V1H8v4.086L6.207 3.293 5.5 4l3 3 3-3z"/></svg>'),a("omrs-icon-sticky-note-add",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M11.5 1h-1v2h-2v1h2v2h1V4h2V3h-2z"/><path d="M7.5 2h-4a1.003 1.003 0 0 0-1 1v10a1.003 1.003 0 0 0 1 1h6a.45.45 0 0 0 .35-.15l3.5-3.5a.45.45 0 0 0 .15-.35V7h-1v2h-3a1.003 1.003 0 0 0-1 1v3h-5V3h4zm4.8 8-2.8 2.8V10z"/></svg>'),a("omrs-icon-switcher",s),a("omrs-icon-switcher",s),a("omrs-icon-table-of-contents",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M11 3H2v1h9zM11 6H2v1h9zM11 9H2v1h9zM11 12H2v1h9zM14 3h-1v1h1zM14 6h-1v1h1zM14 9h-1v1h1zM14 12h-1v1h1z"/></svg>'),a("omrs-icon-table",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M14.5 2.5a1 1 0 0 0-1-1h-11a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1zm-1 0v2h-11v-2zm0 11h-11v-2h11zm0-3h-11v-2h11zm0-3h-11v-2h11z"/></svg>'),a("omrs-icon-time",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14M8 2a6 6 0 1 0 0 12A6 6 0 0 0 8 2"/><path d="M10.295 11 7.5 8.205V3.5h1v4.29l2.5 2.505z"/></svg>'),a("omrs-icon-tools",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M6.05 1a4.9 4.9 0 0 0-2.7.8L6.55 5a1.05 1.05 0 0 1 .1 1.5 1.05 1.05 0 0 1-1.5-.1l-3.3-3.2A4.9 4.9 0 0 0 1 6.05a5.07 5.07 0 0 0 5.05 5.05c.438.002.874-.048 1.3-.15l3.35 3.35a2.51 2.51 0 1 0 3.55-3.55L10.9 7.4q.153-.641.15-1.3a5 5 0 0 0-5-5.1m4 5.05c0 .355-.051.709-.15 1.05l-.15.55.4.4 3.35 3.35a1.44 1.44 0 0 1 .45 1.05 1.36 1.36 0 0 1-.45 1.05 1.45 1.45 0 0 1-2.1 0l-3.35-3.35-.4-.4-.55.15c-.341.099-.695.15-1.05.15A4.14 4.14 0 0 1 3.2 8.9 3.82 3.82 0 0 1 2 6.05c0-.372.051-.742.15-1.1l2.2 2.2a2.07 2.07 0 0 0 2.95.1 2.07 2.07 0 0 0-.1-2.95L5 2.1c.323-.102.66-.153 1-.15A4.14 4.14 0 0 1 8.85 3.1a4.25 4.25 0 0 1 1.2 2.95"/></svg>'),a("omrs-icon-translate",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M13.925 14.5H15L12 7h-1.175l-3 7.5H8.9l.8-2h3.425zm-3.825-3 1.31-3.28 1.315 3.28zM9 3.5v-1H5.5V1h-1v1.5H1v1h5.37a7.36 7.36 0 0 1-1.595 3.09A6.8 6.8 0 0 1 3.63 4.5H2.58a8.2 8.2 0 0 0 1.5 2.79A8.4 8.4 0 0 1 1.5 9l.375.93A9.2 9.2 0 0 0 4.765 8a8.5 8.5 0 0 0 2.88 1.92L8 9a7.2 7.2 0 0 1-2.56-1.685A8.8 8.8 0 0 0 7.4 3.5z"/></svg>'),a("omrs-icon-trash-can",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M7 6H6v6h1zM10 6H9v6h1z"/><path d="M2 3v1h1v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4h1V3zm2 11V4h8v10zM10 1H6v1h4z"/></svg>'),a("omrs-icon-tree-view--alt",'<svg xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path d="M11.5 4.502h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-3a1 1 0 0 0-1 1v.5h-5v-.5a1 1 0 0 0-1-1h-3a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-.5h2v10a1 1 0 0 0 1 1h2v.5a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-3a1 1 0 0 0-1 1v.5h-2v-4.5h2v.5a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-3a1 1 0 0 0-1 1v.5h-2v-4.5h2v.5a1 1 0 0 0 1 1m0-3h3v2h-3zm-7 2h-3v-2h3zm7 9h3v2h-3zm0-5.5h3v2h-3z"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h16v16H0z"/></clipPath></defs></svg>'),a("omrs-icon-user-avatar",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M8 4a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5m0 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"/><path d="M8 1a7 7 0 1 0 7 7 7.01 7.01 0 0 0-7-7M5 13.188V12.5A1.5 1.5 0 0 1 6.5 11h3a1.5 1.5 0 0 1 1.5 1.5v.688a5.95 5.95 0 0 1-6 0m6.996-.725A2.5 2.5 0 0 0 9.5 10h-3a2.5 2.5 0 0 0-2.496 2.463 6 6 0 1 1 7.992 0"/></svg>'),a("omrs-icon-user-follow",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M16 7h-2V5h-1v2h-2v1h2v2h1V8h2zM6 2a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5m0-1a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7M11 15h-1v-2.5A2.5 2.5 0 0 0 7.5 10h-3A2.5 2.5 0 0 0 2 12.5V15H1v-2.5A3.5 3.5 0 0 1 4.5 9h3a3.5 3.5 0 0 1 3.5 3.5z"/></svg>'),a("omrs-icon-user-xray",'<svg xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path d="M15.5 1.5h-7A.5.5 0 0 0 8 2v6.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5V2a.5.5 0 0 0-.5-.5m-1.5 3h-1.5V6H14v1h-1.5v1h-1V7H10V6h1.5V4.5H10v-1h1.5v-1h1v1H14zM7.5 15h-1v-2A1.473 1.473 0 0 0 5 11.5H3A1.474 1.474 0 0 0 1.5 13v2h-1v-2A2.475 2.475 0 0 1 3 10.5h2A2.476 2.476 0 0 1 7.5 13zM4 5.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3m0-1a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h16v16H0z"/></clipPath></defs></svg>'),a("omrs-icon-user",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M8 2a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5m0-1a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7M13 15h-1v-2.5A2.5 2.5 0 0 0 9.5 10h-3A2.5 2.5 0 0 0 4 12.5V15H3v-2.5A3.5 3.5 0 0 1 6.5 9h3a3.5 3.5 0 0 1 3.5 3.5z"/></svg>'),a("omrs-icon-view-off",'<svg xmlns="http://www.w3.org/2000/svg"><path d="m2.62 11.255.715-.71A7 7 0 0 1 1.535 8C2.55 5.465 5.35 3.5 8 3.5a6.2 6.2 0 0 1 2 .36l.775-.78A7.4 7.4 0 0 0 8 2.5 8.35 8.35 0 0 0 .53 7.83a.5.5 0 0 0 0 .34 8 8 0 0 0 2.09 3.085"/><path d="M6 7.865a2 2 0 0 1 1.85-1.85l.905-.91A3 3 0 0 0 5.09 8.77zM15.47 7.83a8.2 8.2 0 0 0-2.87-3.72L15 1.705 14.295 1 1 14.295l.705.705 2.55-2.55A7.65 7.65 0 0 0 8 13.5a8.35 8.35 0 0 0 7.47-5.33.5.5 0 0 0 0-.34M10 8a2 2 0 0 1-3 1.72L9.72 7A2 2 0 0 1 10 8m-2 4.5a6.5 6.5 0 0 1-3-.79l1.27-1.27a3 3 0 0 0 4.175-4.175L11.88 4.83A7.27 7.27 0 0 1 14.465 8C13.45 10.535 10.65 12.5 8 12.5"/></svg>'),a("omrs-icon-view",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M15.47 7.83A8.34 8.34 0 0 0 8 2.5 8.35 8.35 0 0 0 .53 7.83a.5.5 0 0 0 0 .34A8.35 8.35 0 0 0 8 13.5a8.35 8.35 0 0 0 7.47-5.33.5.5 0 0 0 0-.34M8 12.5c-2.65 0-5.45-1.965-6.465-4.5C2.55 5.465 5.35 3.5 8 3.5s5.45 1.965 6.465 4.5C13.45 10.535 10.65 12.5 8 12.5"/><path d="M8 5a3 3 0 1 0 0 6 3 3 0 0 0 0-6m0 5a2 2 0 1 1 0-4 2 2 0 0 1 0 4"/></svg>'),a("omrs-icon-warning",'<svg xmlns="http://www.w3.org/2000/svg"><path d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1m0 13A6 6 0 1 1 8 2a6 6 0 0 1 0 12"/><path d="M8.5 4h-1v5.5h1zM8 11a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5"/></svg>'),a("omrs-pict-home",'<svg xmlns="http://www.w3.org/2000/svg" width="92" height="92" fill="none" viewBox="0 0 80 80"><path fill="#CEE6E5" d="M61.48 62H18.52c-.29 0-.52-.23-.52-.52V28.54c0-.29.23-.52.52-.52h30.99v-9.5c0-.29.23-.52.52-.52h11.46c.28 0 .52.23.52.52v42.96c0 .28-.23.52-.52.52z"/><path fill="#7BBCB9" d="M39.63 51.97h-6.85v8.99h6.85zM56.41 52.89h-1.03v-2.87h1.03zM48.54 52.89h-1.03v-2.87h1.03zM24.9 50.02h-1.03v2.86h1.03zM56.41 47.16h-1.03v-2.87h1.03zM48.54 47.16h-1.03v-2.87h1.03zM40.66 44.29h-1.03v2.86h1.03zM32.78 44.29h-1.03v2.86h1.03zM24.9 44.29h-1.03v2.86h1.03zM56.41 41.43h-1.03v-2.86h1.03zM48.54 41.43h-1.03v-2.86h1.03zM40.66 38.57h-1.03v2.86h1.03zM32.78 38.57h-1.03v2.86h1.03zM24.9 38.57h-1.03v2.86h1.03zM56.41 35.7h-1.03v-2.86h1.03zM48.54 35.7h-1.03v-2.86h1.03zM40.66 32.84h-1.03v2.86h1.03zM32.78 32.84h-1.03v2.86h1.03zM24.9 32.84h-1.03v2.86h1.03zM56.41 26.39h-1.03v-2.35h-2.35v-1.03h2.35v-2.35h1.03v2.35h2.35v1.03h-2.35z"/></svg>'),a("omrs-pict-laboratory",'<svg xmlns="http://www.w3.org/2000/svg" width="92" height="92" fill="none" viewBox="0 0 80 80"><path fill="#CEE6E5" d="M49.579 55.196h3.66c1.15-2.11 1.76-4.5 1.76-6.93 0-5.11-2.69-9.81-7.06-12.42a5.09 5.09 0 0 1-4.38 2.48c-.86 0-1.67-.21-2.39-.59l-5.02 8.7a.59.59 0 0 1-.81.22l-2.09-1.21-.91 1.58 2.09 1.21c.14.08.23.21.27.36s.02.31-.06.45l-1.5 2.6c-.16.28-.52.38-.81.22l-7.81-4.51a.6.6 0 0 1-.22-.81l1.5-2.6a.59.59 0 0 1 .81-.22l2.09 1.21.91-1.58-2.09-1.21a.58.58 0 0 1-.27-.36.6.6 0 0 1 .06-.45l15.05-26.04a.6.6 0 0 1 .81-.22l7.81 4.51a.59.59 0 0 1 .22.81l-4.92 8.51c1.44.9 2.39 2.5 2.39 4.32 0 .53-.08 1.05-.24 1.54 4.79 2.8 7.75 7.93 7.75 13.5 0 2.41-.56 4.78-1.61 6.93h4.03"/><path fill="#7BBCB9" d="m25.629 46.626 6.79 3.92.91-1.58-4.7-2.71s-.02 0-.02-.01l-2.07-1.2z"/><path fill="#CEE6E5" d="m30.539 45.986.78.45.92-1.58-1.58-.92-.92 1.59z"/><path fill="#7BBCB9" d="M41.399 36.496a3.93 3.93 0 0 0 5.75-1.67c0-.02.02-.04.03-.06a3.926 3.926 0 0 0-3.61-5.46c-2.16 0-3.92 1.76-3.92 3.92 0 1.29.62 2.43 1.58 3.14.01 0 .03.01.05.02.05.03.09.06.13.1z"/><path fill="#CEE6E5" d="M53.659 55.196h4.03c.33 0 .59.26.59.59v9.02c0 .33-.26.59-.59.59h-36.09c-.24 0-.45-.14-.55-.37s-.04-.47.13-.64l6.02-6.01a.6.6 0 0 1 .42-.17h20.46v-2.42c0-.33.26-.59.59-.59h3.66"/></svg>'),a("omrs-pict-patient-lists",'<svg xmlns="http://www.w3.org/2000/svg" width="92" height="92" fill="none" viewBox="0 0 80 80"><path fill="#CEE6E5" fill-rule="evenodd" d="M34.824 27.412c.659-.473.879-1.41.784-2.353C35.703 21.133 32.502 18 28.55 18s-7.153 3.133-7.059 7.059c-.094 2.802 1.647 5.26 3.922 6.275C20.11 32.699 16 37.538 16 43.099v11.765h21.961V27.412zM63.06 54.864V43.099c0-5.561-4.11-10.415-9.412-11.765 2.274-1.015 4.016-3.473 3.922-6.275.094-3.926-3.106-7.059-7.06-7.059-3.952 0-7.152 3.133-7.058 7.059-.094.944.11 1.88.784 2.353h-3.137v27.452z" clip-rule="evenodd"/><path fill="#7BBCB9" fill-rule="evenodd" d="M28.55 61.138v-11.52c0-5.806 4.11-10.66 9.647-11.934-2.51-1.09-4.251-3.548-4.251-6.405 0-3.87 3.2-7.004 7.153-7.004s7.153 3.133 7.153 7.004c0 2.857-1.741 5.314-4.251 6.405 5.537 1.29 9.647 6.128 9.647 11.934v11.52" clip-rule="evenodd"/></svg>'),a("omrs-pict-appointments",'<svg xmlns="http://www.w3.org/2000/svg" width="92" height="92" fill="none" viewBox="0 0 80 80"><path fill="#CEE6E5" d="M59.73 22.18H19.85c-.28 0-.51.23-.51.51v38.45c0 .28.23.51.51.51h39.88c.28 0 .51-.23.51-.51V22.7c0-.28-.23-.51-.51-.51z"/><path fill="#7BBCB9" d="M54.03 46.4h-11.4a.51.51 0 0 0-.51.51v5.7c0 .282.228.51.51.51h11.4a.51.51 0 0 0 .51-.51v-5.7a.51.51 0 0 0-.51-.51M36.94 46.4h-11.4a.51.51 0 0 0-.51.51v5.7c0 .282.228.51.51.51h11.4a.51.51 0 0 0 .51-.51v-5.7a.51.51 0 0 0-.51-.51M54.03 33.58h-11.4a.51.51 0 0 0-.51.51v5.7c0 .282.228.51.51.51h11.4a.51.51 0 0 0 .51-.51v-5.7a.51.51 0 0 0-.51-.51M36.94 33.58h-11.4a.51.51 0 0 0-.51.51v5.7c0 .282.228.51.51.51h11.4a.51.51 0 0 0 .51-.51v-5.7a.51.51 0 0 0-.51-.51M49.76 27.48c-1.07 0-1.94-.87-1.94-1.94v-5.69c0-1.07.87-1.94 1.94-1.94s1.94.87 1.94 1.94v5.7c0 1.07-.87 1.94-1.94 1.94zM29.82 27.48c-1.07 0-1.94-.87-1.94-1.94v-5.69c0-1.07.87-1.94 1.94-1.94s1.94.87 1.94 1.94v5.7c0 1.07-.87 1.94-1.94 1.94z"/><path fill="#CEE6E5" d="M45.48 22.18H34.09v1.03h11.39z"/></svg>'),a("omrs-pict-service-queues",'<svg xmlns="http://www.w3.org/2000/svg" width="92" height="92" fill="none" viewBox="0 0 80 80"><path fill="#CEE6E5" fill-rule="evenodd" d="M34.824 27.412c.659-.473.879-1.41.784-2.353C35.703 21.133 32.502 18 28.55 18s-7.153 3.133-7.059 7.059c-.094 2.802 1.647 5.26 3.922 6.275C20.11 32.699 16 37.538 16 43.099v11.765h21.961V27.412zM63.06 54.864V43.099c0-5.561-4.11-10.415-9.412-11.765 2.274-1.015 4.016-3.473 3.922-6.275.094-3.926-3.106-7.059-7.06-7.059-3.952 0-7.152 3.133-7.058 7.059-.094.944.11 1.88.784 2.353h-3.137v27.452z" clip-rule="evenodd"/><path fill="#7BBCB9" fill-rule="evenodd" d="M28.55 61.138v-11.52c0-5.806 4.11-10.66 9.647-11.934-2.51-1.09-4.251-3.548-4.251-6.405 0-3.87 3.2-7.004 7.153-7.004s7.153 3.133 7.153 7.004c0 2.857-1.741 5.314-4.251 6.405 5.537 1.29 9.647 6.128 9.647 11.934v11.52" clip-rule="evenodd"/></svg>')})(),(()=>{"use strict";d.r(p)})(),p})())}}}));
//# sourceMappingURL=openmrs-esm-styleguide.js.map