"use strict";(self.webpackChunk_openmrs_esm_app_shell=self.webpackChunk_openmrs_esm_app_shell||[]).push([[173,111],{79111:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d,infinite:()=>o,unstable_serialize:()=>c});var r=a(75776),n=a(24126),l=a(97381),i=a(87921);const s=e=>(0,l.serialize)(e?e(0,null):null)[0],c=e=>l.INFINITE_PREFIX+s(e),u=Promise.resolve(),o=e=>(t,a,n)=>{const c=(0,r.useRef)(!1),{cache:o,initialSize:d=1,revalidateAll:f=!1,persistSize:p=!1,revalidateFirstPage:_=!0,revalidateOnMount:h=!1,parallel:m=!1}=n,[,,,b]=l.SWRGlobalState.get(l.cache);let C;try{C=s(t),C&&(C=l.INFINITE_PREFIX+C)}catch(e){}const[g,k,I]=(0,l.createCacheHelper)(o,C),E=(0,r.useCallback)((()=>(0,l.isUndefined)(g()._l)?d:g()._l),[o,C,d]);(0,i.useSyncExternalStore)((0,r.useCallback)((e=>C?I(C,(()=>{e()})):()=>{}),[o,C]),E,E);const U=(0,r.useCallback)((()=>{const e=g()._l;return(0,l.isUndefined)(e)?d:e}),[C,d]),v=(0,r.useRef)(U());(0,l.useIsomorphicLayoutEffect)((()=>{c.current?C&&k({_l:p?v.current:U()}):c.current=!0}),[C,o]);const w=h&&!c.current,y=e(C,(async e=>{const r=g()._i,i=[],s=U(),[c]=(0,l.createCacheHelper)(o,e),u=c().data,d=[];let p=null;for(let e=0;e<s;++e){const[s,c]=(0,l.serialize)(t(e,m?null:p));if(!s)break;const[h,C]=(0,l.createCacheHelper)(o,s);let g=h().data;const k=f||r||(0,l.isUndefined)(g)||_&&!e&&!(0,l.isUndefined)(u)||w||u&&!(0,l.isUndefined)(u[e])&&!n.compare(u[e],g);if(a&&k){const t=async()=>{if(s in b){const e=b[s];delete b[s],g=await e}else g=await a(c);C({data:g,_k:c}),i[e]=g};m?d.push(t):await t()}else i[e]=g;m||(p=g)}return m&&await Promise.all(d.map((e=>e()))),k({_i:l.UNDEFINED}),i}),n),z=(0,r.useCallback)((function(e,t){const a="boolean"==typeof t?{revalidate:t}:t||{},r=!1!==a.revalidate;return C?(r&&((0,l.isUndefined)(e)?k({_i:!0}):k({_i:!1})),arguments.length?y.mutate(e,{...a,revalidate:r}):y.mutate()):u}),[C,o]),F=(0,r.useCallback)((e=>{if(!C)return u;const[,a]=(0,l.createCacheHelper)(o,C);let r;if((0,l.isFunction)(e)?r=e(U()):"number"==typeof e&&(r=e),"number"!=typeof r)return u;a({_l:r}),v.current=r;const n=[],[i]=(0,l.createCacheHelper)(o,C);let s=null;for(let e=0;e<r;++e){const[a]=(0,l.serialize)(t(e,s)),[r]=(0,l.createCacheHelper)(o,a),c=a?r().data:l.UNDEFINED;if((0,l.isUndefined)(c))return z(i().data);n.push(c),s=c}return z(n)}),[C,o,z,U]);return{size:U(),setSize:F,mutate:z,get data(){return y.data},get error(){return y.error},get isValidating(){return y.isValidating},get isLoading(){return y.isLoading}}},d=(0,l.withMiddleware)(n.ZP,o)}}]);